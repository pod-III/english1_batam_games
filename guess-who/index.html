<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Guess Who | English 1 Batam</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Nunito:wght@200..900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        e1pink: '#FF6B95',
                        e1orange: '#FF8C42',
                        e1green: '#00E676',
                        e1blue: '#2979FF',
                        e1dark: '#1e293b',
                        e1chalk: '#f8fafc',
                    },
                    fontFamily: {
                        fredoka: ['Fredoka', 'sans-serif'],
                        nunito: ['Nunito', 'sans-serif'],
                    },
                    boxShadow: {
                        'neobrutal': '4px 4px 0px 0px rgba(30, 41, 59, 1)',
                        'neobrutal-sm': '2px 2px 0px 0px rgba(30, 41, 59, 1)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Graph Paper Background */
        .bg-graph-paper {
            background-color: #f8fafc;
            background-image: 
                linear-gradient(#cbd5e1 1px, transparent 1px), 
                linear-gradient(90deg, #cbd5e1 1px, transparent 1px);
            background-size: 24px 24px;
        }

        /* Card Flip Animation Styles */
        .perspective-1000 {
            perspective: 1000px;
        }
        .transform-style-3d {
            transform-style: preserve-3d;
        }
        .backface-hidden {
            backface-visibility: hidden;
        }
        .rotate-y-180 {
            transform: rotateY(180deg);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
            border-left: 2px solid #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #FF6B95; 
            border: 2px solid #1e293b;
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #FF8C42; 
        }
        
        /* Button Press Animation Class */
        .btn-press:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px 0px rgba(30, 41, 59, 1);
        }

        .modal-open {
            overflow: hidden;
        }

        @keyframes bounce-in {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }
        .animate-bounce-in {
            animation: bounce-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
    </style>
</head>
<body class="bg-graph-paper font-nunito text-e1dark min-h-screen flex flex-col">

    <header class="bg-e1orange border-b-4 border-e1dark py-4 px-4 sticky top-0 z-40 shadow-neobrutal mb-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-white p-2 rounded-lg border-2 border-e1dark shadow-neobrutal-sm">
                    <i data-lucide="users" class="w-6 h-6 text-e1blue"></i>
                </div>
                <h1 class="font-fredoka text-2xl md:text-3xl font-bold text-white text-shadow-sm tracking-wide">GUESS WHO?</h1>
            </div>
            <div class="flex gap-2">
                 <button onclick="toggleInstructions()" class="btn-press bg-e1blue text-white font-fredoka px-4 py-2 rounded-xl border-2 border-e1dark shadow-neobrutal flex items-center gap-2">
                    <i data-lucide="info" class="w-4 h-4"></i>
                    <span class="hidden md:inline">Rules</span>
                </button>
                <button onclick="resetGame()" class="btn-press bg-e1pink text-white font-fredoka px-4 py-2 rounded-xl border-2 border-e1dark shadow-neobrutal flex items-center gap-2">
                    <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
                    <span class="hidden md:inline">Restart</span>
                </button>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-[1400px] mx-auto w-full px-4 pb-8 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <aside class="lg:col-span-3 flex flex-col gap-6 order-2 lg:order-1">
            <div class="bg-white border-4 border-e1dark rounded-2xl shadow-neobrutal p-4 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-4 bg-e1pink border-b-2 border-e1dark"></div>
                <h2 class="font-fredoka text-xl mb-3 mt-2 flex items-center gap-2">
                    <i data-lucide="user-check" class="text-e1pink"></i>
                    My Character
                </h2>
                
                <div id="my-character-display" class="bg-e1chalk border-2 border-e1dark border-dashed rounded-xl p-4 flex flex-col items-center justify-center min-h-[180px]">
                    <p class="text-gray-400 font-bold text-center">Not selected yet</p>
                </div>
                <p class="text-center text-xs font-bold text-gray-400 mt-2 uppercase tracking-wide">Your Secret Identity</p>
            </div>

            <div class="bg-white border-4 border-e1dark rounded-2xl shadow-neobrutal p-4">
                <div class="bg-e1chalk border-2 border-e1dark rounded-xl p-4 flex flex-col items-center justify-center">
                    <p class="text-sm font-bold text-gray-500 uppercase mb-1">People Remaining</p>
                    <p id="remaining-count" class="text-5xl font-black text-e1blue">24</p>
                </div>
            </div>
        </aside>

        <section class="lg:col-span-9 order-1 lg:order-2">
            <div id="card-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-3">
                </div>
        </section>

    </main>

    <div id="pick-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white border-4 border-e1dark rounded-2xl shadow-neobrutal w-full max-w-5xl h-[90vh] flex flex-col overflow-hidden animate-bounce-in">
            <div class="bg-e1pink p-4 border-b-4 border-e1dark flex justify-between items-center text-white shrink-0">
                <h3 class="font-fredoka text-2xl font-bold flex items-center gap-2">
                    <i data-lucide="fingerprint"></i>
                    Who are you?
                </h3>
            </div>
            <div class="p-3 bg-e1chalk border-b-2 border-e1dark text-center font-nunito font-bold text-e1dark shrink-0">
                Pick the character you will be hiding from your opponent!
            </div>
            <div class="p-6 overflow-y-auto flex-grow bg-graph-paper">
                <div id="pick-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    </div>
            </div>
        </div>
    </div>

    <div id="instructions-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white border-4 border-e1dark rounded-2xl shadow-neobrutal w-full max-w-lg overflow-hidden">
            <div class="bg-e1pink p-4 border-b-4 border-e1dark flex justify-between items-center text-white">
                <h3 class="font-fredoka text-xl font-bold">How to Play</h3>
                <button onclick="closeModal('instructions-modal')" class="p-1 hover:bg-white/20 rounded"><i data-lucide="x"></i></button>
            </div>
            <div class="p-6 space-y-4 font-nunito text-lg text-e1dark">
                <p>1. Start by <strong>Picking your Character</strong>. Your opponent (a real person) will do the same.</p>
                <p>2. Ask your opponent Yes/No questions (e.g., "Does your person have glasses?").</p>
                <p>3. If the answer is "No", click the people who HAVE glasses to <strong>eliminate</strong> them.</p>
                <p>4. The last person remaining on your board is your guess!</p>
            </div>
        </div>
    </div>

    <script>
        // --- Game Data ---
        // Added gender property: 'm' for male, 'f' for female
        const characters = [
            { id: 1, name: "Alex", gender: 'm' },
            { id: 2, name: "Sarah", gender: 'f' },
            { id: 3, name: "Jordan", gender: 'm' },
            { id: 4, name: "Emily", gender: 'f' },
            { id: 5, name: "Chris", gender: 'm' },
            { id: 6, name: "Jessica", gender: 'f' },
            { id: 7, name: "Mike", gender: 'm' },
            { id: 8, name: "Lisa", gender: 'f' },
            { id: 9, name: "David", gender: 'm' },
            { id: 10, name: "Emma", gender: 'f' },
            { id: 11, name: "Tom", gender: 'm' },
            { id: 12, name: "Anna", gender: 'f' },
            { id: 13, name: "Ryan", gender: 'm' },
            { id: 14, name: "Chloe", gender: 'f' },
            { id: 15, name: "Sam", gender: 'm' },
            { id: 16, name: "Kate", gender: 'f' },
            { id: 17, name: "Max", gender: 'm' },
            { id: 18, name: "Olivia", gender: 'f' },
            { id: 19, name: "Ben", gender: 'm' },
            { id: 20, name: "Sophie", gender: 'f' },
            { id: 21, name: "Daniel", gender: 'm' },
            { id: 22, name: "Maya", gender: 'f' },
            { id: 23, name: "Jake", gender: 'm' },
            { id: 24, name: "Ruby", gender: 'f' },
        ];

        // --- Game State ---
        let myCharacter = null;
        let eliminatedIds = new Set();

        // --- Helper: Get Avatar URL ---
        // Changed to 'miniavs'
        function getAvatar(seed) {
            return `https://api.dicebear.com/9.x/miniavs/svg?seed=${seed}&backgroundColor=b6e3f4&radius=10`;
        }

        // --- Initialization ---
        function initGame() {
            eliminatedIds.clear();
            myCharacter = null;
            
            updateStats();
            renderGrid();
            renderPickGrid();
            
            // Show Pick Modal immediately
            document.getElementById('pick-modal').classList.remove('hidden');
            
            // Reset Sidebar Display
            const display = document.getElementById('my-character-display');
            display.innerHTML = `<p class="text-gray-400 font-bold text-center">Not selected yet</p>`;
        }

        function startGame(characterId) {
            myCharacter = characters.find(c => c.id === characterId);
            document.getElementById('pick-modal').classList.add('hidden');
            
            // Update Sidebar Display
            const display = document.getElementById('my-character-display');
            const avatarUrl = getAvatar(myCharacter.name);
            const colorClass = myCharacter.gender === 'm' ? 'text-e1blue bg-blue-100' : 'text-e1pink bg-pink-100';
            
            display.innerHTML = `
                <div class="w-24 h-24 mb-3 rounded-full border-2 border-e1dark bg-white overflow-hidden shadow-sm">
                    <img src="${avatarUrl}" alt="${myCharacter.name}" class="w-full h-full object-cover">
                </div>
                <div class="font-fredoka text-2xl font-bold ${colorClass} px-4 py-1 rounded-lg border-2 border-e1dark">
                    ${myCharacter.name}
                </div>
            `;
        }

        // --- Rendering ---
        function renderGrid() {
            const grid = document.getElementById('card-grid');
            grid.innerHTML = '';

            characters.forEach(char => {
                const isEliminated = eliminatedIds.has(char.id);
                
                // Color Logic
                const nameBg = char.gender === 'm' ? 'bg-e1blue' : 'bg-e1pink';

                // Card Container
                const card = document.createElement('div');
                card.className = `relative h-44 w-full cursor-pointer perspective-1000 group select-none`;
                card.onclick = () => toggleEliminate(char.id);

                // Inner Flipper
                const flipper = document.createElement('div');
                flipper.className = `relative w-full h-full duration-500 transform-style-3d transition-all ${isEliminated ? 'rotate-y-180' : ''}`;

                // --- FRONT ---
                const front = document.createElement('div');
                front.className = `absolute w-full h-full backface-hidden bg-white border-4 border-e1dark rounded-xl shadow-neobrutal flex flex-col items-center justify-center p-2 group-hover:-translate-y-1 group-hover:shadow-[6px_6px_0px_0px_rgba(30,41,59,1)] transition-all overflow-hidden`;
                
                const avatarUrl = getAvatar(char.name);
                
                front.innerHTML = `
                    <div class="w-20 h-20 mb-2 rounded-full border-2 border-e1dark bg-e1chalk overflow-hidden">
                        <img src="${avatarUrl}" alt="${char.name}" class="w-full h-full object-cover">
                    </div>
                    <div class="font-fredoka text-lg font-bold ${nameBg} text-white px-2 rounded-lg border-2 border-e1dark w-full text-center truncate">
                        ${char.name}
                    </div>
                `;

                // --- BACK (Eliminated) ---
                const back = document.createElement('div');
                back.className = `absolute w-full h-full backface-hidden rotate-y-180 bg-e1dark border-4 border-slate-600 rounded-xl shadow-none flex flex-col items-center justify-center p-4`;
                back.innerHTML = `
                    <div class="text-e1pink mb-2">
                        <i data-lucide="x-circle" class="w-12 h-12"></i>
                    </div>
                `;

                flipper.appendChild(front);
                flipper.appendChild(back);
                card.appendChild(flipper);
                grid.appendChild(card);
            });
            
            lucide.createIcons();
        }
        
        function renderPickGrid() {
            const grid = document.getElementById('pick-grid');
            grid.innerHTML = '';
            
            characters.forEach(char => {
                const btn = document.createElement('button');
                const avatarUrl = getAvatar(char.name);
                const nameColor = char.gender === 'm' ? 'text-e1blue' : 'text-e1pink';
                
                btn.className = "flex flex-col items-center p-4 bg-white border-4 border-e1dark rounded-xl shadow-neobrutal hover:bg-e1green/20 hover:scale-105 transition-all btn-press";
                btn.onclick = () => startGame(char.id);
                
                btn.innerHTML = `
                    <div class="w-20 h-20 mb-2 rounded-full border-2 border-e1dark bg-e1chalk overflow-hidden">
                        <img src="${avatarUrl}" class="w-full h-full object-cover">
                    </div>
                    <span class="font-fredoka font-bold text-lg ${nameColor}">${char.name}</span>
                `;
                
                grid.appendChild(btn);
            });
        }

        function updateStats() {
            const remaining = characters.length - eliminatedIds.size;
            document.getElementById('remaining-count').innerText = remaining;
        }

        // --- Interactions ---

        function toggleEliminate(id) {
            if (eliminatedIds.has(id)) {
                eliminatedIds.delete(id);
            } else {
                eliminatedIds.add(id);
            }
            renderGrid();
            updateStats();
        }

        // --- Modal Handling ---

        function toggleInstructions() {
             document.getElementById('instructions-modal').classList.remove('hidden');
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
        }
        
        function resetGame() {
            initGame();
        }

        // --- Start ---
        window.onload = function() {
            lucide.createIcons();
            initGame();
        };

    </script>
</body>
</html>