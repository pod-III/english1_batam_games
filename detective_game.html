<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detective Game Assets</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 40%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/><feColorMatrix in="colorNoise" type="saturate" values="0"/></filter></defs><rect width="100%" height="100%" filter="url(%23noiseFilter)" opacity="0.05"/></svg>');
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 
                0 0 5px rgba(139, 69, 19, 0.5),
                0 0 10px rgba(139, 69, 19, 0.3),
                0 0 15px rgba(139, 69, 19, 0.2),
                2px 2px 4px rgba(0,0,0,0.8);
            color: #d4af37;
            font-family: 'Georgia', serif;
            letter-spacing: 2px;
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #d4af37, transparent);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .case-selector {
            text-align: center;
            margin-bottom: 30px;
            background: 
                linear-gradient(145deg, rgba(20, 20, 20, 0.9) 0%, rgba(40, 40, 60, 0.8) 100%);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.6),
                inset 0 1px 0 rgba(255,255,255,0.1),
                0 0 20px rgba(139, 69, 19, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
        }

        .case-selector::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            background: linear-gradient(45deg, transparent, rgba(212, 175, 55, 0.3), transparent);
            border-radius: 20px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .case-selector:hover::before {
            opacity: 1;
        }

        .case-selector h2 {
            color: #d4af37;
            margin-bottom: 20px;
            text-shadow: 
                0 0 5px rgba(212, 175, 55, 0.5),
                2px 2px 4px rgba(0,0,0,0.8);
            font-family: 'Georgia', serif;
        }

        .case-dropdown {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            background: linear-gradient(145deg, rgba(20, 20, 20, 0.9), rgba(40, 40, 60, 0.8));
            color: #e0e0e0;
            font-size: 16px;
            margin: 10px;
            font-family: 'Georgia', serif;
            box-shadow: 
                inset 0 2px 4px rgba(0,0,0,0.5),
                0 0 10px rgba(212, 175, 55, 0.1);
            transition: all 0.3s ease;
        }

        .case-dropdown:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 
                inset 0 2px 4px rgba(0,0,0,0.5),
                0 0 15px rgba(212, 175, 55, 0.3);
        }

        .case-dropdown option {
            background: #1a1a2e;
            color: #e0e0e0;
        }

        .case-import {
            margin-top: 20px;
            padding: 20px;
            background: 
                linear-gradient(145deg, rgba(10, 10, 10, 0.8), rgba(30, 30, 50, 0.6));
            border-radius: 15px;
            border: 1px solid rgba(139, 69, 19, 0.3);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        }

        .file-input {
            margin: 10px;
            padding: 15px;
            background: linear-gradient(145deg, rgba(20, 20, 20, 0.9), rgba(40, 40, 60, 0.8));
            border: 2px dashed rgba(139, 69, 19, 0.5);
            border-radius: 12px;
            color: #e0e0e0;
            font-family: 'Georgia', serif;
            transition: all 0.3s ease;
        }

        .file-input:hover {
            border-color: #d4af37;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab {
            background: linear-gradient(145deg, rgba(20, 20, 20, 0.8), rgba(40, 40, 60, 0.6));
            border: 1px solid rgba(139, 69, 19, 0.3);
            padding: 12px 24px;
            color: #e0e0e0;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: bold;
            font-family: 'Georgia', serif;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .tab:hover {
            background: linear-gradient(145deg, rgba(30, 30, 30, 0.9), rgba(50, 50, 70, 0.7));
            transform: translateY(-3px);
            box-shadow: 
                0 6px 15px rgba(0,0,0,0.4),
                0 0 20px rgba(139, 69, 19, 0.2);
            border-color: rgba(212, 175, 55, 0.5);
        }

        .tab.active {
            background: linear-gradient(145deg, #8b4513, #d4af37);
            box-shadow: 
                0 4px 15px rgba(139, 69, 19, 0.6),
                inset 0 1px 0 rgba(255,255,255,0.2),
                0 0 25px rgba(212, 175, 55, 0.3);
            color: #000;
            border-color: #d4af37;
        }

        .content {
            display: none;
            background: 
                linear-gradient(145deg, rgba(15, 15, 15, 0.95) 0%, rgba(35, 35, 55, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 
                0 12px 40px rgba(0,0,0,0.7),
                inset 0 1px 0 rgba(255,255,255,0.1),
                0 0 30px rgba(139, 69, 19, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
        }

        .content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(139, 69, 19, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            border-radius: 20px;
            pointer-events: none;
            z-index: -1;
        }

        .content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .timer {
            text-align: center;
            margin-bottom: 30px;
        }

        .timer-display {
            font-size: 3em;
            font-weight: bold;
            color: #d4af37;
            text-shadow: 
                0 0 10px rgba(212, 175, 55, 0.6),
                0 0 20px rgba(212, 175, 55, 0.4),
                0 0 30px rgba(212, 175, 55, 0.2),
                2px 2px 4px rgba(0,0,0,0.8);
            margin-bottom: 10px;
            font-family: 'Georgia', serif;
            letter-spacing: 3px;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .btn-primary {
            background: linear-gradient(145deg, #2d5016, #4CAF50);
            color: white;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(145deg, #4CAF50, #66BB6A);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-danger {
            background: linear-gradient(145deg, #8d1e1e, #f44336);
            color: white;
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        .btn-danger:hover {
            background: linear-gradient(145deg, #f44336, #EF5350);
            box-shadow: 0 6px 15px rgba(244, 67, 54, 0.4);
        }

        .btn-warning {
            background: linear-gradient(145deg, #b8860b, #ff9800);
            color: white;
            border: 1px solid rgba(255, 152, 0, 0.3);
        }

        .btn-warning:hover {
            background: linear-gradient(145deg, #ff9800, #FFB74D);
            box-shadow: 0 6px 15px rgba(255, 152, 0, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .evidence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .evidence-card {
            background: 
                linear-gradient(145deg, rgba(25, 25, 25, 0.9), rgba(45, 45, 65, 0.8));
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 2px solid rgba(139, 69, 19, 0.2);
            box-shadow: 
                0 6px 15px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .evidence-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                transparent, rgba(212, 175, 55, 0.3), transparent, 
                rgba(139, 69, 19, 0.3), transparent);
            border-radius: 15px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .evidence-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 15px 30px rgba(0,0,0,0.6),
                0 0 25px rgba(139, 69, 19, 0.3);
            border-color: #d4af37;
        }

        .evidence-card:hover::before {
            opacity: 1;
        }

        .evidence-card.revealed {
            background: 
                linear-gradient(145deg, rgba(139, 69, 19, 0.2), rgba(212, 175, 55, 0.1));
            border-color: #d4af37;
            box-shadow: 
                0 8px 20px rgba(0,0,0,0.5),
                0 0 30px rgba(212, 175, 55, 0.2);
        }

        .evidence-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #d4af37;
            text-shadow: 
                0 0 5px rgba(212, 175, 55, 0.5),
                1px 1px 2px rgba(0,0,0,0.8);
            font-family: 'Georgia', serif;
        }

        .suspects-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .suspect-card {
            background: 
                linear-gradient(145deg, rgba(25, 25, 25, 0.9), rgba(45, 45, 65, 0.8));
            border-radius: 15px;
            padding: 25px;
            transition: all 0.4s ease;
            cursor: pointer;
            border: 2px solid rgba(139, 69, 19, 0.2);
            box-shadow: 
                0 8px 20px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .suspect-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, rgba(212, 175, 55, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .suspect-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 15px 35px rgba(0,0,0,0.6),
                0 0 25px rgba(139, 69, 19, 0.3);
            border-color: #d4af37;
        }

        .suspect-card:hover::before {
            left: 100%;
        }

        .suspect-name {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 8px;
            color: #d4af37;
            text-shadow: 
                0 0 5px rgba(212, 175, 55, 0.5),
                1px 1px 2px rgba(0,0,0,0.8);
            font-family: 'Georgia', serif;
        }

        .suspect-age {
            color: #b8860b;
            margin-bottom: 15px;
            font-style: italic;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .notes-section {
            background: 
                linear-gradient(145deg, rgba(15, 15, 15, 0.9), rgba(35, 35, 55, 0.8));
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border: 2px solid rgba(139, 69, 19, 0.3);
            box-shadow: 
                0 8px 20px rgba(0,0,0,0.4),
                inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .notes-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #d4af37;
            text-shadow: 
                0 0 5px rgba(212, 175, 55, 0.5),
                1px 1px 2px rgba(0,0,0,0.8);
            font-family: 'Georgia', serif;
        }

        .notes-textarea {
            width: 100%;
            height: 150px;
            background: 
                linear-gradient(145deg, rgba(10, 10, 10, 0.9), rgba(30, 30, 50, 0.8));
            border: 2px solid rgba(139, 69, 19, 0.3);
            border-radius: 12px;
            padding: 15px;
            color: #e0e0e0;
            font-size: 16px;
            resize: vertical;
            font-family: 'Georgia', serif;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        .notes-textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 
                inset 0 2px 4px rgba(0,0,0,0.5),
                0 0 15px rgba(212, 175, 55, 0.2);
        }

        .notes-textarea::placeholder {
            color: rgba(184, 134, 11, 0.6);
            font-style: italic;
        }radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }

        .notes-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #ff6b35;
        }

        .notes-textarea {
            width: 100%;
            height: 150px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            padding: 15px;
            color: white;
            font-size: 16px;
            resize: vertical;
        }

        .notes-textarea::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .accusation-section {
            background: 
                linear-gradient(145deg, rgba(139, 69, 19, 0.2), rgba(212, 175, 55, 0.1));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: 
                0 8px 20px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.1);
            position: relative;
        }

        .accusation-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at center, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
            border-radius: 15px;
            pointer-events: none;
        }

        .accusation-select {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid rgba(139, 69, 19, 0.3);
            background: linear-gradient(145deg, rgba(20, 20, 20, 0.9), rgba(40, 40, 60, 0.8));
            color: #e0e0e0;
            font-size: 16px;
            margin: 15px 0;
            font-family: 'Georgia', serif;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        .accusation-select:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 
                inset 0 2px 4px rgba(0,0,0,0.5),
                0 0 15px rgba(212, 175, 55, 0.3);
        }

        .accusation-select option {
            background: #1a1a2e;
            color: #e0e0e0;
        }

        .reveal-btn {
            background: 
                linear-gradient(145deg, #8b4513, #d4af37);
            color: #000;
            padding: 15px 30px;
            border: 2px solid rgba(212, 175, 55, 0.5);
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin: 15px 0;
            transition: all 0.4s ease;
            font-family: 'Georgia', serif;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            box-shadow: 
                0 6px 15px rgba(139, 69, 19, 0.4),
                inset 0 1px 0 rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }

        .reveal-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }

        .reveal-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 10px 25px rgba(139, 69, 19, 0.6),
                0 0 30px rgba(212, 175, 55, 0.4);
            background: linear-gradient(145deg, #d4af37, #ffd700);
        }

        .reveal-btn:hover::before {
            opacity: 1;
            left: -25%;
            top: -25%;
        }

        .solution {
            background: 
                linear-gradient(145deg, rgba(76,175,80,0.2), rgba(139, 69, 19, 0.1));
            border: 2px solid #4CAF50;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            display: none;
            box-shadow: 
                0 8px 20px rgba(76,175,80,0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .solution.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .time-warning {
            color: #d4af37;
            animation: pulse 1s infinite;
            text-shadow: 
                0 0 10px rgba(212, 175, 55, 0.8),
                0 0 20px rgba(212, 175, 55, 0.6);
        }

        .time-critical {
            color: #dc143c;
            animation: pulse 0.5s infinite;
            text-shadow: 
                0 0 15px rgba(220, 20, 60, 0.8),
                0 0 25px rgba(220, 20, 60, 0.6),
                0 0 35px rgba(220, 20, 60, 0.4);
        }

        @keyframes pulse {
            0% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.7;
                transform: scale(1.02);
            }
            100% { 
                opacity: 1;
                transform: scale(1);
            }
        }

        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: 
                linear-gradient(145deg, rgba(20, 20, 20, 0.9), rgba(40, 40, 60, 0.8));
            border: 2px solid rgba(139, 69, 19, 0.3);
            color: #d4af37;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .sound-toggle:hover {
            background: 
                linear-gradient(145deg, rgba(30, 30, 30, 0.9), rgba(50, 50, 70, 0.8));
            transform: scale(1.1);
            box-shadow: 
                0 6px 15px rgba(0,0,0,0.5),
                0 0 20px rgba(212, 175, 55, 0.2);
        }

        .case-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: 
                linear-gradient(145deg, rgba(25, 25, 25, 0.8), rgba(45, 45, 65, 0.6));
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(139, 69, 19, 0.3);
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 8px 15px rgba(0,0,0,0.4),
                0 0 15px rgba(139, 69, 19, 0.2);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #d4af37;
            text-shadow: 
                0 0 5px rgba(212, 175, 55, 0.5),
                1px 1px 2px rgba(0,0,0,0.8);
            font-family: 'Georgia', serif;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .timer-display {
                font-size: 2.5em;
            }
            
            .tabs {
                justify-content: stretch;
            }
            
            .tab {
                flex: 1;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <button class="sound-toggle" onclick="toggleSound()" id="soundToggle">🔊</button>
    
    <div class="container">
        <h1>🔍 Detective Game Command Center</h1>
        
        <!-- Case Selection -->
        <div class="case-selector">
            <h2>📋 Select Your Case</h2>
            <select class="case-dropdown" id="caseSelect" onchange="loadCase()">
                <option value="">Choose a case to investigate...</option>
                <option value="trophy">Case 1: The Missing Trophy</option>
                <option value="poison">Case 2: The Poisoned Diner</option>
                <option value="museum">Case 3: The Museum Heist</option>
                <option value="library">Case 4: The Library Mystery</option>
                <option value="custom">Import Custom Case</option>
            </select>
            
            <div class="case-import" id="customCaseImport" style="display: none;">
                <h3>📁 Import Custom Case</h3>
                <p>Upload a JSON file with your custom case data</p>
                <input type="file" id="caseFileInput" accept=".json" class="file-input" onchange="importCustomCase()">
                <div style="margin-top: 15px;">
                    <button class="btn btn-primary" onclick="showCaseTemplate()">📄 Show Template</button>
                </div>
            </div>

            <div class="case-stats" id="caseStats" style="display: none;">
                <div class="stat-card">
                    <div class="stat-number" id="evidenceCount">0</div>
                    <div>Evidence Items</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="suspectCount">0</div>
                    <div>Suspects</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="difficulty">-</div>
                    <div>Difficulty</div>
                </div>
            </div>
        </div>

        <div id="gameContent" style="display: none;">
            <div class="tabs">
                <button class="tab active" onclick="showTab('timer')">⏰ Timer</button>
                <button class="tab" onclick="showTab('case-brief')">📖 Case Brief</button>
                <button class="tab" onclick="showTab('evidence')">🔎 Evidence</button>
                <button class="tab" onclick="showTab('suspects')">👥 Suspects</button>
                <button class="tab" onclick="showTab('notes')">📝 Notes</button>
                <button class="tab" onclick="showTab('solution')">⚖️ Solution</button>
            </div>

            <!-- Timer Tab -->
            <div class="content active" id="timer">
                <div class="timer">
                    <div class="timer-display" id="timerDisplay">10:00</div>
                    <div class="timer-controls">
                        <button class="btn btn-primary" onclick="startTimer()">▶️ Start</button>
                        <button class="btn btn-warning" onclick="pauseTimer()">⏸️ Pause</button>
                        <button class="btn btn-danger" onclick="resetTimer()">🔄 Reset</button>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 30px;">
                    <h3>🏃‍♂️ The suspect is getting away!</h3>
                    <p>Work together to solve the case before time runs out!</p>
                </div>
            </div>

            <!-- Case Brief Tab -->
            <div class="content" id="case-brief">
                <h2 style="margin-bottom: 20px; color: #ff6b35;" id="caseTitle">Case Brief</h2>
                <div id="caseDescription" style="line-height: 1.6; font-size: 1.1em;">
                    Select a case to see the details...
                </div>
            </div>

            <!-- Evidence Tab -->
            <div class="content" id="evidence">
                <h2 style="margin-bottom: 20px;">🔍 Physical Evidence</h2>
                <div class="evidence-grid" id="evidenceGrid">
                    <!-- Evidence cards will be populated here -->
                </div>
            </div>

            <!-- Suspects Tab -->
            <div class="content" id="suspects">
                <h2 style="margin-bottom: 20px;">👥 Suspects</h2>
                <div class="suspects-container" id="suspectsContainer">
                    <!-- Suspect cards will be populated here -->
                </div>
            </div>

            <!-- Notes Tab -->
            <div class="content" id="notes">
                <div class="notes-section">
                    <div class="notes-title">🗒️ Detective Notes</div>
                    <textarea class="notes-textarea" id="notesArea" placeholder="Write down your theories, connections between clues, and suspect analysis here..."></textarea>
                    <button class="btn btn-primary" onclick="saveNotes()" style="margin-top: 10px;">💾 Save Notes</button>
                </div>
            </div>

            <!-- Solution Tab -->
            <div class="content" id="solution">
                <div class="accusation-section">
                    <h2>⚖️ Make Your Accusation</h2>
                    <p>Based on your investigation, who do you think is guilty?</p>
                    
                    <select class="accusation-select" id="suspectSelect">
                        <option value="">Choose your suspect...</option>
                    </select>
                    
                    <br>
                    <button class="reveal-btn" onclick="revealSolution()">🔍 Reveal Solution</button>
                    
                    <div class="solution" id="solutionReveal">
                        <h3>🎯 CASE SOLVED!</h3>
                        <div id="solutionContent"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let timeLeft = 600; // 10 minutes in seconds
        let timerInterval;
        let isRunning = false;
        let soundEnabled = true;
        let currentCase = null;

        // Case database
        const cases = {
            trophy: {
                title: "The Missing Championship Trophy",
                description: `The Westfield High School's golden basketball championship trophy has vanished from the locked trophy case in the main hallway. The theft occurred sometime between 3:30 PM (when classes ended) and 6:00 AM the next morning (when the janitor discovered it missing).

                The trophy case's glass wasn't broken, but the lock had been picked with professional precision. Security cameras were mysteriously turned off between 4:15 PM and 4:45 PM.`,
                difficulty: "Medium",
                evidence: [
                    {
                        title: "🧵 Blue Fabric",
                        description: "A small piece of blue fabric caught on the trophy case's metal edge. Click to examine closer...",
                        detail: "🧵 DETAILED ANALYSIS: High-quality fabric, consistent with security guard uniforms and school team clothing. Shows signs of being torn during hasty movement."
                    },
                    {
                        title: "👟 Muddy Footprints",
                        description: "Size 9 shoe prints leading from back entrance to trophy case. Click to analyze the pattern...",
                        detail: "👟 FORENSIC REPORT: Size 9 boots, heavy tread pattern consistent with security patrol boots. Mud suggests recent outdoor patrol activity."
                    },
                    {
                        title: "📎 Bent Paperclip",
                        description: "Found near the case, shows signs of being used as a lock-picking tool. Click to inspect...",
                        detail: "📎 TOOL ANALYSIS: Bent in specific pattern used for lock picking. Shows expertise - not amateur work. Tool discarded in haste."
                    },
                    {
                        title: "📋 Security Logbook",
                        description: "Shows missed 4:30 PM check. Click to read the full entries...",
                        detail: "📋 LOG ENTRIES: 4:00 PM - 'Starting rounds, all clear', 4:30 PM - NO ENTRY, 5:00 PM - 'Completed patrol, trophy case secure'. Missing entry is suspicious!"
                    }
                ],
                suspects: [
                    {
                        name: "Jake Morrison",
                        age: "17, Senior Student",
                        motive: "Star player, failing grades threaten scholarship",
                        opportunity: "Left school at 4:10 PM after basketball practice",
                        evidence: "Wears blue varsity jacket",
                        interview: "🎤 JAKE MORRISON INTERVIEW:\n\n\"I left right after practice at 4:10 PM, coach can verify that. Yeah, I'm stressed about grades, but I'd never steal our own trophy! That makes no sense. You can check the parking lot cameras - I drove straight home.\""
                    },
                    {
                        name: "Mrs. Carmen Rodriguez",
                        age: "45, Security Guard",
                        motive: "Recently complained about low salary",
                        opportunity: "Has access to all areas and security systems",
                        evidence: "Wears blue uniform, shift started 4:00 PM",
                        interview: "🎤 MRS. RODRIGUEZ INTERVIEW:\n\n\"I was doing my normal rounds... well, I might have been a few minutes late for the 4:30 check because I was dealing with some paperwork complaints. My salary situation is frustrating, but I'd never betray the school's trust!\""
                    },
                    {
                        name: "Tyler Chen",
                        age: "16, Junior Student",
                        motive: "Investigating athletics department corruption",
                        opportunity: "Stays after school until 5:00 PM",
                        evidence: "Blue debate team uniform",
                        interview: "🎤 TYLER CHEN INTERVIEW:\n\n\"I was in the journalism room until about 5:15 PM working on my corruption story. I've been investigating some irregularities in athletics funding, but stealing the trophy would destroy my credibility as a journalist!\""
                    },
                    {
                        name: "Ms. Patricia Wells",
                        age: "38, Rival School Coach",
                        motive: "Her team lost championship to Westfield",
                        opportunity: "Seen in parking lot at 4:20 PM",
                        evidence: "Has locksmith skills, wears blue coaching attire",
                        interview: "🎤 MS. WELLS INTERVIEW:\n\n\"Yes, I was here visiting my friend Sarah who teaches math. We met in the parking lot around 4:20 PM and went to grab coffee. Losing the championship hurt, but I have too much integrity to steal. Check with Sarah!\""
                    }
                ],
                solution: {
                    culprit: "Mrs. Carmen Rodriguez",
                    explanation: `<h4 style="color: #4CAF50;">🎉 CORRECT! You solved the case!</h4>
                    <p><strong>Mrs. Carmen Rodriguez</strong> is the thief!</p>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <h5>🔍 KEY EVIDENCE:</h5>
                        <ul style="margin-left: 20px;">
                            <li>✅ Only she could turn off security cameras without suspicion</li>
                            <li>✅ She deliberately skipped the 4:30 PM check to create her opportunity</li>
                            <li>✅ Blue fabric matches her security uniform</li>
                            <li>✅ Size 9 footprints match security patrol boots</li>
                            <li>✅ Professional lock-picking skills from security training</li>
                            <li>✅ Strong motive: revenge for low pay and recent complaints</li>
                        </ul>
                    </div>`
                }
            },
            
            poison: {
                title: "The Poisoned Diner",
                description: `Elena (24) fell unconscious in "The Rusty Spoon," a dimly lit, 24-hour diner known for its flickering neon sign and eerie silence after midnight. She was meeting friends for a late-night snack when she collapsed.

                The police found no signs of struggle, but the air smelled faintly of bitter almonds—a clue to poison.`,
                difficulty: "Easy",
                evidence: [
                    {
                        title: "🥤 Five Glasses of Lemonade",
                        description: "Four completely empty glasses with melted ice residue, one half-full with ice still floating. Click to analyze...",
                        detail: "🥤 ANALYSIS: The half-full glass suggests someone collapsed mid-drink. Ice cubes still floating indicates recent consumption before collapse."
                    },
                    {
                        title: "🥧 Half-eaten Pie",
                        description: "Slice of pie next to Elena's glass, only partially consumed. Click to examine...",
                        detail: "🥧 FORENSIC REPORT: Pie shows no signs of tampering. Elena stopped eating suddenly, consistent with rapid-acting poison in her drink."
                    },
                    {
                        title: "💀 Bitter Almond Scent",
                        description: "Faint smell of bitter almonds detected at the scene. Click to investigate...",
                        detail: "💀 CHEMICAL ANALYSIS: Bitter almond scent is characteristic of cyanide poisoning. Confirms poisoning as cause of collapse."
                    },
                    {
                        title: "🍽️ Clean Table Setup",
                        description: "No signs of struggle, everything neat except Elena's position. Click to examine...",
                        detail: "🍽️ SCENE ANALYSIS: Orderly scene suggests Elena trusted the poisoner. No defensive wounds or signs of forced consumption."
                    }
                ],
                suspects: [
                    {
                        name: "Maya",
                        age: "24, Elena's Best Friend",
                        motive: "Organized the meetup",
                        opportunity: "Present at the table, could have tampered with drinks",
                        evidence: "Close relationship with victim",
                        interview: "🎤 MAYA INTERVIEW:\n\n\"I can't believe this happened! I just wanted us all to get together like old times. Elena was so excited about her new job... I would never hurt her. We've been best friends since college!\""
                    },
                    {
                        name: "Leo",
                        age: "28, Night Shift Waiter",
                        motive: "Access to all food and drinks",
                        opportunity: "Served the drinks and pie to the table",
                        evidence: "Only one who handled all the drinks",
                        interview: "🎤 LEO INTERVIEW:\n\n\"I served them around midnight. They seemed happy, laughing about old memories. I brought five lemonades and Elena ordered the apple pie. I didn't notice anything unusual until the screaming started.\""
                    },
                    {
                        name: "Mr. Harlan",
                        age: "55, Diner Owner",
                        motive: "Recent complaints about food quality",
                        opportunity: "Was restocking supplies in the back",
                        evidence: "Access to storage areas and supplies",
                        interview: "🎤 MR. HARLAN INTERVIEW:\n\n\"I was in the back dealing with inventory. Business has been tough lately with all these online reviews complaining about the food. But I would never poison a customer! That would ruin me completely.\""
                    }
                ],
                solution: {
                    culprit: "Leo",
                    explanation: `<h4 style="color: #4CAF50;">🎉 CORRECT! You solved the case!</h4>
                    <p><strong>Leo the waiter</strong> is the poisoner!</p>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <h5>🔍 KEY EVIDENCE:</h5>
                        <ul style="margin-left: 20px;">
                            <li>✅ Only Leo handled all the drinks before serving</li>
                            <li>✅ He could target Elena's specific glass</li>
                            <li>✅ Half-full glass shows Elena collapsed mid-drink</li>
                            <li>✅ Other friends finished their drinks safely</li>
                            <li>✅ Perfect opportunity to add poison while preparing drinks</li>
                        </ul>
                    </div>`
                }
            },

            museum: {
                title: "The Museum Heist",
                description: `The priceless "Midnight Sapphire" necklace has been stolen from the Metropolitan Museum during their exclusive evening gala. The theft occurred between 8:00 PM and 9:30 PM when the power mysteriously went out for exactly 3 minutes.

                The display case was opened with the correct security code, and no alarms were triggered during the blackout.`,
                difficulty: "Hard",
                evidence: [
                    {
                        title: "💎 Empty Display Case",
                        description: "Case opened cleanly with security code, no damage to lock mechanism. Click to examine...",
                        detail: "💎 SECURITY ANALYSIS: Lock mechanism shows no signs of forcing. Code was entered correctly, suggesting inside knowledge of the combination."
                    },
                    {
                        title: "⚡ Power Grid Report",
                        description: "Power outage lasted exactly 3 minutes, 14 seconds. Click to analyze...",
                        detail: "⚡ ELECTRICAL ANALYSIS: Outage was localized to museum only. Too precise to be accidental - likely deliberate sabotage from someone with electrical knowledge."
                    },
                    {
                        title: "👠 High Heel Print",
                        description: "Single high heel print found near the display case. Click to examine...",
                        detail: "👠 FOOTPRINT ANALYSIS: Designer shoe, size 7, distinctive pattern suggests expensive footwear. Print shows someone moved quickly toward the case."
                    },
                    {
                        title: "🎭 Guest List",
                        description: "127 guests attended the gala, all accounted for during headcount. Click to review...",
                        detail: "🎭 ATTENDANCE RECORD: All guests present when lights came back on. Theft must have been committed by someone who remained at the gala."
                    }
                ],
                suspects: [
                    {
                        name: "Dr. Victoria Sterling",
                        age: "45, Museum Director",
                        motive: "Massive gambling debts, needs money desperately",
                        opportunity: "Knows all security codes and procedures",
                        evidence: "Wears designer heels, has electrical background",
                        interview: "🎤 DR. STERLING INTERVIEW:\n\n\"This is devastating for the museum's reputation! I've worked here for 15 years building our collection. Yes, I've had some personal financial struggles, but I would never betray the trust placed in me.\""
                    },
                    {
                        name: "Marcus Chen",
                        age: "32, Security Chief",
                        motive: "Recently passed over for promotion, bitter about treatment",
                        opportunity: "Controls all security systems and has override codes",
                        evidence: "Technical knowledge to cause power outage",
                        interview: "🎤 MARCUS CHEN INTERVIEW:\n\n\"I've been protecting this place for 8 years, and they promote some outsider instead of me? But I'm not a thief. I was monitoring the security room when the power went out - check the logs.\""
                    },
                    {
                        name: "Isabella Rodriguez",
                        age: "38, Wealthy Collector",
                        motive: "Obsessed with acquiring rare sapphires",
                        opportunity: "VIP guest with access to restricted areas",
                        evidence: "Wears expensive designer shoes, known jewel thief connections",
                        interview: "🎤 ISABELLA RODRIGUEZ INTERVIEW:\n\n\"The Midnight Sapphire is exquisite, but I collect legally. I may be competitive in auctions, but I'm not a common thief. My reputation in the art world is impeccable.\""
                    },
                    {
                        name: "James Mitchell",
                        age: "29, Electrical Contractor",
                        motive: "Museum owes him $50,000 for electrical work",
                        opportunity: "Working on museum's electrical system, knows the building",
                        evidence: "Has tools and knowledge to cause targeted blackout",
                        interview: "🎤 JAMES MITCHELL INTERVIEW:\n\n\"They've owed me money for months! I've been patient, but my business is suffering. I was checking the electrical systems in the basement when the power went out. Maybe it's karma.\""
                    }
                ],
                solution: {
                    culprit: "Dr. Victoria Sterling",
                    explanation: `<h4 style="color: #4CAF50;">🎉 CORRECT! You solved the case!</h4>
                    <p><strong>Dr. Victoria Sterling</strong> is the thief!</p>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <h5>🔍 KEY EVIDENCE:</h5>
                        <ul style="margin-left: 20px;">
                            <li>✅ Only she knew the exact security code</li>
                            <li>✅ Designer heel print matches her footwear</li>
                            <li>✅ Electrical background allowed her to cause precise blackout</li>
                            <li>✅ Gambling debts provide strong financial motive</li>
                            <li>✅ Position as director gave her unrestricted access</li>
                        </ul>
                    </div>`
                }
            },

            library: {
                title: "The Library Mystery",
                description: `The rare first edition of "Alice in Wonderland" worth $75,000 has vanished from the university library's special collections vault. The theft was discovered when Professor Williams came to examine it for her research at 9:00 AM.

                The vault was locked, but the book's protective case was found open and empty. No signs of forced entry were detected.`,
                difficulty: "Medium",
                evidence: [
                    {
                        title: "🗝️ Vault Access Log",
                        description: "Digital log shows three entries yesterday after hours. Click to examine...",
                        detail: "🗝️ ACCESS ANALYSIS: 6:45 PM - Dr. Harper (Librarian), 7:20 PM - Sarah Kim (Graduate Student), 8:15 PM - Prof. Davis (English Dept). All have legitimate access."
                    },
                    {
                        title: "🧤 Cotton Gloves",
                        description: "Pair of white cotton conservation gloves found near the empty case. Click to analyze...",
                        detail: "🧤 FIBER ANALYSIS: Standard archival gloves, but slightly damp with nervous perspiration. Shows someone was anxious while handling the book."
                    },
                    {
                        title: "📚 Displaced Books",
                        description: "Several books in the medieval section were moved and not returned properly. Click to investigate...",
                        detail: "📚 SHELVING ANALYSIS: Books moved to create hiding spaces. Someone was looking for a temporary concealment spot or was unfamiliar with proper procedures."
                    },
                    {
                        title: "☕ Coffee Stain",
                        description: "Fresh coffee stain on the reading table near the vault. Click to examine...",
                        detail: "☕ STAIN ANALYSIS: High-end coffee blend, still damp when discovered. Someone was working late with expensive coffee - suggests academic or professional background."
                    }
                ],
                suspects: [
                    {
                        name: "Dr. Margaret Harper",
                        age: "52, Head Librarian",
                        motive: "Facing budget cuts and potential job loss",
                        opportunity: "Has master key access to all collections",
                        evidence: "Last to access vault, drinks expensive coffee",
                        interview: "🎤 DR. HARPER INTERVIEW:\n\n\"I've dedicated 20 years to preserving these collections. Yes, I accessed the vault to do inventory before the budget meeting, but everything was secure when I left. The university's cuts are destroying our program.\""
                    },
                    {
                        name: "Sarah Kim",
                        age: "26, Graduate Student",
                        motive: "Massive student debt, desperate for money",
                        opportunity: "Research access to special collections",
                        evidence: "Nervous personality, accessed vault yesterday",
                        interview: "🎤 SARAH KIM INTERVIEW:\n\n\"I'm drowning in student loans, but I'd never steal from the library! I was researching Victorian literature. I wore gloves like always and put everything back properly. This place is like a sanctuary to me.\""
                    },
                    {
                        name: "Professor Robert Davis",
                        age: "58, English Literature",
                        motive: "Collector of rare books, obsessed with Carroll's works",
                        opportunity: "After-hours access for research",
                        evidence: "Known Carroll enthusiast, last person in vault",
                        interview: "🎤 PROF. DAVIS INTERVIEW:\n\n\"Lewis Carroll is my life's work! But I would never steal. I have legitimate access for my research. I may have stayed late working, but I always follow protocols. Check my publication record - I'm not a thief.\""
                    }
                ],
                solution: {
                    culprit: "Sarah Kim",
                    explanation: `<h4 style="color: #4CAF50;">🎉 CORRECT! You solved the case!</h4>
                    <p><strong>Sarah Kim</strong> is the thief!</p>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <h5>🔍 KEY EVIDENCE:</h5>
                        <ul style="margin-left: 20px;">
                            <li>✅ Nervous perspiration on gloves shows anxiety</li>
                            <li>✅ Displaced books suggest unfamiliarity with proper procedures</li>
                            <li>✅ Massive student debt provides strong financial motive</li>
                            <li>✅ Graduate students often work under pressure and make poor decisions</li>
                            <li>✅ Her emotional attachment to the library was overcompensation</li>
                        </ul>
                    </div>`
                }
            }
        };

        // Tab functionality
        function showTab(tabName) {
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Case loading functionality
        function loadCase() {
            const selectedCase = document.getElementById('caseSelect').value;
            const gameContent = document.getElementById('gameContent');
            const caseStats = document.getElementById('caseStats');
            const customImport = document.getElementById('customCaseImport');

            if (selectedCase === 'custom') {
                customImport.style.display = 'block';
                gameContent.style.display = 'none';
                caseStats.style.display = 'none';
                return;
            } else {
                customImport.style.display = 'none';
            }

            if (selectedCase && cases[selectedCase]) {
                currentCase = cases[selectedCase];
                populateCase(currentCase);
                gameContent.style.display = 'block';
                caseStats.style.display = 'grid';
                
                // Update stats
                document.getElementById('evidenceCount').textContent = currentCase.evidence.length;
                document.getElementById('suspectCount').textContent = currentCase.suspects.length;
                document.getElementById('difficulty').textContent = currentCase.difficulty;
                
                resetGame();
            } else {
                gameContent.style.display = 'none';
                caseStats.style.display = 'none';
            }
        }

        function populateCase(caseData) {
            // Update case brief
            document.getElementById('caseTitle').textContent = caseData.title;
            document.getElementById('caseDescription').innerHTML = caseData.description.replace(/\n\n/g, '</p><p>').replace(/^/, '<p>').replace(/$/, '</p>');

            // Populate evidence
            const evidenceGrid = document.getElementById('evidenceGrid');
            evidenceGrid.innerHTML = '';
            caseData.evidence.forEach((evidence, index) => {
                const evidenceCard = document.createElement('div');
                evidenceCard.className = 'evidence-card';
                evidenceCard.onclick = () => revealEvidence(evidenceCard, evidence);
                evidenceCard.innerHTML = `
                    <div class="evidence-title">${evidence.title}</div>
                    <div class="evidence-description">${evidence.description}</div>
                `;
                evidenceGrid.appendChild(evidenceCard);
            });

            // Populate suspects
            const suspectsContainer = document.getElementById('suspectsContainer');
            const suspectSelect = document.getElementById('suspectSelect');
            suspectsContainer.innerHTML = '';
            suspectSelect.innerHTML = '<option value="">Choose your suspect...</option>';
            
            caseData.suspects.forEach((suspect, index) => {
                // Create suspect card
                const suspectCard = document.createElement('div');
                suspectCard.className = 'suspect-card';
                suspectCard.onclick = () => interviewSuspect(suspect);
                suspectCard.innerHTML = `
                    <div class="suspect-name">${suspect.name}</div>
                    <div class="suspect-age">${suspect.age}</div>
                    <p><strong>Motive:</strong> ${suspect.motive}</p>
                    <p><strong>Opportunity:</strong> ${suspect.opportunity}</p>
                    <p><strong>Evidence:</strong> ${suspect.evidence}</p>
                    <p style="margin-top: 10px; color: #ff6b35;">Click to interview 🎤</p>
                `;
                suspectsContainer.appendChild(suspectCard);

                // Add to dropdown
                const option = document.createElement('option');
                option.value = suspect.name;
                option.textContent = suspect.name;
                suspectSelect.appendChild(option);
            });
        }

        // Custom case import
        function importCustomCase() {
            const fileInput = document.getElementById('caseFileInput');
            const file = fileInput.files[0];
            
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const customCase = JSON.parse(e.target.result);
                    
                    // Validate case structure
                    if (!customCase.title || !customCase.description || !customCase.evidence || !customCase.suspects) {
                        alert('Invalid case file format. Please check the template.');
                        return;
                    }

                    currentCase = customCase;
                    populateCase(currentCase);
                    document.getElementById('gameContent').style.display = 'block';
                    document.getElementById('caseStats').style.display = 'grid';
                    
                    // Update stats
                    document.getElementById('evidenceCount').textContent = currentCase.evidence.length;
                    document.getElementById('suspectCount').textContent = currentCase.suspects.length;
                    document.getElementById('difficulty').textContent = customCase.difficulty || 'Custom';
                    
                    resetGame();
                    alert('Custom case loaded successfully!');
                    
                } catch (error) {
                    alert('Error reading case file: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        function showCaseTemplate() {
            const template = {
                title: "Case Title Here",
                description: "Detailed description of what happened...",
                difficulty: "Easy/Medium/Hard",
                evidence: [
                    {
                        title: "🔍 Evidence Name",
                        description: "Brief description visible initially...",
                        detail: "🔍 DETAILED ANALYSIS: Full forensic details revealed when clicked..."
                    }
                ],
                suspects: [
                    {
                        name: "Suspect Name",
                        age: "Age, Role",
                        motive: "Why they might have done it",
                        opportunity: "When/how they could have done it",
                        evidence: "Physical evidence connecting them",
                        interview: "🎤 SUSPECT INTERVIEW:\\n\\n\"What they say when questioned...\""
                    }
                ],
                solution: {
                    culprit: "Guilty Party Name",
                    explanation: "HTML formatted explanation of why they're guilty..."
                }
            };

            const templateWindow = window.open('', '_blank');
            templateWindow.document.write(`
                <html>
                    <head><title>Case Template</title></head>
                    <body style="font-family: Arial; padding: 20px; background: #f5f5f5;">
                        <h1>Detective Case Template</h1>
                        <p>Copy this JSON template and customize it for your case:</p>
                        <pre style="background: white; padding: 20px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(template, null, 2)}</pre>
                        <p>Save as a .json file and import it into the game!</p>
                    </body>
                </html>
            `);
        }

        // Game reset
        function resetGame() {
            // Reset timer
            timeLeft = 600;
            updateTimerDisplay();
            if (timerInterval) {
                clearInterval(timerInterval);
                isRunning = false;
            }

            // Reset evidence cards
            document.querySelectorAll('.evidence-card').forEach(card => {
                card.classList.remove('revealed');
            });

            // Reset solution
            document.getElementById('solutionReveal').classList.remove('show');
            document.getElementById('suspectSelect').value = '';

            // Clear notes
            document.getElementById('notesArea').value = '';
        }

        // Timer functionality
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            const timerElement = document.getElementById('timerDisplay');
            
            timerElement.textContent = display;
            
            timerElement.className = 'timer-display';
            if (timeLeft <= 60) {
                timerElement.classList.add('time-critical');
                if (soundEnabled && timeLeft % 10 === 0 && timeLeft > 0) {
                    playWarningSound();
                }
            } else if (timeLeft <= 180) {
                timerElement.classList.add('time-warning');
            }
        }

        function startTimer() {
            if (!currentCase) {
                alert('Please select a case first!');
                return;
            }

            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        isRunning = false;
                        if (soundEnabled) playTimeUpSound();
                        alert('⏰ Time\'s up! The suspect got away! Reveal the solution to see if you were on the right track.');
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                isRunning = false;
            }
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            timeLeft = 600;
            updateTimerDisplay();
        }

        // Evidence functionality
        function revealEvidence(card, evidence) {
            if (card.classList.contains('revealed')) return;
            
            card.classList.add('revealed');
            card.querySelector('.evidence-description').innerHTML = evidence.detail;
            
            if (soundEnabled) playEvidenceSound();
        }

        // Interview functionality
        function interviewSuspect(suspect) {
            alert(suspect.interview);
            if (soundEnabled) playInterviewSound();
        }

        // Solution functionality
        function revealSolution() {
            if (!currentCase) {
                alert('Please select a case first!');
                return;
            }

            const selectedSuspect = document.getElementById('suspectSelect').value;
            const solutionDiv = document.getElementById('solutionReveal');
            const contentDiv = document.getElementById('solutionContent');
            
            if (!selectedSuspect) {
                alert('Please select a suspect first!');
                return;
            }

            let result = '';
            
            if (selectedSuspect === currentCase.solution.culprit) {
                result = currentCase.solution.explanation;
            } else {
                result = `
                    <h4 style="color: #ff6b35;">❌ Not quite right, but good try!</h4>
                    <p>The real culprit was <strong>${currentCase.solution.culprit}</strong></p>
                    <p style="margin-top: 15px;">Your choice of <strong>${selectedSuspect}</strong> was logical based on some evidence, but check the key clues that point to the real perpetrator.</p>
                `;
            }
            
            contentDiv.innerHTML = result;
            solutionDiv.classList.add('show');
            
            if (soundEnabled) playSolutionSound();
        }

        // Notes functionality
        function saveNotes() {
            const notes = document.getElementById('notesArea').value;
            alert('📝 Notes saved! (In classroom setting, teacher can collect these for review)');
            if (soundEnabled) playSuccessSound();
        }

        // Sound functionality
        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('soundToggle').textContent = soundEnabled ? '🔊' : '🔇';
        }

        function playSound(frequency, duration, type = 'sine') {
            if (!soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function playEvidenceSound() { playSound(800, 0.2); }
        function playInterviewSound() { playSound(600, 0.3); }
        function playWarningSound() { 
            playSound(1000, 0.1);
            setTimeout(() => playSound(800, 0.1), 100);
        }
        function playTimeUpSound() { playSound(400, 1, 'sawtooth'); }
        function playSolutionSound() {
            playSound(523, 0.2);
            setTimeout(() => playSound(659, 0.2), 200);
            setTimeout(() => playSound(784, 0.4), 400);
        }
        function playSuccessSound() { playSound(659, 0.15); }

        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            updateTimerDisplay();
        });
    </script>
</body>
</html>