<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English 1 Batam Game Hub</title>
  <!-- Tailwind CSS CDN for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts for a more fitting theme -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <!-- Lucide icons for the theme toggle and close button -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <!-- Custom CSS for dark mode transition and custom fonts -->
  <style>
    :root {
      color-scheme: light;
    }
    html.dark {
      color-scheme: dark;
    }
    body {
      transition: background-color 0.3s, color 0.3s;
    }
    iframe {
      border: none;
    }
    /* Define custom font classes for Tailwind */
    .font-heading {
      font-family: 'Bebas Neue', sans-serif;
    }
    .font-body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-50 font-body">

  <!-- Header section with title and theme toggle -->
  <header class="p-4 md:p-6 bg-gray-900 dark:bg-gray-950 shadow-sm sticky top-0 z-10 flex justify-between items-center">
    <h1 class="text-2xl md:text-3xl font-bold font-heading text-white">
      English 1 Batam Game Hub
    </h1>
    <button id="theme-toggle" class="p-2 rounded-full text-gray-300 hover:bg-gray-700 transition-colors" aria-label="Toggle dark mode">
      <!-- Sun icon for light mode -->
      <div id="sun-icon" class="lucide lucide-sun" style="display: none;">
        <circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="M4.93 4.93l1.41 1.41"></path><path d="M17.66 17.66l1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="M6.34 17.66l-1.41 1.41"></path><path d="M19.07 4.93l-1.41 1.41"></path>
      </div>
      <!-- Moon icon for dark mode -->
      <div id="moon-icon" class="lucide lucide-moon" style="display: block;">
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
      </div>
    </button>
  </header>

  <!-- Main content area with the game grid -->
  <main class="p-4 md:p-6 lg:p-8 flex flex-col items-center">
    <!-- Tools Section -->
    <section class="max-w-7xl w-full mb-8">
      <h2 class="text-2xl font-bold font-heading mb-4 text-gray-800 dark:text-gray-200">Tools</h2>
      <div id="tools-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- Tool cards will be inserted here by JavaScript -->
      </div>
    </section>
    
    <!-- Games Section -->
    <section class="max-w-7xl w-full">
      <h2 class="text-2xl font-bold font-heading mb-4 text-gray-800 dark:text-gray-200">Games</h2>
      <div id="games-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- Game cards will be inserted here by JavaScript -->
      </div>
    </section>
  </main>

  <!-- Game Modal -->
  <div id="game-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-75 backdrop-blur-sm">
    <div class="relative w-full h-full max-w-7xl max-h-[95vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden">
      <div class="flex justify-between items-center p-4 bg-gray-100 dark:bg-gray-800">
        <h2 id="modal-title" class="text-xl font-bold font-heading truncate"></h2>
        <div class="flex items-center space-x-2">
          <!-- Updated fullscreen button with text for better visibility -->
          <button id="modal-fullscreen-btn" class="flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-full font-semibold hover:bg-blue-600 transition-colors" aria-label="Toggle fullscreen">
            <div class="lucide lucide-maximize-2">
              <polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><path d="M21 3 14 10"></path><path d="M3 21 10 14"></path>
            </div>
            <span>Fullscreen</span>
          </button>
          <!-- A more descriptive "Exit Game" button -->
          <button id="modal-exit-text-btn" class="px-4 py-2 bg-red-500 text-white rounded-full font-semibold hover:bg-red-600 transition-colors" aria-label="Exit Game">
            Exit Game
          </button>
          <!-- The original close button icon -->
          <button id="modal-close-btn" class="p-2 rounded-full text-gray-500 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 transition-colors" aria-label="Close game">
            <div class="lucide lucide-x">
              <path d="M18 6 6 18"></path><path d="m6 6 12 12"></path>
            </div>
          </button>
        </div>
      </div>
      <!-- The iframe to embed the game -->
      <iframe id="game-iframe" src="" class="w-full h-full" allow="fullscreen"></iframe>
    </div>
  </div>

  <script>
    // Data for the games and tools, now with clear categorization
    // Color Palette Reference (using Tailwind classes for placeholders):
    // Pink: FF69B4 -> F472B6 (pink-400/500)
    // Blue: 00739B -> 3B82F6 (blue-500)
    // Green: 40C1A8 -> 10B981 (green-500)
    // Orange: FF8C00 -> F97316 (orange-500)
    const games = [
      // --- Existing Items (Updated Placeholder Colors for consistency) ---
      {
        id: 1,
        title: 'Catickory',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/F472B6/ffffff.png?text=Catickory', // Pink
        url: 'https://catickory.com/',
      },
      {
        id: 2,
        title: 'Detective Game',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/3B82F6/ffffff.png?text=Detective+Game', // Blue
        url: './detective-game/index.html',
      },
      {
        id: 3,
        title: 'Spin the Wheel',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/10B981/ffffff.png?text=Spin+the+Wheel', // Green
        url: './spin-the-wheel/index.html',
      },
      {
        id: 4,
        title: 'Reveal the Picture',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/F97316/ffffff.png?text=Reveal+Picture', // Orange
        url: './reveal-picture-game/index.html',
      },
      {
        id: 5,
        title: 'Team Picker',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/F472B6/ffffff.png?text=Team+Picker', // Pink
        url: './team-picker/index.html',
      },
      {
        id: 6,
        title: 'Timer',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/3B82F6/ffffff.png?text=Timer', // Blue
        url: './timer/index.html',
      },
      {
        id: 7,
        title: 'Hangman',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/10B981/ffffff.png?text=Hangman', // Green
        url: './hangman/index.html',
      },
      {
        id: 8,
        title: 'Unscramble',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/F97316/ffffff.png?text=Unscramble', // Orange
        url: './unscramble/index.html',
      },
      {
        id: 9,
        title: 'Word Flashcard',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/F472B6/ffffff.png?text=Word+Flashcard', // Pink
        url: './word-flashcard/index.html',
      },
      {
        id: 10,
        title: 'Sentence Unscrambler',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/3B82F6/ffffff.png?text=Sentence+Unscrambler', // Blue
        url: './sentence-unscrambler/index.html',
      },
      {
        id: 11,
        title: 'Story Order',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/10B981/ffffff.png?text=Story+Order', // Green
        url: './story-ordering/index.html',
      },
      {
        id: 12,
        title: 'Word Scrambler',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/F97316/ffffff.png?text=Word+Scrambler', // Orange
        url: './word-scrambler/index.html',
      },
      {
        id: 13,
        title: 'Presentation Maker',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/F472B6/ffffff.png?text=Presentation+Maker', // Pink
        url: './presentation-maker/index.html',
      },
      
      // --- NEW ITEMS ADDED HERE ---
      {
        id: 14,
        title: 'Card Match',
        category: 'game',
        thumbnail: 'https://placehold.co/600x400/3B82F6/ffffff.png?text=Card+Match', // Blue
        url: './card-match/index.html',
      },
      {
        id: 15,
        title: 'Random Word Display',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/10B981/ffffff.png?text=Random+Word+Display', // Green
        url: './random-word-display/index.html',
      },
      {
        id: 16,
        title: 'Task Assigner',
        category: 'tool',
        thumbnail: 'https://placehold.co/600x400/F97316/ffffff.png?text=Task+Assigner', // Orange
        url: './task-assigner/index.html',
      },
    ];

    // Get DOM elements
    const body = document.body;
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    const toolsGrid = document.getElementById('tools-grid');
    const gamesGrid = document.getElementById('games-grid');
    const gameModal = document.getElementById('game-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalCloseBtn = document.getElementById('modal-close-btn');
    const modalExitTextBtn = document.getElementById('modal-exit-text-btn');
    const gameIframe = document.getElementById('game-iframe');
    // Get the new fullscreen button
    const fullscreenBtn = document.getElementById('modal-fullscreen-btn');

    // State for dark mode
    let isDarkMode = true;

    // Function to toggle dark mode
    const toggleDarkMode = () => {
      isDarkMode = !isDarkMode;
      if (isDarkMode) {
        body.classList.add('dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        body.classList.remove('dark');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    };

    // Function to create a game card element
    const createGameCard = (game) => {
      const card = document.createElement('div');
      card.dataset.id = game.id;
      card.className = 'bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:scale-105';
      card.innerHTML = `
        <img
          src="${game.thumbnail}"
          alt="${game.title}"
          class="w-full h-40 object-cover"
          loading="lazy"
        />
        <div class="p-4">
          <h3 class="text-lg font-semibold font-heading truncate">${game.title}</h3>
        </div>
      `;
      
      return card;
    };

    // Function to render all games
    const renderGames = () => {
      // Clear previous content from both grids
      toolsGrid.innerHTML = '';
      gamesGrid.innerHTML = '';
      
      games.forEach(game => {
        const card = createGameCard(game);
        if (game.category === 'tool') {
          toolsGrid.appendChild(card);
        } else {
          gamesGrid.appendChild(card);
        }
      });
    };

    // Function to open the game modal
    const openGameModal = (game) => {
      modalTitle.textContent = game.title;
      gameIframe.src = game.url;
      gameModal.classList.remove('hidden');
    };

    // Function to close the game modal and exit fullscreen if active
    const closeGameModal = () => {
      // Exit fullscreen if active
      if (document.fullscreenElement) {
        document.exitFullscreen();
      }
      gameModal.classList.add('hidden');
      gameIframe.src = ''; // Clear the iframe to stop the game
    };
    
    // New function to toggle fullscreen for the iframe
    const toggleFullscreen = () => {
      if (!document.fullscreenElement) {
        gameIframe.requestFullscreen().catch(err => {
          // Display a message if fullscreen fails (e.g., due to user gestures)
          console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
        });
      } else {
        document.exitFullscreen();
      }
    };

    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      renderGames();
      
      // Ensure initial theme state is correct
      if (isDarkMode) {
        body.classList.add('dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        body.classList.remove('dark');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    });

    themeToggle.addEventListener('click', toggleDarkMode);

    // Event listener on the main content area to handle clicks for both grids
    document.querySelector('main').addEventListener('click', (event) => {
      const card = event.target.closest('[data-id]');
      if (!card) return;
      
      const gameId = card.dataset.id;
      const selectedGame = games.find(game => game.id == gameId);
      if (selectedGame) {
        openGameModal(selectedGame);
      }
    });

    modalCloseBtn.addEventListener('click', closeGameModal);
    modalExitTextBtn.addEventListener('click', closeGameModal);
    // Add the new event listener for the fullscreen button
    fullscreenBtn.addEventListener('click', toggleFullscreen);

  </script>

</body>
</html>
