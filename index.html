<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Game Hub</title>
  <!-- Tailwind CSS CDN for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts for a more fitting theme -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <!-- Lucide icons for the theme toggle and close button -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <!-- Custom CSS for dark mode transition and custom fonts -->
  <style>
    :root {
      color-scheme: light;
    }
    html.dark {
      color-scheme: dark;
    }
    body {
      transition: background-color 0.3s, color 0.3s;
    }
    iframe {
      border: none;
    }
    /* Define custom font classes for Tailwind */
    .font-heading {
      font-family: 'Bebas Neue', sans-serif;
    }
    .font-body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-50 font-body">

  <!-- Header section with title and theme toggle -->
  <header class="p-4 md:p-6 bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-10 flex justify-between items-center">
    <h1 class="text-2xl md:text-3xl font-bold font-heading text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600">
      Student Game Hub
    </h1>
    <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors" aria-label="Toggle dark mode">
      <div id="sun-icon" class="lucide lucide-sun" style="display: none;">
        <circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="M4.93 4.93l1.41 1.41"></path><path d="M17.66 17.66l1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="M6.34 17.66l-1.41 1.41"></path><path d="M19.07 4.93l-1.41 1.41"></path>
      </div>
      <div id="moon-icon" class="lucide lucide-moon" style="display: block;">
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
      </div>
    </button>
  </header>

  <!-- Main content area with the game grid -->
  <main class="p-4 md:p-6 lg:p-8 flex justify-center">
    <div id="game-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 max-w-7xl w-full">
      <!-- Game cards will be inserted here by JavaScript -->
    </div>
  </main>

  <!-- Game Modal -->
  <div id="game-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-75 backdrop-blur-sm">
    <div class="relative w-full h-full max-w-7xl max-h-[95vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden">
      <div class="flex justify-between items-center p-4 bg-gray-100 dark:bg-gray-800">
        <h2 id="modal-title" class="text-xl font-bold font-heading truncate"></h2>
        <div class="flex items-center space-x-2">
          <!-- A new, more descriptive "Exit Game" button -->
          <button id="modal-exit-text-btn" class="px-4 py-2 bg-red-500 text-white rounded-full font-semibold hover:bg-red-600 transition-colors" aria-label="Exit Game">
            Exit Game
          </button>
          <!-- The original close button icon -->
          <button id="modal-close-btn" class="p-2 rounded-full text-gray-500 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 transition-colors" aria-label="Close game">
            <div class="lucide lucide-x">
              <path d="M18 6 6 18"></path><path d="m6 6 12 12"></path>
            </div>
          </button>
        </div>
      </div>
      <!-- The iframe to embed the game -->
      <iframe id="game-iframe" src="" class="w-full h-full" allow="fullscreen"></iframe>
    </div>
  </div>

  <script>
    // Data for the default games, now with actual images instead of text placeholders
    const games = [
      {
        id: 1,
        title: 'Catickory',
        thumbnail: 'https://placehold.co/600x400/007bff/ffffff.png?text=Catickory',
        url: 'https://catickory.com/',
      },
      {
        id: 2,
        title: 'Detective Game',
        thumbnail: 'https://placehold.co/600x400/1a202c/e2e8f0.png?text=Detective+Game',
        url: './detective-game/index.html',
      },
      {
        id: 3,
        title: 'Spin the Wheel',
        thumbnail: 'https://placehold.co/600x400/FACC15/78350F.png?text=Spin+the+Wheel',
        url: './spin-the-wheel/index.html',
      },
      {
        id: 4,
        title: 'Reveal the Picture',
        thumbnail: 'https://placehold.co/600x400/94A3B8/ffffff.png?text=Reveal+Picture',
        url: './reveal-picture-game/index.html',
      },
    ];

    // Get DOM elements
    const body = document.body;
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    const gameGrid = document.getElementById('game-grid');
    const gameModal = document.getElementById('game-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalCloseBtn = document.getElementById('modal-close-btn');
    const modalExitTextBtn = document.getElementById('modal-exit-text-btn');
    const gameIframe = document.getElementById('game-iframe');

    // State for dark mode
    let isDarkMode = true;

    // Function to toggle dark mode
    const toggleDarkMode = () => {
      isDarkMode = !isDarkMode;
      if (isDarkMode) {
        body.classList.add('dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        body.classList.remove('dark');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    };

    // Function to create a game card element
    const createGameCard = (game) => {
      const card = document.createElement('div');
      card.dataset.id = game.id;
      
      // All cards now use the default styling
      card.className = 'bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer overflow-hidden transform hover:scale-105';
      card.innerHTML = `
        <img
          src="${game.thumbnail}"
          alt="${game.title}"
          class="w-full h-40 object-cover"
          loading="lazy"
        />
        <div class="p-4">
          <h3 class="text-lg font-semibold font-heading truncate">${game.title}</h3>
        </div>
      `;
      
      return card;
    };

    // Function to render all games
    const renderGames = () => {
      gameGrid.innerHTML = ''; // Clear previous content
      games.forEach(game => {
        gameGrid.appendChild(createGameCard(game));
      });
    };

    // Function to open the game modal
    const openGameModal = (game) => {
      modalTitle.textContent = game.title;
      gameIframe.src = game.url;
      gameModal.classList.remove('hidden');
    };

    // Function to close the game modal
    const closeGameModal = () => {
      gameModal.classList.add('hidden');
      gameIframe.src = ''; // Clear the iframe to stop the game
    };
    
    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      renderGames();
      
      // Ensure initial theme state is correct
      if (isDarkMode) {
        body.classList.add('dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        body.classList.remove('dark');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    });

    themeToggle.addEventListener('click', toggleDarkMode);

    gameGrid.addEventListener('click', (event) => {
      const card = event.target.closest('[data-id]');
      if (!card) return;
      
      const gameId = card.dataset.id;
      const selectedGame = games.find(game => game.id == gameId);
      if (selectedGame) {
        openGameModal(selectedGame);
      }
    });

    modalCloseBtn.addEventListener('click', closeGameModal);
    modalExitTextBtn.addEventListener('click', closeGameModal);

  </script>

</body>
</html>
