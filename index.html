<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>English 1 Batam - Activity Hub</title>

  <link rel="icon" type="image/x-icon" href="./media/icon.ico" />
  <link rel="apple-touch-icon" href="./media/icon.png" />
  <!-- External Libraries -->
  <script src="https://unpkg.com/lucide@latest" defer></script>
  <script src="https://cdn.tailwindcss.com"></script> <!-- Keep blocking -->

  <!-- Base styles - must be first (foundation & design tokens) -->
  <link rel="stylesheet" href="css/base.css">

  <!-- Component styles - second (reusable UI components) -->
  <link rel="stylesheet" href="css/components.css">

  <!-- Side panel styles - last (specific feature module) -->
  <link rel="stylesheet" href="css/side-panel.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;600;800&display=swap"
    rel="stylesheet">
  <!-- Theme Configuration -->
  <script>
    // Tailwind Configuration
    // See: https://tailwindcss.com/docs/configuration
    tailwind.config = {
      darkMode: 'class',

      theme: {
        extend: {
          // Custom Colors
          colors: {
            pink: '#FF6B95',
            orange: '#FF8C42',
            green: '#00E676',
            blue: '#2979FF',
            dark: '#1e293b',
            chalk: '#f8fafc',
          },

          // Typography
          fontFamily: {
            heading: ['Fredoka', 'sans-serif'],
            body: ['Nunito', 'sans-serif'],
          },

          // Effects
          boxShadow: {
            'hard-sm': '2px 2px 0px 0px rgba(30, 41, 59, 1)',
            'hard': '4px 4px 0px 0px rgba(30, 41, 59, 1)',
            'hard-md': '6px 6px 0px 0px rgba(30, 41, 59, 1)',
            'hard-lg': '8px 8px 0px 0px rgba(30, 41, 59, 1)',
            'hard-xl': '12px 12px 0px 0px rgba(30, 41, 59, 1)',
            'neon-sm': '2px 2px 0px 0px rgba(0, 0, 0, 0.5)',
            'neon': '4px 4px 0px 0px rgba(0, 0, 0, 0.5)',
          },

          // Animations
          animation: {
            'bounce-slight': 'bounce-slight 2s infinite',
            'pop-in': 'pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
            'slide-down': 'slide-down 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards',
            'float': 'float 20s infinite linear',
          },

          keyframes: {
            'bounce-slight': {
              '0%, 100%': { transform: 'translateY(-3%)' },
              '50%': { transform: 'translateY(0)' },
            },
            'pop-in': {
              '0%': { opacity: '0', transform: 'scale(0.95)' },
              '100%': { opacity: '1', transform: 'scale(1)' },
            },
            'slide-down': {
              '0%': { transform: 'translateY(-100%)' },
              '100%': { transform: 'translateY(0)' },
            },
            'float': {
              '0%': { transform: 'translate(0, 0) rotate(0deg)' },
              '100%': { transform: 'translate(100px, 100px) rotate(360deg)' },
            }
          }
        }
      }
    }
  </script>
  <script>
    const saved = localStorage.getItem('theme');
    if (saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>
</head>

<body class="min-h-screen p-4 md:p-8 xl:px-16 pb-20 selection:bg-pink selection:text-white">
  <div class="max-w-7xl mx-auto space-y-8">

    <!-- HEADER SECTION -->
    <header
      class="bg-white dark:bg-slate-900 border-4 border-dark dark:border-slate-400 rounded-[2rem] p-6 shadow-hard-md dark:shadow-neon flex flex-col md:flex-row justify-between items-center gap-6 relative overflow-hidden transition-colors">

      <div class="flex items-center gap-5 z-10 w-full md:w-auto">
        <div
          class="bg-blue w-20 h-20 rounded-2xl border-4 border-dark dark:border-slate-200 flex items-center justify-center shadow-hard dark:shadow-black text-white relative group cursor-pointer hover:rotate-3 transition-transform"
          onclick="App.playSound('click')">
          <i data-lucide="lightbulb" class="w-10 h-10 group-hover:scale-110 transition-transform"></i>
        </div>
        <div>
          <!-- Dynamic Greeting -->
          <div class="flex items-center gap-2 mb-1">
            <span id="date-display"
              class="text-xs font-bold bg-dark dark:bg-slate-700 text-white px-2 py-0.5 rounded-md uppercase tracking-wider shadow-hard-sm dark:shadow-black">...</span>
            <span id="greeting-display"
              class="text-xs font-bold text-dark dark:text-slate-300 uppercase tracking-wider bg-white dark:bg-slate-800 border-2 border-dark dark:border-slate-500 px-2 py-0.5 rounded-md">Hello!</span>
          </div>
          <h1
            class="text-4xl md:text-5xl font-heading text-dark dark:text-white leading-none tracking-tight drop-shadow-sm">
            ENGLISH 1 BATAM<span class="text-blue dark:text-blue-400 relative inline-block">TEACHER HUB</span>
          </h1>
        </div>
      </div>

      <!-- Search & Controls -->
      <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto z-10 items-center">

        <!-- Toggle Group -->
        <div class="flex gap-2">
          <button data-action="toggleTheme"
            class="w-12 h-12 bg-white dark:bg-slate-800 border-3 border-dark dark:border-slate-400 rounded-xl flex items-center justify-center shadow-hard dark:shadow-black hover:translate-y-[-2px] transition-transform"
            title="Toggle Blackboard Mode">
            <i data-lucide="moon" class="w-5 h-5 text-dark dark:hidden"></i>
            <i data-lucide="sun" class="w-5 h-5 text-yellow-400 hidden dark:block"></i>
          </button>
          <button data-action="toggleSound" id="sound-btn"
            class="w-12 h-12 bg-white dark:bg-slate-800 border-3 border-dark dark:border-slate-400 rounded-xl flex items-center justify-center shadow-hard dark:shadow-black hover:translate-y-[-2px] transition-transform"
            title="Toggle Sound">
            <i id="sound-btn-icon" data-lucide="volume-2" class="w-5 h-5 text-green dark:text-green-400"></i>
          </button>
        </div>

        <div class="relative flex-1 sm:w-64 group">
          <label for="search-input" class="sr-only">Search activities</label>
          <input type="text" id="search-input" placeholder="Find activity... (/)"
            aria-label="Search activities by name or category" role="searchbox"
            class="w-full input-chunky px-4 py-3 pl-12 font-bold placeholder-slate-400 transition-colors">

          <i data-lucide="search" aria-hidden="true"
            class="absolute left-4 top-4 w-5 h-5 text-slate-400 group-focus-within:text-blue transition-colors"></i>
        </div>
      </div>
    </header>

    <!-- RECENT ACTIVITY (Quick Launch) -->
    <section id="recent-section" class="hidden animate-pop-in">
      <div class="flex items-center gap-2 mb-3 px-2">
        <div class="bg-orange p-1 rounded border-2 border-dark dark:border-slate-400 shadow-hard-sm">
          <i data-lucide="zap" class="w-4 h-4 text-white"></i>
        </div>
        <h3 class="font-heading text-xl text-dark dark:text-white">QUICK LAUNCH</h3>
        <button data-action="clearRecent"
          class="text-xs font-bold text-slate-400 hover:text-red-500 ml-auto uppercase tracking-wider border-b-2 border-transparent hover:border-red-500 transition-colors">Clear
          History</button>
      </div>
      <div id="recent-list" class="flex gap-4 overflow-x-auto pb-6 px-1 mask-gradient">
        <!-- Recent items injected here -->
      </div>
    </section>

    <!-- CONTROLS & FILTERS -->
    <div
      class="flex flex-col sm:flex-row justify-between items-end gap-4 border-b-4 border-dark/10 dark:border-white/10 pb-6">
      <nav class="flex flex-wrap gap-3" id="filters">
        <button data-action="filterGames" data-param="all" data-category="all" aria-pressed="true"
          class="filter-btn btn-chunky active bg-white text-dark px-6 py-2 rounded-xl">ALL</button>
        <button button data-action="filterGames" data-param="tool" data-category="tool" aria-pressed="false"
          class="filter-btn btn-chunky bg-white text-dark px-6 py-2 rounded-xl">TOOLS</button>
        <button data-action="filterGames" data-param="game" data-category="game" aria-pressed="false"
          class="filter-btn btn-chunky bg-white text-dark px-6 py-2 rounded-xl">GAMES</button>
      </nav>
      <div
        class="text-sm font-bold text-slate-400 font-heading tracking-widest bg-white dark:bg-slate-800 border-2 border-dark/20 dark:border-slate-600 px-3 py-1 rounded-lg">
        SHOWING <span id="count-badge" class="text-dark dark:text-white font-black text-lg">0</span> APPS
      </div>
    </div>

    <!-- GAMES GRID -->
    <main id="games-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <!-- Game Cards will be injected here by JS -->
    </main>

    <!-- FOOTER -->
    <footer class="flex flex-col items-center gap-4 pt-12 pb-8">

      <div
        class="inline-flex gap-4 p-4 bg-white dark:bg-slate-800 border-2 border-slate-900 dark:border-slate-500 rounded-xl shadow-[4px_4px_0px_0px_rgba(30,41,59,1)] hover:scale-105 transition-transform cursor-default">
        <div class="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
          Made and Maintained by
        </div>
        <div class="w-px h-4 bg-slate-300 dark:bg-slate-600"></div>
        <div class="text-xs font-bold text-slate-400 uppercase tracking-widest">
          Fahrul Ahyan
        </div>
      </div>

      <div class="flex gap-3">
        <a href="https://github.com/pod-III" target="_blank"
          class="group bg-slate-900 p-2 rounded-lg border-2 border-slate-900 text-white shadow-[3px_3px_0px_0px_rgba(30,41,59,0.3)] hover:shadow-none hover:translate-x-[3px] hover:translate-y-[3px] transition-all">
          <i data-lucide="github" class="w-5 h-5 stroke-[2.5]"></i>
        </a>

        <a href="https://www.linkedin.com/in/fahrul-ahyan/" target="_blank"
          class="group bg-[#2979FF] p-2 rounded-lg border-2 border-slate-900 text-white shadow-[3px_3px_0px_0px_rgba(30,41,59,0.3)] hover:shadow-none hover:translate-x-[3px] hover:translate-y-[3px] transition-all">
          <i data-lucide="linkedin" class="w-5 h-5 stroke-[2.5]"></i>
        </a>

        <a href="https://pod-iii.github.io/profile-web/" target="_blank"
          class="group bg-[#FF8C42] p-2 rounded-lg border-2 border-slate-900 text-white shadow-[3px_3px_0px_0px_rgba(30,41,59,0.3)] hover:shadow-none hover:translate-x-[3px] hover:translate-y-[3px] transition-all">
          <i data-lucide="briefcase" class="w-5 h-5 stroke-[2.5]"></i>
        </a>
      </div>

    </footer>

  </div>

  <!-- FULL SCREEN GAME MODAL WITH SIDE PANEL -->
  <div id="game-modal" class="fixed inset-0 z-50 hidden bg-slate-900" style="display: none;">

    <!-- SIDE PANEL -->
    <aside id="side-panel"
      class="fixed left-0 top-0 h-full w-20 bg-white dark:bg-slate-800 border-r-4 border-dark dark:border-slate-600 flex flex-col items-center py-4 gap-3 z-[60]">

      <!-- Home Button (Returns to hub, keeps tabs) -->
      <button data-action="returnToHome" class="side-panel-btn side-panel-home" title="Home (Alt+H)"
        aria-label="Return to home page">
        <i data-lucide="home" class="w-6 h-6" aria-hidden="true"></i>
      </button>

      <!-- Divider -->
      <div class="w-12 h-0.5 bg-slate-200 dark:bg-slate-700 rounded-full"></div>

      <!-- Tab Icons Container -->
      <div id="side-panel-tabs" class="flex-1 flex flex-col items-center gap-2 overflow-y-auto w-full px-2">
        <!-- Tab icons will be injected here -->
      </div>

      <!-- Divider -->
      <div class="w-12 h-0.5 bg-slate-200 dark:bg-slate-700 rounded-full"></div>

      <!-- Bottom Controls -->

      <!-- Close All Tabs Button (Trash) -->
      <button data-action="closeAllTabs" class="side-panel-btn side-panel-danger" title="Close All Tabs"
        aria-label="Close all open tabs">
        <i data-lucide="trash-2" class="w-5 h-5" aria-hidden="true"></i>
      </button>

      <!-- Info Button -->
      <button data-action="toggleInfo" class="side-panel-btn" title="Game Info" aria-label="Show game information">
        <i data-lucide="info" class="w-5 h-5" aria-hidden="true"></i>
      </button>

      <!-- Reload Button -->
      <button data-action="reloadGame" class="side-panel-btn" title="Reload Game (Ctrl+R)"
        aria-label="Reload current game">
        <i data-lucide="rotate-cw" class="w-5 h-5" aria-hidden="true"></i>
      </button>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main id="tab-content-area" class="ml-20 h-full relative">
      <!-- Tab panels (iframes) will be injected here -->
    </main>
    <!-- INFO OVERLAY -->
    <div id="info-overlay"
      class="absolute inset-0 z-[70] hidden flex-col items-center justify-center bg-dark/90 backdrop-blur-sm p-6 animate-pop-in">
      <div
        class="bg-white dark:bg-slate-800 border-4 border-dark dark:border-slate-600 rounded-[2rem] max-w-2xl w-full p-8 shadow-hard-xl relative overflow-hidden">

        <!-- Close Button -->
        <button data-action="toggleInfo"
          class="absolute top-6 right-6 p-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors border-2 border-transparent hover:border-dark dark:hover:border-slate-500"
          aria-label="Close information">
          <i data-lucide="x" class="w-8 h-8 text-dark dark:text-white" aria-hidden="true"></i>
        </button>

        <!-- Game Info Header -->
        <div class="flex items-start gap-6 mb-8">
          <div id="info-icon"
            class="w-24 h-24 rounded-2xl border-4 border-dark dark:border-slate-500 flex items-center justify-center text-white bg-blue shadow-hard dark:shadow-neon shrink-0">
            <i data-lucide="lightbulb" class="w-12 h-12" aria-hidden="true"></i>
          </div>
          <div class="flex-1">
            <h2 id="info-title-display"
              class="text-4xl md:text-5xl font-heading text-dark dark:text-white leading-none mb-2">GAME TITLE</h2>
            <div class="flex gap-2 flex-wrap">
              <span id="info-category"
                class="px-3 py-1 bg-dark dark:bg-slate-700 text-white text-xs font-bold uppercase tracking-widest rounded-lg shadow-hard-sm">CATEGORY</span>
              <span id="info-difficulty"
                class="px-3 py-1 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs font-bold uppercase tracking-widest rounded-lg"></span>
            </div>
          </div>
        </div>

        <!-- Instructions -->
        <div
          class="bg-slate-50 dark:bg-slate-900 border-4 border-slate-200 dark:border-slate-700 rounded-2xl p-6 mb-8 max-h-[40vh] overflow-y-auto custom-scrollbar">
          <h3
            class="text-sm font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2">
            <i data-lucide="book-open" class="w-4 h-4" aria-hidden="true"></i> Instructions
          </h3>
          <div id="info-content"
            class="text-slate-700 dark:text-slate-300 text-lg leading-relaxed space-y-3 font-medium"></div>
        </div>

        <!-- Return Button -->
        <button data-action="toggleInfo"
          class="btn-chunky bg-green text-dark dark:text-white w-full py-4 rounded-xl flex items-center justify-center gap-3 text-xl hover:brightness-105">
          <span>RETURN TO GAME</span>
          <i data-lucide="arrow-right" class="w-6 h-6" aria-hidden="true"></i>
        </button>
      </div>
    </div>
    <!-- CONFIRMATION MODAL -->
    <div id="confirm-modal"
      class="absolute inset-0 z-[80] hidden flex-col items-center justify-center bg-dark/90 backdrop-blur-sm p-6 animate-pop-in">
      <div
        class="bg-white dark:bg-slate-800 border-4 border-dark dark:border-slate-600 rounded-[2rem] max-w-md w-full p-8 shadow-hard-xl">

        <!-- Icon -->
        <div class="flex justify-center mb-6">
          <div
            class="w-20 h-20 rounded-2xl bg-orange border-4 border-dark dark:border-slate-500 flex items-center justify-center shadow-hard">
            <i data-lucide="alert-triangle" class="w-10 h-10 text-white" aria-hidden="true"></i>
          </div>
        </div>

        <!-- Title -->
        <h3 id="confirm-title" class="text-3xl font-heading text-dark dark:text-white text-center mb-4">
          Close All Tabs?
        </h3>

        <!-- Message -->
        <p id="confirm-message" class="text-lg text-slate-600 dark:text-slate-400 text-center mb-8 font-medium">
          This will close all <span id="confirm-count" class="font-bold text-dark dark:text-white">0</span> open tabs.
          This action cannot be undone.
        </p>

        <!-- Buttons -->
        <div class="flex gap-4">
          <button data-action="confirmCancel"
            class="btn-chunky bg-slate-200 dark:bg-slate-700 text-dark dark:text-white flex-1 py-3 rounded-xl text-lg hover:brightness-95">
            CANCEL
          </button>
          <button data-action="confirmDelete"
            class="btn-chunky bg-red-500 text-white flex-1 py-3 rounded-xl text-lg hover:brightness-110 flex items-center justify-center gap-2">
            <i data-lucide="trash-2" class="w-5 h-5" aria-hidden="true"></i>
            CLOSE ALL
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="./script.js"></script>
</body>

</html>