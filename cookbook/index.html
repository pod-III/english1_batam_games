<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English 1 Batam - Cookbook OS</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* ============================================
           1. CORE DESIGN TOKENS (From base.css)
           ============================================ */
        :root {
            /* Palette */
            --color-pink: #FF6B95;
            --color-orange: #FF8C42;
            --color-green: #00E676;
            --color-blue: #2979FF;
            --color-dark: #1e293b;
            --color-chalk: #f8fafc;

            /* Semantic */
            --bg-primary: #F8FAFC;
            --bg-card: #FFFFFF;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-primary: #1e293b;
            
            /* Shadows & Borders */
            --border-width: 3px;
            --shadow-hard: 4px 4px 0 var(--border-primary);
            --shadow-hover: 6px 6px 0 var(--border-primary);
            --shadow-active: 0px 0px 0 var(--border-primary);
            
            /* Grid */
            --grid-color: #E2E8F0;
            --grid-size: 24px;
        }

        /* ============================================
           2. GLOBAL RESETS
           ============================================ */
        body {
            background-color: var(--bg-primary);
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: var(--grid-size) var(--grid-size);
            color: var(--text-primary);
            font-family: 'Nunito', sans-serif;
        }

        h1, h2, h3, .font-heading {
            font-family: 'Fredoka', sans-serif;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); border-left: 2px solid var(--border-primary); }
        ::-webkit-scrollbar-thumb { background: var(--color-pink); border: 2px solid var(--border-primary); border-radius: 99px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--color-orange); }

        /* ============================================
           3. COMPONENT CLASSES (From components.css)
           ============================================ */
        
        /* The "Chunky" Button */
        .btn-chunky {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-family: 'Fredoka', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            
            background-color: var(--bg-card);
            color: var(--text-primary);
            border: var(--border-width) solid var(--border-primary);
            box-shadow: var(--shadow-hard);
            border-radius: 0.75rem;
            
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            user-select: none;
        }

        .btn-chunky:hover {
            transform: translate(-2px, -2px);
            box-shadow: var(--shadow-hover);
        }

        .btn-chunky:active {
            transform: translate(2px, 2px);
            box-shadow: var(--shadow-active);
        }

        /* Neo Card Style */
        .card-neo {
            background: var(--bg-card);
            border: var(--border-width) solid var(--border-primary);
            border-radius: 1rem;
            box-shadow: var(--shadow-hard);
            transition: all 0.2s ease;
        }
        
        .card-neo.interactive:hover {
            transform: translate(-2px, -2px);
            box-shadow: var(--shadow-hover);
            z-index: 10;
        }

        /* Search Input */
        .input-chunky {
            width: 100%;
            padding: 0.75rem 1rem;
            border: var(--border-width) solid var(--border-primary);
            border-radius: 0.75rem;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            outline: none;
            box-shadow: var(--shadow-hard);
            transition: all 0.2s;
        }
        .input-chunky:focus {
            box-shadow: var(--shadow-hover);
            border-color: var(--color-blue);
            transform: translate(-2px, -2px);
        }

        /* Checkbox Styling */
        .checkbox-neo {
            appearance: none;
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid var(--border-primary);
            border-radius: 0.25rem;
            background: white;
            cursor: pointer;
            position: relative;
        }
        .checkbox-neo:checked {
            background: var(--color-green);
        }
        .checkbox-neo:checked::after {
            content: '✓';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: var(--border-primary);
            font-weight: bold;
            font-size: 0.8rem;
        }

        /* Animation */
        .fade-in-up {
            animation: fadeInUp 0.3s ease-out forwards;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen p-4 md:p-6 pb-20">

    <nav class="w-full max-w-6xl mb-8 flex justify-between items-center bg-white border-[3px] border-e1dark rounded-2xl p-3 md:p-4 shadow-[4px_4px_0_#1e293b] sticky top-4 z-50">
        <div class="flex items-center gap-3 cursor-pointer select-none" onclick="renderHome()">
            <div class="w-12 h-12 bg-[#FF6B95] border-[3px] border-e1dark rounded-xl flex items-center justify-center text-white shadow-sm">
                <i data-lucide="chef-hat" class="w-7 h-7"></i>
            </div>
            <div>
                <h1 class="text-2xl md:text-3xl font-heading font-bold leading-none text-[#1e293b]">COOKBOOK <span class="text-[#2979FF]">OS</span></h1>
                <span class="text-xs font-bold text-slate-400 uppercase tracking-widest pl-0.5">English 1 Hub</span>
            </div>
        </div>
        <button onclick="renderHome()" class="btn-chunky px-4 py-2 text-sm bg-slate-100">
            <i data-lucide="layout-grid" class="w-4 h-4 text-[#FF8C42]"></i> MENU
        </button>
    </nav>

    <main id="app-container" class="w-full max-w-6xl">
        <div class="flex flex-col items-center justify-center pt-24 opacity-50">
            <i data-lucide="loader-2" class="animate-spin w-10 h-10 text-[#2979FF] mb-3"></i>
            <h2 class="text-xl font-heading font-bold text-slate-400">Loading Ingredients...</h2>
        </div>
    </main>

    <script>
        // --- DATA: 9 FULL RECIPES ---
        // (Using embedded backup to ensure it works instantly for you)
        const BACKUP_RECIPES = [
          { "id": "apple-crumble", "title": "Mini Apple Crumble", "subtitle": "Dessert Mission", "desc": "Contrast soft, warm stewed fruit with a crunchy, buttery topping.", "level": "Beginner", "color": "e1pink", "meta": [ { "label": "Prep", "value": "20m", "icon": "clock" }, { "label": "Bake", "value": "180°C", "icon": "flame" }, { "label": "Yield", "value": "1 Cup", "icon": "utensils" } ], "loadout": [ { "groupName": "The Core (Fruit)", "groupColor": "text-[#FF6B95]", "items": ["1 Fuji Apple (Firm)", "1 tsp Brown Sugar", "1/4 tsp Cinnamon"] }, { "groupName": "The Armor (Crumble)", "groupColor": "text-[#FF8C42]", "items": ["2 Tbsp Flour", "1.5 Tbsp Cold Butter", "1 Tbsp Sugar", "1 Tbsp Oats"] } ], "vocab": [ { "word": "Dice (v)", "def": "Cut into small cubes.", "color": "text-[#FF6B95]" }, { "word": "Rub-in (v)", "def": "Mix butter into flour.", "color": "text-[#FF8C42]" } ], "steps": [ { "number": 1, "title": "Precision Cutting", "color": "blue", "desc": "Wash apple. Slice into 4 sections. Cut into strips, then cubes.", "note": "Aim for 1cm cubes." }, { "number": 2, "title": "Seasoning", "color": "green", "desc": "Place apple in cup. Sprinkle Brown Sugar and Cinnamon.", "note": "Toss gently." }, { "number": 3, "title": "Sand Texture", "color": "orange", "desc": "Mix Flour/Sugar. Rub in Cold Butter until it looks like sand.", "note": "Friction melts butter!" }, { "number": 4, "title": "Deployment", "color": "pink", "desc": "Pour crumble over apples. Do not press down.", "note": "Bake 25m." } ] },
          { "id": "power-sandwich", "title": "Power Sandwich", "subtitle": "Lunch Mission", "desc": "Master the art of layering flavors and frying the perfect egg.", "level": "Intermediate", "color": "e1orange", "meta": [ { "label": "Prep", "value": "10m", "icon": "clock" }, { "label": "Heat", "value": "Med", "icon": "flame" }, { "label": "Yield", "value": "1 Unit", "icon": "utensils" } ], "loadout": [ { "groupName": "Hardware", "groupColor": "text-[#2979FF]", "items": ["2 Slices Bread", "1 Slice Cheese", "1 Egg"] }, { "groupName": "Software", "groupColor": "text-[#00E676]", "items": ["Lettuce Leaf", "2 Tomato Slices", "Mayo"] } ], "vocab": [ { "word": "Sizzle (v)", "def": "Sound of frying.", "color": "text-[#FF8C42]" }, { "word": "Assemble (v)", "def": "Fit parts together.", "color": "text-[#00E676]" } ], "steps": [ { "number": 1, "title": "Pan Calibration", "color": "orange", "desc": "Heat pan. Add butter. Wait for foam to stop.", "note": "Handle inward." }, { "number": 2, "title": "Egg Mechanics", "color": "blue", "desc": "Crack egg. Cook 2 mins until white is solid.", "note": "Don't break yolk!" }, { "number": 3, "title": "Logic Stacking", "color": "green", "desc": "Bread > Lettuce > Tomato > Egg > Cheese > Bread.", "note": "Hot egg melts cheese.", "icon": "layers" } ] },
          { "id": "tropical-fizz", "title": "Tropical Fizz", "subtitle": "Chemistry Mission", "desc": "A lesson in density. Create a refreshing, gradient-colored drink.", "level": "Easy", "color": "e1blue", "meta": [ { "label": "Time", "value": "5m", "icon": "clock" }, { "label": "Fizz", "value": "100%", "icon": "zap" }, { "label": "Yield", "value": "300ml", "icon": "utensils" } ], "loadout": [ { "groupName": "Solvents", "groupColor": "text-[#2979FF]", "items": ["Soda Water", "Orange Syrup"] }, { "groupName": "Solids", "groupColor": "text-[#00E676]", "items": ["Ice Cubes", "Mint", "Lemon"] } ], "vocab": [ { "word": "Density (n)", "def": "Heaviness of liquid.", "color": "text-[#FF6B95]" }, { "word": "Garnish (v)", "def": "Decorate.", "color": "text-[#00E676]" } ], "steps": [ { "number": 1, "title": "Thermal Protection", "color": "blue", "desc": "Fill glass to top with ice.", "note": "More ice = less melt." }, { "number": 2, "title": "Heavy Layer", "color": "pink", "desc": "Pour Syrup over ice. Watch it sink.", "note": "Denser than water." }, { "number": 3, "title": "Carbon Injection", "color": "green", "desc": "Pour Soda slowly. Stir GENTLY once.", "note": "Don't kill bubbles." } ] },
          { "id": "pancakes", "title": "Gravity Pancakes", "subtitle": "Breakfast Mission", "desc": "Master batter viscosity and the perfect flip.", "level": "Intermediate", "color": "e1green", "meta": [ { "label": "Prep", "value": "15m", "icon": "clock" }, { "label": "Yield", "value": "4 pcs", "icon": "layers" } ], "loadout": [ { "groupName": "Dry", "groupColor": "text-[#FF8C42]", "items": ["1 Cup Flour", "Baking Powder", "Sugar"] }, { "groupName": "Wet", "groupColor": "text-[#2979FF]", "items": ["1 Cup Milk", "1 Egg", "Butter"] } ], "vocab": [ { "word": "Whisk (v)", "def": "Beat to add air.", "color": "text-[#2979FF]" }, { "word": "Reaction (n)", "def": "Bubbles from heat.", "color": "text-[#00E676]" } ], "steps": [ { "number": 1, "title": "Dry Team", "color": "orange", "desc": "Whisk Flour, Powder, Sugar in big bowl.", "note": "Create a well." }, { "number": 2, "title": "Wet Team", "color": "blue", "desc": "Mix Milk, Egg, Butter. Pour into Dry.", "note": "Don't scramble egg." }, { "number": 3, "title": "Bubble Indicator", "color": "pink", "desc": "Pour batter. Flip when bubbles pop.", "note": "Wait for it." } ] },
          { "id": "spaghetti", "title": "Code Red Pasta", "subtitle": "Dinner Mission", "desc": "Handle boiling water and learn 'Al Dente'.", "level": "Advanced", "color": "e1pink", "meta": [ { "label": "Boil", "value": "10m", "icon": "flame" }, { "label": "Yield", "value": "1 Bowl", "icon": "utensils" } ], "loadout": [ { "groupName": "Carbs", "groupColor": "text-[#FF8C42]", "items": ["100g Spaghetti", "Water", "Salt"] }, { "groupName": "Sauce", "groupColor": "text-[#FF6B95]", "items": ["Tomato Sauce", "Oregano", "Cheese"] } ], "vocab": [ { "word": "Al Dente", "def": "Firm to bite.", "color": "text-[#FF8C42]" }, { "word": "Simmer", "def": "Gentle boil.", "color": "text-[#FF6B95]" } ], "steps": [ { "number": 1, "title": "Rolling Boil", "color": "pink", "desc": "Boil water. Add Salt. Add Pasta.", "note": "Salty like sea." }, { "number": 2, "title": "Timing", "color": "blue", "desc": "Boil 9 mins. Taste one strand.", "note": "White dot inside." }, { "number": 3, "title": "Fusion", "color": "green", "desc": "Drain. Mix with sauce on low heat.", "note": "Careful of stains." } ] },
          { "id": "omelette", "title": "Golden Fold", "subtitle": "Egg Mission", "desc": "Fluffy, cheesy omelette without burning it.", "level": "Intermediate", "color": "e1orange", "meta": [ { "label": "Prep", "value": "5m", "icon": "clock" }, { "label": "Yield", "value": "1 Unit", "icon": "utensils" } ], "loadout": [ { "groupName": "Base", "groupColor": "text-[#FF8C42]", "items": ["2 Eggs", "Milk", "Salt"] }, { "groupName": "Fill", "groupColor": "text-[#00E676]", "items": ["Cheese", "Ham", "Onion"] } ], "vocab": [ { "word": "Tilt (v)", "def": "Move pan to flow.", "color": "text-[#FF8C42]" }, { "word": "Fold (v)", "def": "Bend over self.", "color": "text-[#FF6B95]" } ], "steps": [ { "number": 1, "title": "Aeration", "color": "orange", "desc": "Whisk eggs/milk until bubbly.", "note": "Air = Fluffy." }, { "number": 2, "title": "Pour & Tilt", "color": "blue", "desc": "Pour in. Pull edges, tilt pan.", "note": "Fill gaps." }, { "number": 3, "title": "The Fold", "color": "orange", "desc": "Add cheese. Fold in half.", "note": "Residual heat finishes." } ] },
          { "id": "fruit-salad", "title": "Logic Salad", "subtitle": "Knife Skills", "desc": "Safe cutting techniques and color theory.", "level": "Beginner", "color": "e1green", "meta": [ { "label": "Prep", "value": "20m", "icon": "clock" }, { "label": "Cook", "value": "0m", "icon": "slash" } ], "loadout": [ { "groupName": "Spectrum", "groupColor": "text-[#FF6B95]", "items": ["Strawberry", "Kiwi", "Mango"] }, { "groupName": "Dressing", "groupColor": "text-[#FF8C42]", "items": ["Honey", "Lime", "Mint"] } ], "vocab": [ { "word": "Hull", "def": "Remove top.", "color": "text-[#FF6B95]" }, { "word": "Emulsify", "def": "Mix liquids.", "color": "text-[#FF8C42]" } ], "steps": [ { "number": 1, "title": "Claw Grip", "color": "pink", "desc": "Curl fingers when cutting.", "note": "Protect tips." }, { "number": 2, "title": "Uniformity", "color": "green", "desc": "Cut all fruit same size.", "note": "Looks pro." }, { "number": 3, "title": "Toss", "color": "blue", "desc": "Mix with dressing gently.", "note": "Don't mush." } ] },
          { "id": "cookies", "title": "Binary Cookies", "subtitle": "Baking Mission", "desc": "Turn dough into crispy-chewy discs.", "level": "Advanced", "color": "e1blue", "meta": [ { "label": "Bake", "value": "12m", "icon": "flame" }, { "label": "Yield", "value": "12 pcs", "icon": "layers" } ], "loadout": [ { "groupName": "Wet", "groupColor": "text-[#FF8C42]", "items": ["Butter", "Sugar", "Egg"] }, { "groupName": "Dry", "groupColor": "text-[#2979FF]", "items": ["Flour", "Soda", "Chips"] } ], "vocab": [ { "word": "Cream", "def": "Mix butter/sugar.", "color": "text-[#FF8C42]" }, { "word": "Cooling", "def": "Hardening process.", "color": "text-[#FF6B95]" } ], "steps": [ { "number": 1, "title": "Creaming", "color": "orange", "desc": "Mash butter/sugar to paste.", "note": "Traps air." }, { "number": 2, "title": "Integration", "color": "green", "desc": "Add Dry to Wet. Mix slowly.", "note": "Don't overmix." }, { "number": 3, "title": "Hardening", "color": "blue", "desc": "Bake 180°C. Cool on tray.", "note": "Soft hot, hard cold." } ] },
          { "id": "smoothie", "title": "Brain Freeze", "subtitle": "Blender Mission", "desc": "High-speed physics. Solids to liquids.", "level": "Easy", "color": "e1pink", "meta": [ { "label": "Blend", "value": "30s", "icon": "zap" }, { "label": "Yield", "value": "1 Glass", "icon": "utensils" } ], "loadout": [ { "groupName": "Base", "groupColor": "text-[#FF6B95]", "items": ["Frozen Banana", "Berries", "Milk"] }, { "groupName": "Boost", "groupColor": "text-[#00E676]", "items": ["Yogurt", "Honey"] } ], "vocab": [ { "word": "Vortex", "def": "Tornado shape.", "color": "text-[#2979FF]" }, { "word": "Viscosity", "def": "Thickness.", "color": "text-[#FF8C42]" } ], "steps": [ { "number": 1, "title": "Order", "color": "blue", "desc": "Liquid first. Frozen last.", "note": "Helps blades." }, { "number": 2, "title": "Security", "color": "orange", "desc": "Hold lid down tight.", "note": "No explosions." }, { "number": 3, "title": "Vortex", "color": "green", "desc": "High speed 20s.", "note": "Brain freeze!" } ] }
        ];

        // State
        let recipes = [];
        let activeFilter = 'All';
        let searchQuery = '';

        // --- INIT ---
        async function initApp() {
            // Try fetch, fall back to data
            const paths = ['./recipes.json', 'recipes.json'];
            let loaded = false;
            
            for (const p of paths) {
                try {
                    const res = await fetch(p);
                    if (res.ok) {
                        recipes = await res.json();
                        loaded = true;
                        break;
                    }
                } catch(e) {}
            }
            if (!loaded) recipes = BACKUP_RECIPES;
            
            renderHome();
        }

        // --- SEARCH/FILTER HANDLERS ---
        function setFilter(level) {
            activeFilter = level;
            renderHome();
        }

        function handleSearch(e) {
            searchQuery = e.target.value.toLowerCase();
            renderHome();
        }

        // --- VIEWS ---
        function renderHome() {
            const container = document.getElementById('app-container');
            
            // Filter logic
            const filtered = recipes.filter(r => {
                const matchLvl = activeFilter === 'All' || r.level === activeFilter;
                const matchTxt = (r.title + r.subtitle + r.desc).toLowerCase().includes(searchQuery);
                return matchLvl && matchTxt;
            });

            // Filter Buttons
            const levels = ['All', 'Beginner', 'Intermediate', 'Advanced'];
            const buttonsHTML = levels.map(l => {
                const isActive = activeFilter === l;
                // Using btn-chunky styling but smaller/modified for toggle
                const activeClasses = "bg-[#1e293b] text-white border-[#1e293b]";
                const inactiveClasses = "bg-white text-[#1e293b] hover:bg-slate-50";
                
                return `
                <button onclick="setFilter('${l}')" 
                    class="btn-chunky px-4 py-2 text-sm rounded-lg border-2 ${isActive ? activeClasses : inactiveClasses} shadow-none transform-none">
                    ${l}
                </button>`;
            }).join('');

            // Control Bar
            const controls = `
            <div class="flex flex-col md:flex-row gap-4 mb-8 justify-between items-start md:items-center fade-in-up">
                <div class="relative w-full md:w-80">
                    <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"></i>
                    <input type="text" placeholder="Find mission..." oninput="handleSearch(event)" value="${searchQuery}"
                        class="input-chunky pl-10">
                </div>
                <div class="flex flex-wrap gap-2">
                    ${buttonsHTML}
                </div>
            </div>`;

            // Cards Grid
            let grid = '';
            if (filtered.length === 0) {
                grid = `
                <div class="text-center p-12 border-[3px] border-dashed border-slate-300 rounded-2xl opacity-60">
                    <i data-lucide="search-x" class="mx-auto w-12 h-12 text-slate-400 mb-2"></i>
                    <p class="font-heading text-xl text-slate-500">No missions found.</p>
                </div>`;
            } else {
                grid = `<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${filtered.map((r, i) => {
                        const colorMap = { e1pink: '#FF6B95', e1orange: '#FF8C42', e1green: '#00E676', e1blue: '#2979FF' };
                        const color = colorMap[r.color] || '#1e293b';
                        
                        return `
                        <div class="card-neo interactive p-5 flex flex-col h-full bg-white relative fade-in-up" style="animation-delay: ${i * 50}ms">
                            <div class="flex justify-between items-start mb-3">
                                <span class="bg-slate-100 border border-slate-200 px-2 py-1 rounded-md font-bold text-[10px] uppercase tracking-wider text-slate-500">${r.subtitle}</span>
                                <span class="text-[10px] font-bold text-white px-2 py-1 rounded-md" style="background:${color}">${r.level}</span>
                            </div>
                            
                            <h2 class="text-2xl font-heading font-bold text-[#1e293b] mb-2 leading-tight">${r.title}</h2>
                            <p class="font-nunito text-slate-600 mb-6 text-sm font-semibold leading-relaxed line-clamp-2 flex-grow">${r.desc}</p>
                            
                            <div class="pt-4 border-t border-dashed border-slate-200 flex items-center justify-between mt-auto">
                                <div class="flex items-center gap-1.5 text-xs font-bold text-slate-500">
                                    <i data-lucide="clock" class="w-3.5 h-3.5"></i> ${(r.meta && r.meta[0]) ? r.meta[0].value : '??'}
                                </div>
                                <button onclick="renderRecipe('${r.id}')" class="btn-chunky px-4 py-2 text-sm rounded-lg" style="background:${color}; color:white; border-color:#1e293b;">
                                    OPEN <i data-lucide="arrow-right" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>`;
                    }).join('')}
                </div>`;
            }

            container.innerHTML = controls + grid;
            
            // Re-focus search if active
            const input = document.querySelector('input');
            if (input && searchQuery) {
                input.focus();
                const val = input.value; input.value = ''; input.value = val;
            }
            
            lucide.createIcons();
        }

        function renderRecipe(id) {
            const r = recipes.find(x => x.id === id);
            if (!r) return;
            const container = document.getElementById('app-container');
            const colorMap = { e1pink: '#FF6B95', e1orange: '#FF8C42', e1green: '#00E676', e1blue: '#2979FF' };
            const accent = colorMap[r.color] || '#1e293b';

            // Ingredients
            const ingredients = (r.loadout || []).map(g => `
                <div class="mb-5 last:mb-0">
                    <h3 class="font-heading text-sm uppercase tracking-wider mb-2 border-b-2 border-slate-200 inline-block pr-2" style="color:${accent}">${g.groupName}</h3>
                    <ul class="space-y-2 text-sm font-bold text-slate-700">
                        ${g.items.map((it, idx) => `
                            <li class="flex items-start gap-3 p-1 rounded hover:bg-slate-50 transition-colors">
                                <input type="checkbox" id="i-${idx}" class="checkbox-neo mt-0.5">
                                <label for="i-${idx}" class="cursor-pointer flex-1 select-none">${it}</label>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `).join('');

            // Steps
            const steps = (r.steps || []).map(s => {
                const sColor = { blue: '#2979FF', orange: '#FF8C42', green: '#00E676', pink: '#FF6B95' }[s.color] || accent;
                const bgClass = s.color === 'blue' ? 'bg-blue-50' : s.color === 'orange' ? 'bg-orange-50' : s.color === 'green' ? 'bg-green-50' : 'bg-pink-50';
                
                return `
                <div class="card-neo bg-white p-5 flex gap-4 mb-4 relative overflow-hidden">
                    <div class="hidden md:flex w-12 h-12 bg-slate-100 border-2 border-slate-800 rounded-xl items-center justify-center flex-shrink-0 font-heading font-bold text-xl">${s.number}</div>
                    <div class="w-full z-10">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="md:hidden w-6 h-6 bg-slate-800 text-white rounded flex items-center justify-center font-bold text-sm">${s.number}</span>
                            <h3 class="font-heading text-xl font-bold" style="color:${sColor}">${s.title}</h3>
                        </div>
                        <p class="text-slate-700 font-semibold mb-3 leading-relaxed">${s.desc}</p>
                        <div class="${bgClass} border-l-[3px] p-3 rounded-r-lg text-sm flex gap-2 border-slate-800">
                            ${s.icon ? `<i data-lucide="${s.icon}" class="w-4 h-4 mt-0.5 flex-shrink-0"></i>` : ''}
                            <span class="font-bold text-slate-700">${s.note}</span>
                        </div>
                    </div>
                </div>`;
            }).join('');

            // Full View
            container.innerHTML = `
            <div class="fade-in-up pb-12">
                <button onclick="renderHome()" class="mb-6 btn-chunky px-4 py-2 bg-white text-sm">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i> BACK
                </button>
                
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    <div class="lg:col-span-12 card-neo bg-white p-6 relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-3" style="background:${accent}"></div>
                        <div class="pt-2">
                            <span class="font-heading font-bold px-2 py-0.5 border border-slate-800 rounded text-xs uppercase bg-white shadow-sm inline-block mb-2">ID: ${r.id}</span>
                            <h1 class="text-4xl md:text-5xl font-heading font-bold text-[#1e293b] mb-1">${r.title}</h1>
                            <p class="text-xl text-slate-500 font-bold">${r.subtitle}</p>
                        </div>
                    </div>

                    <div class="lg:col-span-4 space-y-4">
                        <div class="card-neo bg-white overflow-hidden">
                            <div class="bg-[#1e293b] p-3 flex items-center gap-2 text-white font-heading font-bold">
                                <i data-lucide="shopping-bag" class="w-5 h-5"></i> Loadout
                            </div>
                            <div class="p-5 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNmMmYyZjIiLz4KPC9zdmc+')]">
                                ${ingredients}
                            </div>
                        </div>
                        
                        <div class="card-neo bg-slate-50 p-4 border-slate-300">
                             <h3 class="font-heading text-lg text-[#2979FF] mb-3 flex items-center gap-2 border-b border-slate-200 pb-2">
                                <i data-lucide="book-open" class="w-5 h-5"></i> Vocab
                             </h3>
                             <div class="space-y-2">
                                ${(r.vocab || []).map(v => `<div class="bg-white border border-slate-200 p-2 rounded-lg text-sm shadow-sm"><strong class="${v.color.replace('text-', 'text-')}">${v.word}</strong>: ${v.def}</div>`).join('')}
                             </div>
                        </div>
                    </div>

                    <div class="lg:col-span-8">
                        ${steps}
                        <div class="text-center p-8 border-[3px] border-dashed border-slate-300 rounded-2xl bg-slate-50/50 mt-4">
                            <h3 class="font-heading text-xl text-slate-400 font-bold">Mission Complete?</h3>
                            <p class="text-slate-500 font-bold text-sm">Call the teacher for inspection!</p>
                        </div>
                    </div>
                </div>
            </div>`;

            window.scrollTo(0,0);
            lucide.createIcons();
        }

        initApp();
    </script>
</body>
</html>