<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English 1 Batam - Cookbook OS v2</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* ============================================
           DESIGN TOKENS: "English 1 Batam"
           ============================================ */
        :root {
            /* Core Palette */
            --c-pink: #FF6B95;
            --c-orange: #FF8C42;
            --c-green: #00E676;
            --c-blue: #2979FF;
            --c-dark: #1e293b;
            --c-chalk: #f8fafc;
            
            /* UI Variables */
            --border-thick: 3px;
            --shadow-base: 4px 4px 0px var(--c-dark);
            --shadow-deep: 8px 8px 0px var(--c-dark);
            --shadow-pressed: 0px 0px 0px var(--c-dark);
            --radius-main: 16px;
        }

        /* Base Settings */
        body {
            background-color: #f0f4f8;
            /* Graph Paper Background */
            background-image: 
                linear-gradient(rgba(30, 41, 59, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 41, 59, 0.05) 1px, transparent 1px);
            background-size: 32px 32px;
            font-family: 'Nunito', sans-serif;
            color: var(--c-dark);
            overflow-y: scroll;
        }

        h1, h2, h3, .font-display { font-family: 'Fredoka', sans-serif; }

        /* ============================================
           COMPONENTS
           ============================================ */
        
        /* The "OS Window" Container */
        .os-window {
            background: var(--c-chalk);
            border: var(--border-thick) solid var(--c-dark);
            border-radius: 20px;
            box-shadow: var(--shadow-deep);
            max-width: 1200px;
            margin: 2rem auto;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 85vh;
        }

        .os-header {
            background: var(--c-dark);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: var(--border-thick) solid var(--c-dark);
        }

        /* Buttons */
        .btn-retro {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-family: 'Fredoka', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.5rem 1rem;
            background: white;
            color: var(--c-dark);
            border: var(--border-thick) solid var(--c-dark);
            box-shadow: var(--shadow-base);
            border-radius: 12px;
            transition: all 0.1s;
            cursor: pointer;
        }
        .btn-retro:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0 var(--c-dark); }
        .btn-retro:active { transform: translate(2px, 2px); box-shadow: var(--shadow-pressed); }

        .btn-filter.active {
            background: var(--c-blue);
            color: white;
            transform: translate(2px, 2px);
            box-shadow: var(--shadow-pressed);
        }

        /* Recipe Card - Trading Card Style */
        .card-recipe {
            background: white;
            border: var(--border-thick) solid var(--c-dark);
            border-radius: var(--radius-main);
            box-shadow: var(--shadow-base);
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .card-recipe:hover {
            transform: translateY(-4px) rotate(-1deg);
            box-shadow: var(--shadow-deep);
            z-index: 10;
        }
        
        .card-header {
            padding: 1rem;
            border-bottom: var(--border-thick) solid var(--c-dark);
            color: white;
        }

        /* Inputs */
        .input-retro {
            width: 100%;
            padding: 0.75rem 1rem;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            border: var(--border-thick) solid var(--c-dark);
            border-radius: 12px;
            box-shadow: inset 4px 4px 0 rgba(0,0,0,0.05);
            background: #f1f5f9;
        }
        .input-retro:focus {
            background: white;
            outline: none;
            border-color: var(--c-blue);
        }

        /* Custom Checkbox */
        .task-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .task-item:hover { border-color: var(--c-dark); }
        .task-item input {
            appearance: none;
            width: 24px;
            height: 24px;
            border: 3px solid var(--c-dark);
            border-radius: 6px;
            margin-right: 12px;
            position: relative;
            background: white;
            cursor: pointer;
        }
        .task-item input:checked { background: var(--c-green); }
        .task-item input:checked::after {
            content: '✔';
            position: absolute;
            color: white;
            font-size: 16px;
            top: -2px; left: 3px;
            font-weight: 900;
        }
        .task-item.checked {
            opacity: 0.5;
            text-decoration: line-through;
            background: #f8fafc;
        }

        /* Step Timeline */
        .step-node {
            position: relative;
            padding-left: 2rem;
            padding-bottom: 2rem;
            border-left: 4px dashed #cbd5e1;
            margin-left: 1rem;
        }
        .step-node:last-child { border-left: none; }
        .step-marker {
            position: absolute;
            left: -1.4rem;
            top: 0;
            width: 2.8rem;
            height: 2.8rem;
            background: white;
            border: var(--border-thick) solid var(--c-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Fredoka', sans-serif;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 2;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 14px; }
        ::-webkit-scrollbar-track { background: var(--c-chalk); border-left: 3px solid var(--c-dark); }
        ::-webkit-scrollbar-thumb { background: var(--c-blue); border: 3px solid var(--c-dark); border-radius: 99px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--c-pink); }

        /* Animation Classes */
        .animate-enter { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; opacity: 0; transform: scale(0.9); }
        @keyframes popIn { to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="p-4">

    <div class="os-window">
        <header class="os-header">
            <div class="flex items-center gap-3">
                <div class="flex gap-2">
                    <div class="w-4 h-4 rounded-full bg-pink-500 border-2 border-slate-900"></div>
                    <div class="w-4 h-4 rounded-full bg-yellow-400 border-2 border-slate-900"></div>
                    <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-slate-900"></div>
                </div>
                <div class="h-6 w-[2px] bg-slate-700 mx-2"></div>
                <h1 class="text-xl font-bold tracking-wide flex items-center gap-2">
                    <i data-lucide="chef-hat" class="w-6 h-6"></i>
                    COOKBOOK_OS <span class="bg-white text-slate-900 px-1.5 rounded text-xs py-0.5">v2.0</span>
                </h1>
            </div>
            <div class="text-sm font-bold opacity-75 hidden md:block">User: Student_01</div>
        </header>

        <main id="app-content" class="flex-1 p-6 md:p-8 bg-slate-50 relative">
            </main>
    </div>

    <script>
        // ==========================================
        // DATA: The 8 Compatible Missions
        // ==========================================
        const DB = [
          {
            "id": "apple-crumble",
            "title": "Mini Apple Crumble",
            "subtitle": "Dessert Mission",
            "desc": "A lesson in texture. Learn to contrast soft, warm stewed fruit with a crunchy, buttery topping.",
            "level": "Beginner",
            "color": "var(--c-pink)",
            "meta": [ { "label": "20m", "icon": "clock" }, { "label": "180°C", "icon": "flame" } ],
            "loadout": [
              { "group": "Fruit Core", "items": ["1 Fuji Apple", "1 tsp Brown Sugar", "1/4 tsp Cinnamon"] },
              { "group": "Crumble Armor", "items": ["2 Tbsp Flour", "1.5 Tbsp Cold Butter", "1 Tbsp Sugar", "1 Tbsp Oats"] }
            ],
            "steps": [
              { "num": 1, "title": "Precision Cutting", "desc": "Wash apple. Slice into 4 sections. Cut into strips, then 1cm cubes." },
              { "num": 2, "title": "Seasoning", "desc": "Place apples in foil cup. Toss with Brown Sugar and Cinnamon until wet." },
              { "num": 3, "title": "The Sand Texture", "desc": "Mix Flour & Sugar. Rub in Cold Butter with fingers until it looks like wet sand." },
              { "num": 4, "title": "Deployment", "desc": "Stir oats into sand. Pour loosely over apples. Bake 180°C for 25 mins." }
            ]
          },
          {
            "id": "tropical-fizz",
            "title": "Tropical Fizz",
            "subtitle": "Chemistry Mission",
            "desc": "A lesson in density and states of matter. Create a refreshing, gradient-colored drink.",
            "level": "Easy",
            "color": "var(--c-blue)",
            "meta": [ { "label": "5m", "icon": "clock" }, { "label": "No Heat", "icon": "snowflake" } ],
            "loadout": [
              { "group": "Solvents", "items": ["200ml Soda Water", "30ml Orange Syrup"] },
              { "group": "Solids", "items": ["1 Cup Ice Cubes", "Mint Leaves", "1 Lemon Wheel"] }
            ],
            "steps": [
              { "num": 1, "title": "Thermal Protection", "desc": "Fill glass to the BRIM with ice. Packed ice melts slower." },
              { "num": 2, "title": "Density Layer", "desc": "Pour Syrup over ice. Watch it sink (it is heavier than water)." },
              { "num": 3, "title": "Carbon Injection", "desc": "Tilt glass. Pour soda slowly down the side to keep the fizz." }
            ]
          },
          {
            "id": "rainbow-salad",
            "title": "Logic Salad",
            "subtitle": "Knife Skills",
            "desc": "Practice safe cutting techniques and color theory. No cooking required.",
            "level": "Beginner",
            "color": "var(--c-green)",
            "meta": [ { "label": "20m", "icon": "clock" }, { "label": "Safe", "icon": "shield" } ],
            "loadout": [
              { "group": "The Spectrum", "items": ["Strawberries", "Kiwi or Grapes", "Mango or Banana"] },
              { "group": "Dressing", "items": ["1 Tbsp Honey", "1 tsp Lime Juice", "Fresh Mint"] }
            ],
            "steps": [
              { "num": 1, "title": "Claw Grip", "desc": "Curl fingers like a claw. Cut strawberries into quarters." },
              { "num": 2, "title": "Uniformity", "desc": "Cut Kiwi/Mango into cubes the SAME size as strawberries." },
              { "num": 3, "title": "Emulsify", "desc": "Mix Honey and Lime fast until dissolved. Toss with fruit." }
            ]
          },
          {
            "id": "choco-cookies",
            "title": "Binary Cookies",
            "subtitle": "Baking Mission",
            "desc": "Chemistry in action. Turn dough into crispy-chewy discs of happiness.",
            "level": "Advanced",
            "color": "var(--c-blue)",
            "meta": [ { "label": "35m", "icon": "clock" }, { "label": "180°C", "icon": "flame" } ],
            "loadout": [
              { "group": "Wet Data", "items": ["100g Butter (Soft)", "1/2 Cup Sugar", "1 Egg"] },
              { "group": "Dry Data", "items": ["1.5 Cups Flour", "1/2 tsp Baking Soda", "Choco Chips"] }
            ],
            "steps": [
              { "num": 1, "title": "Creaming", "desc": "Mash butter & sugar for 3 mins until pale yellow." },
              { "num": 2, "title": "Bind It", "desc": "Add Egg. Mix vigorously until smooth." },
              { "num": 3, "title": "Spacing", "desc": "Fold in flour. Scoop golf balls 5cm apart on tray. Bake 12 mins." }
            ]
          },
          {
            "id": "pizza-proto",
            "title": "Pizza Protocol",
            "subtitle": "Assembly Mission",
            "desc": "Build a savory interface using bread as the base. Fast and reliable.",
            "level": "Easy",
            "color": "var(--c-orange)",
            "meta": [ { "label": "15m", "icon": "clock" }, { "label": "200°C", "icon": "flame" } ],
            "loadout": [
              { "group": "Base", "items": ["Thick Bread Slice", "2 Tbsp Pizza Sauce"] },
              { "group": "Toppings", "items": ["Mozzarella", "Pepperoni", "Oregano"] }
            ],
            "steps": [
              { "num": 1, "title": "Pre-Toast", "desc": "Bake plain bread for 3 mins at 200°C (Prevents sogginess)." },
              { "num": 2, "title": "Assembly", "desc": "Spread sauce. Add cheese to cover sauce. Add toppings." },
              { "num": 3, "title": "Melt", "desc": "Bake 5-8 mins until cheese bubbles." }
            ]
          },
          {
            "id": "mug-cake",
            "title": "Midnight Mug",
            "subtitle": "Speed Mission",
            "desc": "A single-serving cake cooked via radiation (microwaves). Instant reward.",
            "level": "Beginner",
            "color": "var(--c-pink)",
            "meta": [ { "label": "3m", "icon": "clock" }, { "label": "Micro", "icon": "zap" } ],
            "loadout": [
              { "group": "Dry", "items": ["2 Tbsp Flour", "2 Tbsp Sugar", "1 Tbsp Cocoa"] },
              { "group": "Wet", "items": ["2 Tbsp Milk", "1 Tbsp Oil", "Chocolate Chips"] }
            ],
            "steps": [
              { "num": 1, "title": "Compile", "desc": "Mix all Dry powders in mug. No white streaks!" },
              { "num": 2, "title": "Integrate", "desc": "Add Wet liquids. Mix bottom corners well." },
              { "num": 3, "title": "Zap", "desc": "Microwave 90 seconds. Let cool 1 minute." }
            ]
          },
          {
            "id": "potato-bat",
            "title": "Potato Battery",
            "subtitle": "Hybrid Mission",
            "desc": "Microwave the core, Oven the armor. The ultimate baked potato.",
            "level": "Easy",
            "color": "var(--c-green)",
            "meta": [ { "label": "15m", "icon": "clock" }, { "label": "Hybrid", "icon": "settings" } ],
            "loadout": [
              { "group": "Subject", "items": ["1 Large Potato", "Oil", "Salt"] },
              { "group": "Payload", "items": ["Butter", "Cheese", "Sour Cream"] }
            ],
            "steps": [
              { "num": 1, "title": "Venting", "desc": "Poke potato 5 times with fork (prevents explosion)." },
              { "num": 2, "title": "Core Cook", "desc": "Microwave 6 mins until soft." },
              { "num": 3, "title": "Crisp", "desc": "Oil skin. Oven at 200°C for 10 mins." }
            ]
          },
          {
            "id": "nacho-grid",
            "title": "Nacho Grid",
            "subtitle": "Sharing Mission",
            "desc": "A multi-layered defense system of crunch and cheese.",
            "level": "Beginner",
            "color": "var(--c-blue)",
            "meta": [ { "label": "15m", "icon": "clock" }, { "label": "180°C", "icon": "flame" } ],
            "loadout": [
              { "group": "Structure", "items": ["Corn Chips", "1 Cup Cheddar"] },
              { "group": "Variables", "items": ["Beans", "Jalapeños", "Salsa"] }
            ],
            "steps": [
              { "num": 1, "title": "Foundation", "desc": "Layer chips. Don't pile too high." },
              { "num": 2, "title": "Glue", "desc": "Cheese > Beans > Cheese > Peppers." },
              { "num": 3, "title": "Meltdown", "desc": "Bake 180°C for 8 mins. Serve immediately." }
            ]
          }
        ];

        // ==========================================
        // RENDER LOGIC
        // ==========================================
        const app = document.getElementById('app-content');
        let currentFilter = 'All';
        let searchQuery = '';

        function init() {
            renderHome();
        }

        function setFilter(lvl) {
            currentFilter = lvl;
            renderHome();
        }

        function handleSearch(e) {
            searchQuery = e.target.value.toLowerCase();
            renderHome();
        }

        // --- VIEW: HOME (GRID) ---
        function renderHome() {
            // Filter Data
            const filtered = DB.filter(r => {
                const matchLvl = currentFilter === 'All' || r.level === currentFilter;
                const matchTxt = r.title.toLowerCase().includes(searchQuery);
                return matchLvl && matchTxt;
            });

            // 1. Controls Section
            const controls = `
            <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-8">
                <div class="relative w-full md:w-96">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                    <input type="text" placeholder="Search mission protocols..." oninput="handleSearch(event)" value="${searchQuery}" class="input-retro pl-12">
                </div>
                <div class="flex gap-2 bg-white p-1.5 border-2 border-slate-900 rounded-xl shadow-[4px_4px_0_#1e293b]">
                    ${['All', 'Beginner', 'Easy', 'Advanced'].map(l => `
                        <button onclick="setFilter('${l}')" class="btn-filter px-3 py-1.5 rounded-lg text-sm font-bold font-display transition-all ${currentFilter === l ? 'active' : 'hover:bg-slate-100'}">${l}</button>
                    `).join('')}
                </div>
            </div>`;

            // 2. Grid Section
            const grid = `
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 pb-12">
                ${filtered.map((r, i) => `
                <div onclick="renderDetail('${r.id}')" class="card-recipe cursor-pointer animate-enter" style="animation-delay: ${i * 0.05}s">
                    <div class="card-header flex justify-between items-start" style="background:${r.color}">
                        <div class="bg-black/20 backdrop-blur-sm px-2 py-1 rounded text-xs font-bold uppercase tracking-wider">${r.subtitle}</div>
                        ${r.id === 'apple-crumble' ? '<i data-lucide="star" class="fill-white text-white w-5 h-5"></i>' : ''}
                    </div>
                    
                    <div class="p-5 flex flex-col h-full">
                        <h3 class="text-2xl font-display font-bold leading-none mb-2 text-slate-800">${r.title}</h3>
                        <div class="flex gap-2 mb-4">
                            ${r.meta.map(m => `
                                <span class="text-xs font-bold bg-slate-100 border border-slate-200 px-2 py-1 rounded text-slate-500 flex items-center gap-1">
                                    <i data-lucide="${m.icon}" class="w-3 h-3"></i> ${m.label}
                                </span>
                            `).join('')}
                        </div>
                        <p class="text-sm font-bold text-slate-400 line-clamp-3 mb-4">${r.desc}</p>
                        
                        <div class="mt-auto pt-4 border-t-2 border-dashed border-slate-100 flex justify-between items-center">
                            <span class="text-xs font-bold text-slate-400">ID: ${r.id.split('-')[0].toUpperCase()}</span>
                            <span class="w-8 h-8 rounded-full bg-slate-900 flex items-center justify-center text-white">
                                <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </span>
                        </div>
                    </div>
                </div>
                `).join('')}
            </div>`;

            app.innerHTML = controls + grid;
            
            // Re-focus logic
            const input = document.querySelector('input');
            if(input && searchQuery) { input.focus(); input.value = ''; input.value = searchQuery; }
            
            lucide.createIcons();
        }

        // --- VIEW: DETAIL ---
        function renderDetail(id) {
            const r = DB.find(x => x.id === id);
            
            // Generate Checklists
            const loadoutHtml = r.loadout.map(group => `
                <div class="mb-4">
                    <h4 class="font-display font-bold text-sm uppercase tracking-wider text-slate-400 mb-2">${group.group}</h4>
                    ${group.items.map((item, i) => `
                        <label class="task-item group">
                            <input type="checkbox" onclick="this.parentElement.classList.toggle('checked')">
                            <span class="font-bold text-slate-700 text-sm select-none group-hover:text-slate-900">${item}</span>
                        </label>
                    `).join('')}
                </div>
            `).join('');

            // Generate Steps
            const stepsHtml = r.steps.map(s => `
                <div class="step-node">
                    <div class="step-marker" style="color:${r.color}">${s.num}</div>
                    <div class="bg-white border-2 border-slate-200 p-4 rounded-xl shadow-sm hover:border-slate-800 transition-colors">
                        <h3 class="font-display font-bold text-lg text-slate-800 mb-1">${s.title}</h3>
                        <p class="text-slate-600 font-semibold leading-relaxed">${s.desc}</p>
                    </div>
                </div>
            `).join('');

            app.innerHTML = `
            <div class="animate-enter max-w-5xl mx-auto">
                <button onclick="renderHome()" class="btn-retro mb-6 text-xs">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i> Return to Grid
                </button>

                <div class="bg-white border-[3px] border-slate-900 rounded-2xl p-6 md:p-8 shadow-[8px_8px_0_#1e293b] mb-8 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-slate-50 rounded-bl-full -mr-8 -mt-8 z-0"></div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="px-3 py-1 rounded-lg text-white text-xs font-bold uppercase tracking-wider shadow-sm" style="background:${r.color}">${r.level}</span>
                            <span class="text-slate-400 font-bold text-xs uppercase tracking-widest">${r.subtitle}</span>
                        </div>
                        <h1 class="text-4xl md:text-6xl font-display font-bold text-slate-900 mb-4">${r.title}</h1>
                        <p class="text-lg md:text-xl font-bold text-slate-500 max-w-2xl">${r.desc}</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    <div class="lg:col-span-4">
                        <div class="sticky top-6">
                            <div class="bg-slate-900 text-white p-3 rounded-t-xl font-display font-bold flex items-center gap-2 border-2 border-slate-900">
                                <i data-lucide="clipboard-list" class="w-5 h-5"></i> MISSION LOADOUT
                            </div>
                            <div class="bg-white border-x-2 border-b-2 border-slate-900 p-4 rounded-b-xl shadow-[4px_4px_0_#cbd5e1]">
                                ${loadoutHtml}
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-8">
                        <div class="pl-4 pt-2">
                            ${stepsHtml}
                            
                            <div class="step-node !border-l-0">
                                <div class="step-marker bg-slate-900 text-white border-slate-900">
                                    <i data-lucide="check" class="w-5 h-5"></i>
                                </div>
                                <div class="p-6 border-4 border-dashed border-green-400 bg-green-50 rounded-2xl text-center">
                                    <h3 class="font-display font-bold text-xl text-green-700 mb-1">Mission Complete!</h3>
                                    <p class="text-green-600 font-bold text-sm">Call the instructor for verification.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>`;
            
            window.scrollTo(0,0);
            lucide.createIcons();
        }

        init();
    </script>
</body>
</html>