<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Unscramble (Simple Mode)</title>
    
    <!-- Fonts from Activity Hub -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        // Tailwind config copied from main index.html for consistent styling
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        pink: '#FF6B95',
                        orange: '#FF8C42',
                        green: '#00E676',
                        blue: '#2979FF',
                        dark: '#0f172a',
                        panel: '#1e293b',
                        surface: '#334155'
                    },
                    fontFamily: {
                        heading: ['Bebas Neue', 'sans-serif'],
                        body: ['Nunito', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Global styles matching the Activity Hub background and glass effect */
        body {
            background-color: #0f172a;
            background-image: 
                radial-gradient(at 0% 0%, rgba(41, 121, 255, 0.1) 0px, transparent 50%), 
                radial-gradient(at 100% 100%, rgba(255, 107, 149, 0.1) 0px, transparent 50%);
            background-attachment: fixed;
            font-family: 'Nunito', sans-serif;
            color: white;
            text-align: center;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        /* Specific styles for the game elements */
        .message-box {
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* rounded-full */
            font-weight: 700;
            transition: all 0.3s;
        }

        .message-box.info {
            background-color: #334155;
            color: #94a3b8;
        }

        .message-box.win {
            background-color: rgba(0, 230, 118, 0.2); /* green/20 */
            color: #00E676; /* green */
        }

        .btn-base {
            padding: 0.75rem 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 0.05em;
            transition: transform 0.1s, box-shadow 0.1s, background-color 0.1s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-base:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 10px rgba(0, 0, 0, 0.2);
        }

        .btn-base:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-blue {
            background-color: #2979FF; /* blue */
            color: white;
        }
        .btn-blue:hover:not(:disabled) {
            background-color: #5397FF;
        }

        .btn-orange {
            background-color: #FF8C42; /* orange */
            color: white;
        }
        .btn-orange:hover:not(:disabled) {
            background-color: #FFa565;
        }

        /* Styling for the main unscrambled word display */
        #scrambled-word-el {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 8rem; /* Custom large size */
            letter-spacing: 0.1em;
            color: #FF6B95; /* pink */
            text-shadow: 0 0 15px rgba(255, 107, 149, 0.4);
        }

        /* Input styling */
        textarea {
            resize: none;
            border: 1px solid #334155;
            background-color: #0f172a;
            color: white;
        }
        textarea:focus {
            outline: none;
            border-color: #2979FF;
            box-shadow: 0 0 0 2px rgba(41, 121, 255, 0.2);
        }
    </style>
</head>

<body class="dark min-h-screen flex flex-col items-center justify-center py-12">
    <div class="max-w-4xl w-full px-4">

        <!-- Teacher Console Section -->
        <div id="teacher-console-el" class="glass-panel rounded-2xl p-8 max-w-lg mx-auto shadow-2xl animate-fade-in">
            <h1 class="text-3xl font-heading tracking-wider text-blue mb-4">Setup Simple Unscramble</h1>
            <p class="text-gray-400 mb-6">Enter the words students will unscramble, separated by commas. (Min. 3 letters per word)</p>

            <div class="mb-4">
                <textarea id="word-list-input" rows="6" placeholder="e.g., apple, banana, chair, table, pencil"
                    class="w-full p-4 rounded-xl text-lg transition-all"></textarea>
            </div>
            
            <p id="console-message" class="text-sm text-center mb-6 text-gray-400">&nbsp;</p>

            <button id="start-game-btn" class="btn-base btn-blue w-full">START GAME</button>
        </div>

        <!-- Game Section -->
        <div id="game-section-el" class="glass-panel rounded-2xl p-8 shadow-2xl animate-fade-in" style="display: none;">
            <h1 class="text-3xl font-heading tracking-wider mb-8 text-green">Unscramble the Word!</h1>

            <!-- Message Box -->
            <div class="mb-8">
                <p id="message-box" class="message-box info mx-auto">Click 'Next Word' to begin.</p>
            </div>

            <!-- Scrambled Word Display -->
            <div class="mb-10 p-4 min-h-[140px] flex items-center justify-center">
                <h2 id="scrambled-word-el" class="text-8xl font-bold uppercase select-none"></h2>
            </div>

            <!-- Button Controls -->
            <div class="flex flex-col md:flex-row gap-4">
                <button id="reveal-btn" class="btn-base btn-orange flex-1" disabled>REVEAL ANSWER</button>
                <button id="next-btn" class="btn-base btn-blue flex-1">NEXT WORD</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const teacherConsoleEl = document.getElementById('teacher-console-el');
        const gameSectionEl = document.getElementById('game-section-el');
        const wordListInputEl = document.getElementById('word-list-input');
        const startGameBtn = document.getElementById('start-game-btn');
        const consoleMessageEl = document.getElementById('console-message');

        const scrambledWordEl = document.getElementById('scrambled-word-el');
        const messageBoxEl = document.getElementById('message-box');
        const revealBtn = document.getElementById('reveal-btn');
        const nextBtn = document.getElementById('next-btn');

        // Game State
        let words = [];
        let currentWordIndex = -1;
        let currentWord = '';
        let gameActive = false;

        // Utility: Shuffles an array (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Utility: Scrambles a single word
        function scrambleWord(word) {
            // Convert the word to an array of characters
            let chars = word.split('');
            let scrambled = '';
            
            // Loop until the scrambled word is different from the original
            while (scrambled === word || scrambled.length === 0) {
                // Shuffle the characters
                shuffleArray(chars);
                scrambled = chars.join('');
            }
            return scrambled;
        }

        // Starts a new round
        function startRound() {
            if (words.length === 0) {
                // If the word list is exhausted, go back to the console
                scrambledWordEl.textContent = 'GAME OVER';
                messageBoxEl.textContent = 'All words used! Restart to play again.';
                messageBoxEl.className = 'message-box win';
                
                revealBtn.disabled = true;
                nextBtn.disabled = true;

                // Optionally show the console again for setup
                setTimeout(() => {
                    gameSectionEl.style.display = 'none';
                    teacherConsoleEl.style.display = 'block';
                }, 3000); 

                return;
            }

            // Get the next word (always take from index 0 after shuffle/splice)
            currentWord = words.splice(0, 1)[0];
            const scrambled = scrambleWord(currentWord);

            scrambledWordEl.textContent = scrambled.toUpperCase();
            
            messageBoxEl.textContent = `${words.length + 1} words remaining. Unscramble the word!`;
            messageBoxEl.className = 'message-box info';

            revealBtn.disabled = false;
            nextBtn.disabled = true;
            gameActive = true;
        }

        // Reveals the correct answer
        function revealAnswer() {
            if (!gameActive) return;

            scrambledWordEl.textContent = currentWord.toUpperCase();

            // Update messages and button states
            messageBoxEl.textContent = `The correct word is: ${currentWord.toUpperCase()}`;
            messageBoxEl.className = 'message-box win';

            revealBtn.disabled = true;
            nextBtn.disabled = false;
            gameActive = false;
        }

        // Event listeners for the game
        revealBtn.addEventListener('click', revealAnswer);
        
        nextBtn.addEventListener('click', () => {
            startRound();
        });

        // Event listener for the teacher console
        startGameBtn.addEventListener('click', () => {
            // Filter out empty strings and words shorter than 3 letters
            const rawWords = wordListInputEl.value.split(',').map(word => word.trim().toLowerCase()).filter(word => word.length >= 3);
            
            if (rawWords.length === 0) {
                consoleMessageEl.textContent = 'Please enter at least one word with 3 or more letters.';
                consoleMessageEl.className = 'text-sm text-center mb-6 text-pink'; /* Use pink for error */
                return;
            }

            words = rawWords;
            shuffleArray(words); // Shuffle the words array
            
            // Hide the console and show the game
            teacherConsoleEl.style.display = 'none';
            gameSectionEl.style.display = 'block';

            // Reset console message on success
            consoleMessageEl.className = 'text-sm text-center mb-6 text-gray-400';
            consoleMessageEl.textContent = '\u00a0'; // non-breaking space to keep height

            startRound();
        });

        // Initialize Lucide icons
        window.onload = function() {
            lucide.createIcons();
        };

    </script>

</body>
</html>