<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word List Randomizer Tool</title>
    
    <!-- Fonts: Bebas Neue (Headings), Nunito (Body) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    
    <!-- Icons (for copy icon and theme toggle) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tailwind CSS with Game Hub Configuration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        pink: '#FF6B95',
                        orange: '#FF8C42',
                        green: '#00E676',
                        blue: '#2979FF',
                        dark: '#0f172a',    // Main background
                        panel: '#1e293b',   // Card background
                        surface: '#334155'  // Border/Detail color
                    },
                    fontFamily: {
                        heading: ['Bebas Neue', 'sans-serif'],
                        body: ['Nunito', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* General Body Styling for Game Hub Look */
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f4f8; /* Light mode default */
            transition: background-color 0.5s, color 0.3s;
        }
        
        /* Dark Mode Styling */
        html.dark body {
            background-color: #0f172a; /* dark */
            color: #f8fafc; /* Light text in dark mode */
        }

        /* Input specific dark mode styling */
        html.dark textarea, html.dark input {
            background-color: #1e293b;
            border-color: #334155;
            color: #f8fafc;
        }

        /* Toast Notification Styling */
        .toast-notification {
            z-index: 1000;
        }
        
        /* Custom Header Colors (For dynamic list backgrounds) */
        .list-header-1 { background-color: #FF6B95; } /* Pink */
        .list-header-2 { background-color: #FF8C42; } /* Orange */
        .list-header-3 { background-color: #00E676; } /* Green */
        .list-header-4 { background-color: #2979FF; } /* Blue */
        .list-header-5 { background-color: #f73f75; } /* Darker Pink */
        .list-header-6 { background-color: #f7731f; } /* Darker Orange */
        .list-header-7 { background-color: #00b85e; } /* Darker Green */
        .list-header-8 { background-color: #2161cc; } /* Darker Blue */

        /* Enhanced List Card Look */
        .list-card {
            transition: all 0.3s ease;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .dark .list-card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body class="font-body min-h-screen p-4 sm:p-8">

    <div class="max-w-5xl mx-auto bg-white dark:bg-panel shadow-2xl rounded-2xl p-6 md:p-10 border border-surface/50">
        <header class="text-center mb-10 relative">
            <!-- Theme Toggle Button -->
            <button id="theme-toggle" aria-label="Toggle theme" class="absolute top-0 right-0 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-white/10 transition-colors text-gray-600 dark:text-yellow-400">
                <i data-lucide="sun" id="sun-icon" class="w-6 h-6 hidden"></i>
                <i data-lucide="moon" id="moon-icon" class="w-6 h-6 hidden"></i>
            </button>

            <h1 class="text-4xl sm:text-5xl font-heading tracking-widest bg-clip-text text-transparent bg-gradient-to-r from-blue to-pink inline-block">
                WORD LIST RANDOMIZER
            </h1>
            <p class="mt-3 text-lg text-gray-600 dark:text-gray-300">
                Instantly create shuffled versions of your word bank for differentiated activities.
            </p>
        </header>

        <!-- Controls Area -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <!-- Number of Lists Input -->
            <div class="col-span-1">
                 <label for="listCount" class="block text-xl font-heading tracking-wide mb-2 text-gray-700 dark:text-gray-200">
                    LIST COUNT
                </label>
                <input
                    type="number"
                    id="listCount"
                    value="8"
                    min="1"
                    max="8"
                    class="w-full p-3 border-2 border-surface/30 rounded-xl focus:ring-4 focus:ring-green/30 focus:border-green transition duration-200 text-lg shadow-inner text-center font-bold"
                />
            </div>

            <!-- Word Bank Input (takes remaining space) -->
            <div class="col-span-1 md:col-span-3">
                <label for="wordInput" class="block text-xl font-heading tracking-wide mb-2 text-gray-700 dark:text-gray-200">
                    WORD BANK <span class="text-sm font-body font-light text-gray-500 dark:text-gray-400">(Separate words with a comma)</span>
                </label>
                <textarea
                    id="wordInput"
                    rows="4"
                    placeholder="e.g., vocabulary, grammar, sentence, paragraph, essay, punctuation, reading, writing"
                    class="w-full p-4 border-2 border-surface/30 rounded-xl focus:ring-4 focus:ring-green/30 focus:border-green transition duration-200 resize-none text-lg shadow-inner"
                ></textarea>
            </div>
        </div>


        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-10">
            <!-- Generate Button -->
            <button
                id="generateButton"
                class="px-8 py-3 w-full sm:w-auto bg-gradient-to-r from-orange to-pink text-white font-bold text-lg rounded-xl shadow-lg shadow-orange/30 hover:shadow-xl hover:shadow-pink/40 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-orange/50 transform hover:-translate-y-1 flex items-center justify-center gap-2"
            >
                <i data-lucide="shuffle" class="w-5 h-5"></i> GENERATE LISTS
            </button>

            <!-- Copy Button (Hidden initially) -->
            <button
                id="copyButton"
                class="px-8 py-3 w-full sm:w-auto bg-panel/80 dark:bg-surface/50 border-2 border-surface/50 text-gray-800 dark:text-white font-bold text-lg rounded-xl shadow-md hover:bg-surface/70 hover:border-surface transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-surface/30 transform hover:-translate-y-1 hidden flex items-center justify-center gap-2"
            >
                <i data-lucide="clipboard-copy" class="w-5 h-5"></i> COPY ALL
            </button>
        </div>

        <!-- Results Area -->
        <div id="resultsContainer">
            <div id="listsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Lists will be dynamically added here -->
            </div>
        </div>
    </div>

    <script>
        const generateButton = document.getElementById('generateButton');
        const copyButton = document.getElementById('copyButton');
        const wordInput = document.getElementById('wordInput');
        const listCountInput = document.getElementById('listCount');
        const listsGrid = document.getElementById('listsGrid');
        
        // --- THEME LOGIC START ---
        const html = document.documentElement;
        const toggleBtn = document.getElementById('theme-toggle');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');

        function updateThemeIcon() {
            const isDark = html.classList.contains('dark');
            sunIcon.classList.toggle('hidden', !isDark);
            moonIcon.classList.toggle('hidden', isDark);
        }

        function toggleTheme() {
            const isDark = html.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateThemeIcon();
        }

        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            
            // Check saved preference or system preference (prefers-color-scheme)
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                html.classList.add('dark');
            } else {
                html.classList.remove('dark');
            }
            updateThemeIcon();
        }
        // --- THEME LOGIC END ---

        // Color classes mapped directly to CSS classes for Game Hub style
        const headerColors = [
            'list-header-1', // Pink
            'list-header-2', // Orange
            'list-header-3', // Green
            'list-header-4', // Blue
            'list-header-5', // Darker Pink
            'list-header-6', // Darker Orange
            'list-header-7', // Darker Green
            'list-header-8'  // Darker Blue
        ];

        // Fisher-Yates Shuffle Algorithm
        function shuffleArray(array) {
            let newArray = [...array];
            let currentIndex = newArray.length;
            let randomIndex;

            while (currentIndex !== 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [newArray[currentIndex], newArray[randomIndex]] = [
                    newArray[randomIndex], newArray[currentIndex]
                ];
            }
            return newArray;
        }

        // Toast Notification (Game Hub style)
        function showToast(message, isError = false) {
            // Remove existing toasts
            const existing = document.querySelector('.toast-notification');
            if (existing) existing.remove();

            const toast = document.createElement('div');
            const bgColor = isError ? 'bg-red-600' : 'bg-green-600';
            const shadow = isError ? 'shadow-red-500/50' : 'shadow-green-500/50';

            toast.className = `toast-notification fixed bottom-6 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-full ${bgColor} text-white font-body font-extrabold shadow-xl ${shadow} z-50 transition-all duration-500 translate-y-20 opacity-0`;
            toast.textContent = message;
            
            document.body.appendChild(toast);

            // Animate in
            requestAnimationFrame(() => {
                toast.classList.remove('translate-y-20', 'opacity-0');
            });

            // Animate out
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        function generateLists() {
            const input = wordInput.value.trim();
            let count = parseInt(listCountInput.value, 10);
            
            // Validate word input
            if (!input) {
                showToast("Please enter some words first!", true);
                return;
            }

            const words = input.split(',')
                .map(w => w.trim())
                .filter(w => w.length > 0);

            if (words.length < 2) {
                showToast("Please enter at least two unique words.", true);
                return;
            }
            
            // Validate count input
            if (isNaN(count) || count < 1 || count > 8) {
                count = Math.min(Math.max(1, count), 8); // Clamp value
                listCountInput.value = count; // Update display
                showToast(`List count adjusted to ${count} (Max 8).`, true);
            }

            // Clear previous results
            listsGrid.innerHTML = '';
            
            // Show copy button
            copyButton.classList.remove('hidden');

            // Adjust grid columns based on count for better visual density
            // Taildwind classes: lg:grid-cols-1, lg:grid-cols-2, lg:grid-cols-3, lg:grid-cols-4
            let gridColsClass = '';
            if (count === 1) gridColsClass = 'lg:grid-cols-1';
            else if (count === 2) gridColsClass = 'lg:grid-cols-2';
            else if (count === 3) gridColsClass = 'lg:grid-cols-3';
            else gridColsClass = 'lg:grid-cols-4'; // Default for 4-8 lists

            listsGrid.className = `grid grid-cols-1 sm:grid-cols-2 ${gridColsClass} gap-6`;


            // Generate Lists
            for (let i = 0; i < count; i++) {
                const shuffledWords = shuffleArray(words);
                const colorClass = headerColors[i % headerColors.length];
                const listNumber = i + 1;

                // Card Container
                const card = document.createElement('div');
                card.className = "list-card bg-white dark:bg-panel rounded-xl overflow-hidden hover:shadow-2xl transition-shadow duration-300 flex flex-col border border-surface/50";

                // Header
                const header = document.createElement('div');
                header.className = `${colorClass} p-3 text-center`;
                header.innerHTML = `<h3 class="text-white font-heading text-xl tracking-wider">LIST ${listNumber}</h3>`;

                // List Content
                const list = document.createElement('ol');
                list.className = "p-5 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 flex-grow text-lg";
                
                shuffledWords.forEach(word => {
                    const li = document.createElement('li');
                    li.textContent = word;
                    li.className = "pl-1 border-b border-gray-100 dark:border-surface/50 last:border-0 pb-1 last:pb-0";
                    list.appendChild(li);
                });

                card.appendChild(header);
                card.appendChild(list);
                listsGrid.appendChild(card);
            }
            
            showToast(`${count} Randomized lists generated!`);
        }

        function copyAllLists() {
            if (listsGrid.children.length === 0) return;

            let textToCopy = "";
            const lists = listsGrid.querySelectorAll('.list-card'); // Select cards

            lists.forEach((card, index) => {
                textToCopy += `LIST #${index + 1}\n`;
                const items = card.querySelectorAll('li');
                items.forEach((item, i) => {
                    // Extract text content, stripping the list number (which is added by the list-inside class)
                    const itemText = item.textContent.replace(/^\s*\d+\.\s*/, '').trim(); 
                    textToCopy += `${i + 1}. ${itemText}\n`;
                });
                textToCopy += "\n";
            });

            // Robust copy method using execCommand
            copyTextToClipboard(textToCopy);
        }

        // Robust copy method using execCommand (works in iframe environments)
        function copyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            
            // Minimal styling to keep it off-screen but selectable
            textArea.style.position = "fixed";
            textArea.style.top = "0";
            textArea.style.left = "-9999px"; 
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast("All lists copied to clipboard!");
                } else {
                    showToast("Failed to copy.", true);
                }
            } catch (err) {
                console.error("Copy failed: ", err);
                showToast("Failed to copy.", true);
            }

            document.body.removeChild(textArea);
        }

        generateButton.addEventListener('click', generateLists);
        copyButton.addEventListener('click', copyAllLists);
        toggleBtn.addEventListener('click', toggleTheme); // Attach theme toggle listener
        
        // Initial setup
        window.onload = function() {
            initializeTheme(); // 1. Initialize Theme before icons
            lucide.createIcons(); // 2. Create Lucide icons after theme init
        };
    </script>
</body>
</html>