<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English 1 Randomizer</title>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: {
                extend: {
                    colors: {
                        e1: {
                            pink: '#FF6B95',   /* Playful */
                            orange: '#FF8C42', /* Energy */
                            green: '#00E676',  /* Success */
                            blue: '#2979FF',   /* Logic */
                            dark: '#1e293b',   /* Slate 800 - Borders/Text */
                            chalk: '#f8fafc',  /* Backgrounds */
                        }
                    },
                    fontFamily: {
                        heading: ['Fredoka', 'sans-serif'],
                        body: ['Nunito', 'sans-serif'],
                    },
                    borderWidth: {
                        '3': '3px',
                    },
                    boxShadow: {
                        'neo': '4px 4px 0px 0px rgba(30, 41, 59, 1)', 
                        'neo-sm': '2px 2px 0px 0px rgba(30, 41, 59, 1)',
                        'none': '0px 0px 0px 0px rgba(0,0,0,0)',
                    }
                }
            }
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Nunito', sans-serif;
            background-color: #f8fafc; /* Chalk */
            color: #1e293b;
            
            /* Graph Paper Grid Pattern */
            background-image: 
                linear-gradient(rgba(30, 41, 59, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 41, 59, 0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            min-height: 100vh;
        }

        /* --- Neo-Brutalism Classes --- */
        .card-neo {
            background-color: white;
            border: 3px solid #1e293b;
            border-radius: 1.5rem; /* rounded-3xl */
            box-shadow: 4px 4px 0px 0px rgba(30, 41, 59, 1);
        }

        .btn-neo {
            font-family: 'Fredoka', sans-serif;
            font-weight: 600;
            border: 3px solid #1e293b;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 4px 4px 0px 0px rgba(30, 41, 59, 1);
            transition: all 0.1s ease;
        }
        .btn-neo:hover {
            transform: translate(-1px, -1px);
            box-shadow: 6px 6px 0px 0px rgba(30, 41, 59, 1);
        }
        .btn-neo:active {
            transform: translate(4px, 4px);
            box-shadow: 0px 0px 0px 0px rgba(30, 41, 59, 1);
        }

        .input-neo {
            background-color: #f8fafc;
            border: 3px solid #1e293b;
            border-radius: 1rem;
            padding: 1rem;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            transition: all 0.2s;
            resize: none;
        }
        .input-neo:focus {
            outline: none;
            background-color: white;
            box-shadow: 4px 4px 0px 0px #2979FF;
            border-color: #2979FF;
        }

        /* Animation */
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop {
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border: 3px solid #1e293b; border-radius: 99px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="flex flex-col min-h-screen pb-12">

    <header class="w-full bg-white border-b-3 border-e1-dark sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="bg-e1-pink border-3 border-e1-dark w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-neo-sm transform -rotate-3">
                    <i data-lucide="dices" class="w-7 h-7 stroke-[2.5px]"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-heading font-bold text-e1-dark leading-none">Randomizer</h1>
                    <div class="text-sm font-bold text-e1-blue bg-blue-100 px-2 rounded border-2 border-e1-blue inline-block mt-1">English 1 Batam</div>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <button onclick="copyAllLists()" class="hidden md:flex btn-neo bg-white px-4 py-2 text-sm items-center gap-2 hover:bg-slate-50">
                    <i data-lucide="copy" class="w-4 h-4"></i> Copy All
                </button>
            </div>
        </div>
    </header>

    <main class="w-full max-w-7xl mx-auto p-6 md:p-8 animate-pop">
        
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <div class="lg:col-span-4 flex flex-col gap-6">
                
                <div class="card-neo p-6 flex flex-col gap-4 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-4 bg-e1-orange border-b-3 border-e1-dark"></div>
                    
                    <div class="mt-2 flex justify-between items-center">
                         <label class="font-heading font-bold text-xl text-e1-dark">Word List</label>
                         <button onclick="clearInput()" class="text-xs font-bold text-slate-400 hover:text-red-500 hover:underline">Clear</button>
                    </div>

                    <textarea id="wordInput" rows="8" class="input-neo text-lg" placeholder="Type names or words here...&#10;Apple&#10;Banana&#10;Cherry"></textarea>
                    
                    <div class="flex flex-wrap gap-2">
                        <button onclick="loadPreset('verbs')" class="btn-neo bg-blue-100 hover:bg-e1-blue hover:text-white px-3 py-1 text-xs border-2">Verbs</button>
                        <button onclick="loadPreset('animals')" class="btn-neo bg-orange-100 hover:bg-e1-orange hover:text-white px-3 py-1 text-xs border-2">Animals</button>
                        <button onclick="loadPreset('classroom')" class="btn-neo bg-green-100 hover:bg-e1-green hover:text-white px-3 py-1 text-xs border-2">Class</button>
                        <button onclick="loadPreset('colors')" class="btn-neo bg-pink-100 hover:bg-e1-pink hover:text-white px-3 py-1 text-xs border-2">Colors</button>
                    </div>
                </div>

                <div class="card-neo p-6 flex flex-col gap-4">
                    <label class="font-heading font-bold text-xl text-e1-dark flex items-center gap-2">
                        <i data-lucide="layers" class="w-5 h-5 text-e1-blue"></i>
                        How many groups?
                    </label>
                    
                    <div class="flex items-center gap-3">
                        <button onclick="adjustCount(-1)" class="w-14 h-14 btn-neo bg-white hover:bg-red-50 flex items-center justify-center text-e1-pink">
                            <i data-lucide="minus" class="w-8 h-8 stroke-[3px]"></i>
                        </button>
                        
                        <div class="flex-1 bg-e1-dark rounded-xl border-3 border-e1-dark h-14 flex items-center justify-center relative overflow-hidden">
                            <input type="number" id="listCount" value="4" min="1" max="12" class="w-full h-full bg-slate-800 text-white text-3xl font-heading font-bold text-center outline-none border-none">
                        </div>

                        <button onclick="adjustCount(1)" class="w-14 h-14 btn-neo bg-white hover:bg-green-50 flex items-center justify-center text-e1-green">
                            <i data-lucide="plus" class="w-8 h-8 stroke-[3px]"></i>
                        </button>
                    </div>

                    <button id="generateButton" class="mt-2 w-full btn-neo bg-e1-blue text-white py-4 text-2xl tracking-wide flex items-center justify-center gap-3 hover:bg-blue-600">
                        <i data-lucide="shuffle" class="w-7 h-7 stroke-[3px]"></i> MIX IT UP!
                    </button>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div id="emptyState" class="h-full min-h-[400px] flex flex-col items-center justify-center text-center p-8 bg-white/50 border-3 border-dashed border-slate-300 rounded-3xl">
                    <div class="bg-white p-6 rounded-full border-3 border-e1-dark shadow-neo mb-6 transform rotate-3">
                        <i data-lucide="layout-grid" class="w-16 h-16 text-e1-orange stroke-[2px]"></i>
                    </div>
                    <h3 class="text-3xl font-heading font-bold text-e1-dark mb-2">Ready to Sort</h3>
                    <p class="text-lg font-body text-slate-500 max-w-md">
                        Enter your list on the left and click "Mix It Up" to create your groups.
                    </p>
                </div>

                <div id="listsGrid" class="hidden grid grid-cols-1 md:grid-cols-2 gap-6 pb-20">
                    </div>
            </div>

        </div>
    </main>

    <script>
        // --- CONFIG & STATE ---
        const LS_KEY_WORDS = 'e1_randomizer_words';
        const LS_KEY_RESULTS = 'e1_randomizer_results';
        
        const presets = {
            verbs: "Run\nJump\nSwim\nFly\nRead\nWrite\nSing\nDance\nPlay\nSleep\nEat\nDrink\nWalk\nTalk\nListen\nWatch",
            adjectives: "Happy\nSad\nBig\nSmall\nFast\nSlow\nHot\nCold\nHungry\nThirsty\nLoud\nQuiet\nStrong\nWeak",
            animals: "Lion\nTiger\nElephant\nGiraffe\nMonkey\nZebra\nBear\nWolf\nFox\nRabbit\nCat\nDog\nBird\nSnake",
            colors: "Red\nOrange\nYellow\nGreen\nBlue\nPurple\nPink\nBlack\nWhite\nBrown\nGrey",
            classroom: "Pencil\nPen\nEraser\nRuler\nNotebook\nBook\nBackpack\nDesk\nChair\nWhiteboard\nMarker"
        };

        // English 1 Palette Cycle
        const themeCycle = [
            { bg: 'bg-e1-pink', border: 'border-e1-pink', text: 'text-e1-pink' },
            { bg: 'bg-e1-orange', border: 'border-e1-orange', text: 'text-e1-orange' },
            { bg: 'bg-e1-green', border: 'border-e1-green', text: 'text-e1-green' },
            { bg: 'bg-e1-blue', border: 'border-e1-blue', text: 'text-e1-blue' }
        ];

        // --- DOM ---
        const wordInput = document.getElementById('wordInput');
        const listCountInput = document.getElementById('listCount');
        const listsGrid = document.getElementById('listsGrid');
        const emptyState = document.getElementById('emptyState');

        // --- LOGIC ---

        function loadPreset(key) {
            if (presets[key]) {
                wordInput.value = presets[key];
                saveWords(wordInput.value);
                showToast(`Loaded ${key}`);
            }
        }

        function clearInput() {
            wordInput.value = '';
            saveWords('');
            wordInput.focus();
        }

        function adjustCount(delta) {
            let current = parseInt(listCountInput.value) || 4;
            let newVal = current + delta;
            if (newVal < 1) newVal = 1;
            if (newVal > 12) newVal = 12;
            listCountInput.value = newVal;
        }

        function saveWords(text) {
             try { localStorage.setItem(LS_KEY_WORDS, text); } catch (e) {}
        }

        function loadWords() {
            try {
                const saved = localStorage.getItem(LS_KEY_WORDS);
                if (saved) wordInput.value = saved;
            } catch (e) {}
        }

        function shuffle(array) {
            let newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }

        function generateLists() {
            const text = wordInput.value.trim();
            saveWords(text);

            if (!text) {
                showToast("Please enter some words!", true);
                return;
            }

            // Split by newline or comma
            const words = text.split(/[\n,]+/).map(w => w.trim()).filter(w => w.length > 0);
            
            if (words.length < 2) {
                showToast("Add at least 2 items.", true);
                return;
            }

            const count = Math.min(Math.max(parseInt(listCountInput.value) || 1, 1), 12);
            let results = [];

            // Generate N randomized versions of the full list
            for (let i = 0; i < count; i++) {
                results.push(shuffle(words));
            }

            renderLists(results);
            showToast("Lists Generated!");
        }

        function renderLists(data) {
            emptyState.classList.add('hidden');
            listsGrid.classList.remove('hidden');
            listsGrid.innerHTML = '';

            data.forEach((list, i) => {
                const theme = themeCycle[i % themeCycle.length];
                
                const card = document.createElement('div');
                card.className = `card-neo overflow-hidden flex flex-col animate-pop`;
                card.style.animationDelay = `${i * 0.1}s`;

                // Header
                const header = `
                    <div class="${theme.bg} p-4 border-b-3 border-e1-dark flex justify-between items-center">
                        <h3 class="font-heading font-bold text-white text-xl uppercase tracking-wide">Group ${i + 1}</h3>
                        <div class="bg-white/20 px-2 py-1 rounded text-white font-bold text-xs border-2 border-white/40">
                            ${list.length}
                        </div>
                    </div>
                `;

                // List
                const listItems = list.map(item => `
                    <li class="flex items-center gap-3 py-2 border-b-2 border-slate-100 last:border-0">
                        <div class="w-2 h-2 rounded-full ${theme.bg}"></div>
                        <span class="font-bold text-e1-dark">${item}</span>
                    </li>
                `).join('');

                const body = `
                    <div class="p-5 bg-white flex-grow">
                        <ul class="text-lg font-body">
                            ${listItems}
                        </ul>
                    </div>
                `;

                card.innerHTML = header + body;
                listsGrid.appendChild(card);
            });

            lucide.createIcons();
            // Scroll to results on mobile
            if(window.innerWidth < 1024) {
                listsGrid.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function copyAllLists() {
            if (listsGrid.children.length === 0) return;
            
            let output = "";
            const cards = listsGrid.querySelectorAll('.card-neo');
            
            cards.forEach((card, idx) => {
                output += `--- GROUP ${idx + 1} ---\n`;
                card.querySelectorAll('li span').forEach((span, i) => {
                    output += `${i + 1}. ${span.innerText}\n`;
                });
                output += "\n";
            });

            navigator.clipboard.writeText(output).then(() => {
                showToast("Copied all lists!");
            });
        }

        function showToast(msg, isError = false) {
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();

            const toast = document.createElement('div');
            toast.className = `toast fixed bottom-6 left-1/2 -translate-x-1/2 px-6 py-3 rounded-xl font-heading font-bold text-sm shadow-neo z-50 animate-pop flex items-center gap-2 border-3 border-e1-dark ${isError ? 'bg-e1-pink text-white' : 'bg-e1-green text-white'}`;
            toast.innerHTML = isError ? `<i data-lucide="alert-circle" class="w-5 h-5"></i> ${msg}` : `<i data-lucide="check" class="w-5 h-5"></i> ${msg}`;
            
            document.body.appendChild(toast);
            lucide.createIcons();
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, 20px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // --- INIT ---
        window.onload = () => {
            loadWords();
            lucide.createIcons();
        };
        
        document.getElementById('generateButton').addEventListener('click', generateLists);
        wordInput.addEventListener('input', (e) => saveWords(e.target.value));

    </script>
</body>
</html>