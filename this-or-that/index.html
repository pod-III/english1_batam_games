<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This or That - English 1 Batam</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Fredoka One for that chunky, playful look -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        display: ['"Fredoka One"', 'cursive'],
                        body: ['"Nunito"', 'sans-serif'],
                    },
                    colors: {
                        e1pink: '#FF6B95',
                        e1orange: '#FF8C42',
                        e1green: '#00E676',
                        e1blue: '#2979FF',
                        e1dark: '#1a1a2e',
                        e1yellow: '#FFD600',
                    },
                    boxShadow: {
                        'hard': '6px 6px 0px 0px rgba(0,0,0,1)',
                        'hard-sm': '3px 3px 0px 0px rgba(0,0,0,1)',
                        'hard-lg': '10px 10px 0px 0px rgba(0,0,0,1)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f8fafc;
            /* Polished Dotted Background Pattern */
            background-image: radial-gradient(#cbd5e1 2px, transparent 2px);
            background-size: 30px 30px;
            overflow: hidden; 
        }

        /* Animations */
        @keyframes slideInLeft {
            0% { transform: translateX(-120%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInRight {
            0% { transform: translateX(120%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-12px) rotate(2deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        @keyframes pulse-ring {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
            70% { transform: translate(-50%, -50%) scale(1.1); opacity: 0; box-shadow: 0 0 0 20px rgba(255, 255, 255, 0); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }

        .animate-slide-left { animation: slideInLeft 0.7s cubic-bezier(0.2, 1, 0.3, 1) forwards; }
        .animate-slide-right { animation: slideInRight 0.7s cubic-bezier(0.2, 1, 0.3, 1) forwards; }
        .animate-pop { animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .animate-float { animation: float 4s ease-in-out infinite; }

        /* VS Element with Pulse */
        .vs-circle {
            background: #FFD600;
            border: 6px solid black;
            box-shadow: 6px 6px 0px black;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
        }
        .vs-circle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            animation: pulse-ring 2s infinite;
            z-index: -1;
        }

        /* Custom Scrollbar for Modal */
        .custom-scrollbar::-webkit-scrollbar { width: 10px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 5px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 5px; border: 2px solid #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* Fancy Button Hover Effects */
        .btn-fancy {
            transition: all 0.1s;
        }
        .btn-fancy:active {
            transform: translate(3px, 3px);
            box-shadow: none !important;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col text-e1dark">

    <!-- Navbar/Header -->
    <header class="bg-white border-b-4 border-black p-3 md:p-4 flex justify-between items-center z-50 relative shadow-md">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-e1pink rounded-xl border-4 border-black flex items-center justify-center shadow-hard-sm transform rotate-3">
                <i class="fa-solid fa-arrows-left-right text-white text-xl"></i>
            </div>
            <div>
                <h1 class="font-display text-2xl md:text-3xl tracking-wide leading-none text-black">THIS<span class="text-e1pink">or</span>THAT</h1>
                <p class="text-xs font-bold text-gray-500 hidden md:block">ENGLISH 1 BATAM ACTIVITY HUB</p>
            </div>
        </div>
        <div class="flex gap-3">
            <button onclick="toggleSound()" id="soundBtn" class="bg-white hover:bg-gray-100 w-12 h-12 rounded-xl border-4 border-black shadow-hard-sm btn-fancy flex items-center justify-center">
                <i class="fa-solid fa-volume-high text-lg"></i>
            </button>
            <button onclick="location.reload()" class="bg-e1orange text-white px-6 py-2 rounded-xl border-4 border-black shadow-hard-sm font-black font-display text-lg hover:bg-orange-500 btn-fancy">
                EXIT
            </button>
        </div>
    </header>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-grow relative flex items-center justify-center overflow-hidden">

        <!-- SCREEN 1: START MENU -->
        <div id="startScreen" class="text-center z-10 p-4 w-full max-w-4xl flex flex-col items-center">
            
            <div class="mb-12 animate-float relative">
                <!-- Decorative background blob -->
                <div class="absolute inset-0 bg-yellow-300 rounded-full filter blur-xl opacity-50 transform scale-150"></div>
                
                <div class="relative flex items-center justify-center gap-4 md:gap-8">
                    <div class="flex flex-col transform -rotate-6">
                        <span class="bg-e1pink text-white text-6xl md:text-9xl font-display px-8 py-2 border-[6px] border-black shadow-hard-lg">THIS</span>
                    </div>
                    <div class="flex flex-col items-center justify-center z-20">
                         <div class="bg-black text-white rounded-full w-16 h-16 md:w-24 md:h-24 flex items-center justify-center border-4 border-white shadow-lg">
                            <span class="font-display text-2xl md:text-4xl">OR</span>
                         </div>
                    </div>
                    <div class="flex flex-col transform rotate-6">
                        <span class="bg-e1blue text-white text-6xl md:text-9xl font-display px-8 py-2 border-[6px] border-black shadow-hard-lg">THAT</span>
                    </div>
                </div>
            </div>
            
            <div class="bg-white p-8 rounded-3xl border-4 border-black shadow-hard-lg max-w-lg w-full relative">
                <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 bg-e1yellow px-6 py-1 border-4 border-black rounded-full font-bold shadow-sm">
                    CLASSROOM EDITION
                </div>
                
                <div class="flex flex-col gap-4 mt-4">
                    <button onclick="startGame()" class="btn-fancy w-full bg-e1green text-white text-3xl py-4 rounded-2xl border-4 border-black shadow-hard font-display hover:brightness-110 flex items-center justify-center gap-3">
                        <i class="fa-solid fa-play"></i> START GAME
                    </button>
                    <button onclick="openSetupModal()" class="btn-fancy w-full bg-white text-gray-800 text-xl py-3 rounded-2xl border-4 border-black shadow-hard font-bold hover:bg-gray-50 flex items-center justify-center gap-3">
                        <i class="fa-solid fa-pen-to-square"></i> CUSTOMIZE
                    </button>
                </div>
            </div>
        </div>

        <!-- SCREEN 2: GAMEPLAY -->
        <div id="gameScreen" class="hidden absolute inset-0 w-full h-full flex flex-col md:flex-row">
            
            <!-- Instructions Overlay -->
            <div id="instructionOverlay" class="absolute inset-0 bg-black/85 z-50 flex items-center justify-center hidden backdrop-blur-sm">
                <div class="bg-white p-6 md:p-10 rounded-3xl border-[6px] border-black shadow-hard-lg max-w-3xl w-11/12 text-center relative overflow-hidden animate-pop">
                    <!-- Decorative pattern header -->
                    <div class="absolute top-0 left-0 w-full h-4 bg-pattern-checkers opacity-20"></div>

                    <h2 class="font-display text-4xl md:text-6xl text-e1pink mb-2 drop-shadow-sm" style="-webkit-text-stroke: 2px black; text-shadow: 4px 4px 0 #000;">HOW TO PLAY</h2>
                    
                    <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-12 my-8">
                        <div class="bg-e1pink/20 p-6 rounded-2xl border-4 border-e1pink border-dashed w-full md:w-1/2">
                            <i class="fa-solid fa-arrow-left text-6xl mb-4 block text-e1pink"></i>
                            <span class="font-bold text-2xl text-gray-800">Move LEFT</span>
                            <p class="text-gray-600 font-bold leading-tight mt-1">if you choose the first option.</p>
                        </div>
                        
                        <div class="font-display text-4xl text-black">VS</div>
                        
                        <div class="bg-e1blue/20 p-6 rounded-2xl border-4 border-e1blue border-dashed w-full md:w-1/2">
                            <i class="fa-solid fa-arrow-right text-6xl mb-4 block text-e1blue"></i>
                            <span class="font-bold text-2xl text-gray-800">Move RIGHT</span>
                            <p class="text-gray-600 font-bold leading-tight mt-1">if you choose the second option.</p>
                        </div>
                    </div>
                    
                    <button onclick="dismissInstructions()" class="btn-fancy bg-e1green text-white text-2xl px-10 py-4 rounded-2xl border-4 border-black shadow-hard font-display hover:brightness-110">
                        LET'S GO!
                    </button>
                </div>
            </div>

            <!-- Left Option -->
            <div id="leftPanel" class="w-full md:w-1/2 h-1/2 md:h-full bg-e1pink flex flex-col items-center justify-center p-4 relative border-b-4 md:border-b-0 md:border-r-4 border-black transition-all duration-500 overflow-hidden">
                <!-- Background Pattern -->
                <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')]"></div>
                
                <div class="absolute top-4 left-4 bg-black/20 backdrop-blur-md px-4 py-2 rounded-xl border-2 border-white/30 text-white font-black text-lg md:text-xl shadow-sm z-10">
                    <i class="fa-solid fa-arrow-left mr-2"></i> LEFT SIDE
                </div>
                
                <div id="leftContent" class="text-center opacity-0 transform -translate-x-10 transition-all duration-700 z-10 w-full px-4">
                    <div class="bg-white/20 inline-block p-8 rounded-full mb-6 border-4 border-white/40 shadow-lg backdrop-blur-sm">
                        <i id="leftIcon" class="fa-solid fa-mug-hot text-7xl md:text-9xl text-white drop-shadow-md"></i>
                    </div>
                    <h2 id="leftText" class="font-display text-5xl md:text-7xl text-white drop-shadow-[4px_4px_0_rgba(0,0,0,0.5)] leading-tight uppercase tracking-wide break-words">COFFEE</h2>
                </div>
            </div>

            <!-- VS Circle -->
            <div class="vs-circle w-24 h-24 md:w-40 md:h-40 rounded-full flex items-center justify-center">
                <span class="font-display text-4xl md:text-7xl text-black transform -rotate-6">OR</span>
            </div>

            <!-- Right Option -->
            <div id="rightPanel" class="w-full md:w-1/2 h-1/2 md:h-full bg-e1blue flex flex-col items-center justify-center p-4 relative transition-all duration-500 overflow-hidden">
                <!-- Background Pattern -->
                <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')]"></div>

                <div class="absolute bottom-4 right-4 md:top-4 md:bottom-auto bg-black/20 backdrop-blur-md px-4 py-2 rounded-xl border-2 border-white/30 text-white font-black text-lg md:text-xl shadow-sm z-10">
                    RIGHT SIDE <i class="fa-solid fa-arrow-right ml-2"></i>
                </div>
                
                <div id="rightContent" class="text-center opacity-0 transform translate-x-10 transition-all duration-700 z-10 w-full px-4">
                    <div class="bg-white/20 inline-block p-8 rounded-full mb-6 border-4 border-white/40 shadow-lg backdrop-blur-sm">
                        <i id="rightIcon" class="fa-solid fa-leaf text-7xl md:text-9xl text-white drop-shadow-md"></i>
                    </div>
                    <h2 id="rightText" class="font-display text-5xl md:text-7xl text-white drop-shadow-[4px_4px_0_rgba(0,0,0,0.5)] leading-tight uppercase tracking-wide break-words">TEA</h2>
                </div>
            </div>

            <!-- Question Banner -->
            <div class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-white px-8 py-4 rounded-2xl border-4 border-black shadow-hard z-30 w-11/12 md:w-auto max-w-4xl text-center hidden md:block">
                <h3 id="questionText" class="font-black text-2xl text-gray-800 uppercase tracking-wide">Would you rather...</h3>
            </div>
            
            <!-- Mobile Question Banner -->
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[350%] md:hidden bg-white px-6 py-2 rounded-xl border-4 border-black shadow-hard z-30 w-max max-w-[90%]">
                <h3 id="questionTextMobile" class="font-black text-sm text-gray-800 uppercase truncate">Would you rather...</h3>
            </div>

            <!-- Controls -->
            <div class="absolute bottom-8 left-0 w-full flex justify-center items-center gap-4 z-30 pointer-events-none">
                <div class="pointer-events-auto flex gap-4 items-center bg-white/80 backdrop-blur-md p-3 rounded-2xl border-4 border-black shadow-hard">
                    <button onclick="prevSlide()" class="btn-fancy bg-white w-12 h-12 rounded-lg border-2 border-black flex items-center justify-center hover:bg-gray-100">
                        <i class="fa-solid fa-chevron-left text-xl"></i>
                    </button>
                    
                    <div class="font-display text-2xl min-w-[80px] text-center">
                        <span id="slideCounter">1 / 10</span>
                    </div>
                    
                    <button onclick="nextSlide()" class="btn-fancy bg-e1green w-14 h-14 rounded-lg border-2 border-black flex items-center justify-center text-white hover:brightness-110">
                        <i class="fa-solid fa-chevron-right text-2xl"></i>
                    </button>
                </div>
            </div>

        </div>
        
        <!-- SCREEN 3: END SCREEN -->
        <div id="endScreen" class="hidden text-center z-10 p-8 max-w-3xl w-full flex flex-col items-center">
            <div class="mb-8 animate-pop">
                 <i class="fa-solid fa-trophy text-8xl text-e1yellow drop-shadow-[4px_4px_0_#000] stroke-black" style="-webkit-text-stroke: 3px black;"></i>
            </div>
            <h2 class="font-display text-5xl md:text-8xl mb-4 text-white drop-shadow-[6px_6px_0_#000] text-e1pink" style="-webkit-text-stroke: 3px black;">GREAT JOB!</h2>
            <div class="bg-white p-6 rounded-2xl border-4 border-black shadow-hard mb-8 w-full">
                <p class="text-2xl font-bold text-gray-700">You finished all the questions.</p>
                <p class="text-lg text-gray-500 mt-2">Ready for another round?</p>
            </div>
            <div class="flex gap-4">
                <button onclick="resetGame()" class="btn-fancy bg-e1blue text-white text-2xl py-4 px-10 rounded-xl border-4 border-black shadow-hard font-display hover:brightness-110">
                    PLAY AGAIN
                </button>
                <button onclick="openSetupModal()" class="btn-fancy bg-e1orange text-white text-2xl py-4 px-6 rounded-xl border-4 border-black shadow-hard font-display hover:brightness-110">
                    <i class="fa-solid fa-gear"></i>
                </button>
            </div>
        </div>

    </main>

    <!-- EDIT MODAL -->
    <div id="setupModal" class="fixed inset-0 bg-black/60 z-50 hidden flex items-center justify-center backdrop-blur-sm p-4">
        <div class="bg-white w-full max-w-4xl h-full md:h-auto md:max-h-[85vh] rounded-3xl border-[6px] border-black shadow-hard-lg flex flex-col overflow-hidden animate-pop">
            
            <!-- Modal Header -->
            <div class="bg-e1orange border-b-4 border-black p-5 flex justify-between items-center">
                <h2 class="font-display text-3xl text-white uppercase tracking-wider drop-shadow-md"><i class="fa-solid fa-sliders mr-3"></i>Game Setup</h2>
                <button onclick="closeSetupModal()" class="text-white hover:text-black transition-colors text-3xl">
                    <i class="fa-solid fa-square-xmark"></i>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="flex flex-col md:flex-row h-full overflow-hidden">
                <!-- Sidebar Presets -->
                <div class="w-full md:w-1/3 bg-gray-100 border-b-4 md:border-b-0 md:border-r-4 border-black p-4 overflow-y-auto custom-scrollbar">
                    <h3 class="font-black text-gray-700 mb-4 text-lg uppercase">Load Preset:</h3>
                    <div class="grid grid-cols-2 md:grid-cols-1 gap-3">
                        <button onclick="loadPreset('standard')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-blue-50 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-star text-e1yellow"></i> Standard
                        </button>
                        <button onclick="loadPreset('actions')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-e1pink/10 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-person-running text-e1pink"></i> Actions
                        </button>
                        <button onclick="loadPreset('food')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-e1orange/10 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-burger text-e1orange"></i> Food
                        </button>
                        <button onclick="loadPreset('animals')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-e1green/10 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-hippo text-e1green"></i> Animals
                        </button>
                        <button onclick="loadPreset('fantasy')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-purple-100 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-dragon text-purple-500"></i> Fantasy
                        </button>
                         <button onclick="loadPreset('hobbies')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-blue-100 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-palette text-e1blue"></i> Hobbies
                        </button>
                         <button onclick="loadPreset('school')" class="btn-fancy text-left p-3 rounded-xl border-2 border-black bg-white hover:bg-yellow-100 shadow-sm font-bold flex items-center gap-2">
                            <i class="fa-solid fa-school text-yellow-600"></i> School
                        </button>
                    </div>
                </div>

                <!-- Main Input Area -->
                <div class="w-full md:w-2/3 p-6 overflow-y-auto custom-scrollbar bg-white flex flex-col">
                    <div class="mb-4 bg-blue-50 p-4 rounded-xl border-2 border-blue-200">
                         <p class="text-sm text-blue-800 font-bold mb-1">Format: <span class="font-mono bg-white px-1 border rounded">Question | Left | Right</span></p>
                         <p class="text-xs text-blue-600">Icons are auto-detected! (e.g. use words like 'cat', 'pizza', 'run')</p>
                    </div>
                    <textarea id="questionInput" class="w-full flex-grow min-h-[300px] p-4 rounded-xl border-4 border-gray-300 focus:border-e1blue focus:ring-4 focus:ring-blue-100 outline-none font-mono text-sm leading-loose bg-gray-50 shadow-inner resize-none" placeholder="Would you rather... | Coffee | Tea"></textarea>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="p-4 border-t-4 border-black bg-gray-50 flex justify-end gap-3 shrink-0">
                <button onclick="closeSetupModal()" class="px-6 py-3 rounded-xl font-bold text-gray-600 hover:bg-gray-200 transition-colors border-2 border-transparent">Cancel</button>
                <button onclick="saveAndStart()" class="btn-fancy bg-e1green text-white px-10 py-3 rounded-xl border-4 border-black shadow-hard-sm font-display text-xl hover:brightness-110">
                    SAVE & PLAY <i class="fa-solid fa-check ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- AUDIO ENGINE (Synth) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let isMuted = localStorage.getItem('e1_mute') === 'true';

        function playSound(type) {
            if (isMuted) return;
            if (audioCtx.state === 'suspended') audioCtx.resume();

            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'click') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'slide') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(400, audioCtx.currentTime + 0.15);
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.15);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.15);
            } else if (type === 'win') {
                osc.type = 'square';
                // Fun arpeggio
                osc.frequency.setValueAtTime(400, audioCtx.currentTime);
                osc.frequency.setValueAtTime(600, audioCtx.currentTime + 0.1);
                osc.frequency.setValueAtTime(800, audioCtx.currentTime + 0.2);
                osc.frequency.setValueAtTime(1000, audioCtx.currentTime + 0.3);
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.6);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.6);
            }
        }

        function toggleSound() {
            isMuted = !isMuted;
            localStorage.setItem('e1_mute', isMuted);
            updateSoundIcon();
            if(!isMuted) playSound('click');
        }

        function updateSoundIcon() {
            const btn = document.getElementById('soundBtn');
            btn.innerHTML = isMuted ? '<i class="fa-solid fa-volume-xmark text-gray-400 text-lg"></i>' : '<i class="fa-solid fa-volume-high text-lg"></i>';
        }
        
        updateSoundIcon();

        // --- GAME DATA & STATE ---
        const PRESETS = {
            standard: `Would you rather drink... | Coffee | Tea
Would you rather go to the... | Beach | Mountains
Would you rather have... | Salty Snacks | Sweet Treats
Would you rather... | Read Books | Watch Movies
Which ice cream is better? | Chocolate | Vanilla
Would you rather go... | Skydiving | Scuba Diving
Which class is better? | Math | Art
Would you rather be a... | Cat | Dog
Would you rather play... | Indoors | Outdoors
Would you rather have... | Super Strength | Flying Power`,
            
            actions: `Would you rather... | Sing a Song | Dance a Dance
Would you rather... | Run Fast | Jump High
Would you rather... | Whisper | Shout
Would you rather... | Walk Backwards | Hop on One Foot
Would you rather... | Swim | Climb`,
            
            food: `What do you prefer? | Pizza | Burger
What do you prefer? | Apple | Banana
What do you prefer? | Cake | Cookie
What do you prefer? | Milk | Juice
What do you prefer? | Fries | Salad
What do you prefer? | Breakfast | Dinner`,

            animals: `Which is cooler? | Lion | Tiger
Which is a better pet? | Cat | Dog
Would you rather be a... | Bird | Fish
Which is scarier? | Shark | Spider
Which is cuter? | Bunny | Panda
Would you rather have a... | Horse | Elephant`,

            fantasy: `Would you rather have... | Invisibility | Super Strength
Would you rather meet a... | Dragon | Unicorn
Would you rather be a... | Wizard | Ninja
Would you rather live in... | Space | Underwater
Would you rather... | Time Travel | Teleport`,

            hobbies: `What is more fun? | Painting | Gaming
What is more fun? | Soccer | Basketball
What is more fun? | Reading | Writing
What is more fun? | Cooking | Gardening
What is more fun? | Singing | Dancing`,

            school: `Which is better? | Recess | Lunch
Which subject is fun? | History | Science
Would you rather use... | Pen | Pencil
Which is better? | Backpack | Tote Bag
Would you rather... | Homework | Test`
        };

        // Expanded Icon Mapping Logic
        const ICON_MAP = {
            'coffee': 'fa-mug-hot', 'tea': 'fa-leaf',
            'beach': 'fa-umbrella-beach', 'mountain': 'fa-mountain', 'mountains': 'fa-mountain',
            'salty': 'fa-pretzel', 'sweet': 'fa-candy-cane',
            'book': 'fa-book', 'books': 'fa-book', 'movie': 'fa-film', 'movies': 'fa-film', 'read': 'fa-book-open',
            'chocolate': 'fa-ice-cream', 'vanilla': 'fa-ice-cream', 'cake': 'fa-cake-candles', 'cookie': 'fa-cookie-bite',
            'skydiving': 'fa-parachute-box', 'scuba': 'fa-mask-ventilator',
            'math': 'fa-calculator', 'art': 'fa-palette',
            'cat': 'fa-cat', 'dog': 'fa-dog', 'lion': 'fa-paw', 'tiger': 'fa-paw', 'horse': 'fa-horse', 'elephant': 'fa-hippo',
            'bunny': 'fa-carrot', 'panda': 'fa-paw',
            'pizza': 'fa-pizza-slice', 'burger': 'fa-burger', 'fries': 'fa-utensils', 'salad': 'fa-carrot',
            'apple': 'fa-apple-whole', 'banana': 'fa-pepper-hot', // fallback
            'milk': 'fa-glass-water', 'juice': 'fa-glass-water',
            'music': 'fa-music', 'dance': 'fa-person-running', 'sing': 'fa-microphone',
            'strength': 'fa-dumbbell', 'fly': 'fa-plane', 'invisibility': 'fa-eye-slash',
            'run': 'fa-person-running', 'jump': 'fa-person-arrow-up-from-line',
            'swim': 'fa-water', 'climb': 'fa-mountain',
            'space': 'fa-rocket', 'underwater': 'fa-water', 'dragon': 'fa-dragon', 'unicorn': 'fa-horse',
            'wizard': 'fa-hat-wizard', 'ninja': 'fa-user-ninja',
            'gaming': 'fa-gamepad', 'painting': 'fa-palette', 'soccer': 'fa-futbol', 'basketball': 'fa-basketball',
            'school': 'fa-school', 'science': 'fa-flask', 'history': 'fa-landmark',
            'pen': 'fa-pen', 'pencil': 'fa-pencil', 'backpack': 'fa-suitcase',
            'default': 'fa-star'
        };

        let questions = [];
        let currentIndex = 0;

        // --- GAME LOGIC ---

        function init() {
            document.getElementById('questionInput').value = PRESETS.standard;
        }

        function parseQuestions(text) {
            return text.split('\n').filter(line => line.trim() !== '').map(line => {
                const parts = line.split('|');
                if (parts.length >= 3) {
                    return {
                        q: parts[0].trim(),
                        a: parts[1].trim(),
                        b: parts[2].trim()
                    };
                }
                return null;
            }).filter(item => item !== null);
        }

        function getIconForText(text) {
            const lower = text.toLowerCase();
            for (const key in ICON_MAP) {
                if (lower.includes(key)) return ICON_MAP[key];
            }
            return ICON_MAP['default'];
        }

        function openSetupModal() {
            playSound('click');
            document.getElementById('setupModal').classList.remove('hidden');
        }

        function closeSetupModal() {
            playSound('click');
            document.getElementById('setupModal').classList.add('hidden');
        }

        function loadPreset(name) {
            document.getElementById('questionInput').value = PRESETS[name];
            playSound('click');
        }

        function saveAndStart() {
            const rawText = document.getElementById('questionInput').value;
            questions = parseQuestions(rawText);
            
            if (questions.length === 0) {
                alert("Please enter at least one valid question line.");
                return;
            }

            closeSetupModal();
            startGame();
        }

        function startGame() {
            if (questions.length === 0) {
                questions = parseQuestions(PRESETS.standard);
            }

            playSound('win'); 
            currentIndex = 0;
            
            // UI Transitions
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('instructionOverlay').classList.remove('hidden');
            
            updateSlide(false);
        }

        function dismissInstructions() {
            playSound('click');
            document.getElementById('instructionOverlay').classList.add('hidden');
        }

        function updateSlide(animate = true) {
            const q = questions[currentIndex];
            const leftContent = document.getElementById('leftContent');
            const rightContent = document.getElementById('rightContent');

            // Reset Animation Classes
            leftContent.classList.remove('animate-slide-left');
            rightContent.classList.remove('animate-slide-right');
            
            // Force Reflow
            void leftContent.offsetWidth;

            // Set Content
            document.getElementById('questionText').textContent = q.q;
            document.getElementById('questionTextMobile').textContent = q.q;
            
            document.getElementById('leftText').textContent = q.a;
            document.getElementById('leftIcon').className = `fa-solid ${getIconForText(q.a)} text-7xl md:text-9xl text-white drop-shadow-md`;
            
            document.getElementById('rightText').textContent = q.b;
            document.getElementById('rightIcon').className = `fa-solid ${getIconForText(q.b)} text-7xl md:text-9xl text-white drop-shadow-md`;

            document.getElementById('slideCounter').textContent = `${currentIndex + 1} / ${questions.length}`;

            // Apply Animations
            if (animate) {
                playSound('slide');
                leftContent.style.opacity = '0';
                rightContent.style.opacity = '0';
                
                setTimeout(() => {
                    leftContent.classList.add('animate-slide-left');
                }, 50);
                setTimeout(() => {
                    rightContent.classList.add('animate-slide-right');
                }, 200);
            } else {
                leftContent.style.opacity = '1';
                leftContent.style.transform = 'translate(0)';
                rightContent.style.opacity = '1';
                rightContent.style.transform = 'translate(0)';
            }
        }

        function nextSlide() {
            if (currentIndex < questions.length - 1) {
                currentIndex++;
                updateSlide(true);
            } else {
                endGame();
            }
        }

        function prevSlide() {
            if (currentIndex > 0) {
                currentIndex--;
                updateSlide(true);
            } else {
                playSound('click');
            }
        }

        function endGame() {
            playSound('win');
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.remove('hidden');
        }

        function resetGame() {
            playSound('click');
            document.getElementById('endScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('gameScreen').classList.contains('hidden')) return;
            
            if (e.key === 'ArrowRight' || e.key === ' ') {
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                prevSlide();
            }
        });

        // Init
        init();
    </script>
</body>
</html>