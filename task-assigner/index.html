<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Assigner | English 1 Games</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Fredoka', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            pink: '#EC4899',
                            orange: '#F97316',
                            green: '#22C55E',
                            blue: '#3B82F6',
                        }
                    },
                    animation: {
                        'bounce-in': 'bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards',
                        'float': 'float 6s ease-in-out infinite',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #f0f9ff;
            overflow: hidden; /* Prevent scrolling on body, handle in containers */
        }
        
        /* Fun Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 10px;
            border: 3px solid transparent;
            background-clip: content-box;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #94a3b8; 
        }

        /* Ambient Blobs */
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            z-index: -1;
            opacity: 0.6;
            animation: float 10s infinite ease-in-out;
        }
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, -20px); }
        }

        /* Card Animation */
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3) translateY(50px); }
            50% { opacity: 1; transform: scale(1.05); }
            70% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 4px solid #fff;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* Input styling */
        .kid-input {
            background-color: #f1f5f9;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }
        .kid-input:focus {
            background-color: #fff;
            border-color: #3B82F6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
            outline: none;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col text-slate-800 font-sans selection:bg-brand-pink selection:text-white">

    <!-- Background Decoration -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="blob bg-brand-pink/30 w-96 h-96 top-0 left-0 -translate-x-1/2 -translate-y-1/2"></div>
        <div class="blob bg-brand-blue/30 w-80 h-80 bottom-0 right-0 translate-x-1/3 translate-y-1/3 delay-1000"></div>
        <div class="blob bg-brand-orange/20 w-64 h-64 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 delay-2000"></div>
    </div>

    <!-- Header / Nav -->
    <nav class="h-16 flex-none bg-white/80 backdrop-blur-md border-b-4 border-slate-100 px-6 flex items-center justify-between z-50">
        <div class="flex items-center gap-3">
            <a href="../index.html" class="w-10 h-10 rounded-2xl bg-slate-100 text-slate-400 hover:bg-brand-blue hover:text-white hover:scale-110 hover:rotate-3 transition-all duration-300 flex items-center justify-center shadow-sm">
                <i class="fas fa-arrow-left text-lg"></i>
            </a>
            <h1 class="text-2xl font-bold tracking-tight text-slate-700">
                <span class="text-brand-pink">Task</span> <span class="text-brand-green">Assigner</span>
            </h1>
        </div>
        <div class="hidden md:flex items-center gap-2 bg-slate-100 px-4 py-1.5 rounded-full text-slate-500 font-bold text-sm">
            <i class="fas fa-shapes text-brand-orange animate-bounce"></i> For Kids
        </div>
    </nav>

    <!-- Main Content Layout -->
    <div class="flex-grow flex flex-col md:flex-row p-4 gap-4 overflow-hidden">
        
        <!-- LEFT PANEL: Teacher Controls (Compact) -->
        <div class="w-full md:w-80 flex-none flex flex-col gap-4">
            <div class="glass-panel rounded-3xl p-5 flex flex-col h-full overflow-hidden relative">
                
                <h2 class="text-lg font-bold text-slate-600 mb-4 flex items-center gap-2">
                    <i class="fas fa-edit text-brand-blue"></i> Teacher Input
                </h2>

                <!-- Inputs Scrollable Area -->
                <div class="flex-grow overflow-y-auto pr-2 space-y-4">
                    <!-- Students -->
                    <div>
                        <label class="block text-sm font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">
                            Who is here? <span id="peopleCount" class="bg-brand-pink text-white px-2 py-0.5 rounded-full text-xs ml-1">0</span>
                        </label>
                        <textarea id="peopleInput" rows="6" 
                            class="kid-input w-full rounded-2xl p-3 text-lg font-medium text-slate-700 placeholder-slate-400 resize-none"
                            placeholder="Alex&#10;Bella&#10;Charlie"></textarea>
                    </div>

                    <!-- Tasks -->
                    <div>
                        <label class="block text-sm font-bold text-slate-500 mb-1 ml-1 uppercase tracking-wide">
                            What to do? <span id="taskCount" class="bg-brand-orange text-white px-2 py-0.5 rounded-full text-xs ml-1">0</span>
                        </label>
                        <textarea id="taskInput" rows="6" 
                            class="kid-input w-full rounded-2xl p-3 text-lg font-medium text-slate-700 placeholder-slate-400 resize-none"
                            placeholder="Clean Up&#10;Line Leader&#10;Books"></textarea>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mt-4 pt-4 border-t-2 border-slate-100 grid grid-cols-2 gap-3 flex-none">
                    <button onclick="clearAll()" class="bg-slate-200 hover:bg-slate-300 text-slate-500 font-bold py-3 px-4 rounded-xl transition-transform active:scale-95 flex items-center justify-center gap-2">
                        <i class="fas fa-trash-alt"></i> Clear
                    </button>
                    <button onclick="assignTasks()" class="bg-gradient-to-br from-brand-blue to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2">
                        <i class="fas fa-magic"></i> GO!
                    </button>
                </div>

            </div>
        </div>

        <!-- RIGHT PANEL: The Stage (Huge Visibility) -->
        <div class="flex-grow glass-panel rounded-3xl p-6 relative overflow-hidden flex flex-col">
            
            <!-- Empty State -->
            <div id="emptyState" class="absolute inset-0 flex flex-col items-center justify-center z-10 text-center p-8">
                <div class="w-40 h-40 bg-white rounded-full shadow-xl flex items-center justify-center mb-6 animate-float border-4 border-slate-50">
                    <i class="fas fa-rocket text-6xl text-brand-pink"></i>
                </div>
                <h3 class="text-4xl font-bold text-slate-700 mb-3">Ready to Play?</h3>
                <p class="text-xl text-slate-400 font-medium max-w-md">Teacher, fill in the names and tasks on the left!</p>
            </div>

            <!-- Results Grid -->
            <div id="resultsArea" class="flex-grow overflow-y-auto pr-2 hidden custom-scroll">
                <div id="cardsGrid" class="grid grid-cols-1 xl:grid-cols-2 gap-6 pb-20">
                    <!-- Cards will be injected here -->
                </div>
            </div>

            <!-- Bottom Stats -->
            <div class="h-8 flex-none flex items-center justify-between text-slate-400 text-sm font-bold mt-2 border-t-2 border-slate-50 pt-2">
                <span id="statusText">Waiting for magic...</span>
                <span>English 1 Games</span>
            </div>

        </div>
    </div>

    <script>
        // Elements
        const peopleInput = document.getElementById('peopleInput');
        const taskInput = document.getElementById('taskInput');
        const peopleCount = document.getElementById('peopleCount');
        const taskCount = document.getElementById('taskCount');
        const emptyState = document.getElementById('emptyState');
        const resultsArea = document.getElementById('resultsArea');
        const cardsGrid = document.getElementById('cardsGrid');
        const statusText = document.getElementById('statusText');

        // Styles for the Random Cards
        const cardStyles = [
            { bg: 'bg-pink-50', border: 'border-pink-300', text: 'text-pink-600', icon: 'bg-pink-100', accent: 'bg-pink-500' },
            { bg: 'bg-orange-50', border: 'border-orange-300', text: 'text-orange-600', icon: 'bg-orange-100', accent: 'bg-orange-500' },
            { bg: 'bg-green-50', border: 'border-green-300', text: 'text-green-600', icon: 'bg-green-100', accent: 'bg-green-500' },
            { bg: 'bg-blue-50', border: 'border-blue-300', text: 'text-blue-600', icon: 'bg-blue-100', accent: 'bg-blue-500' },
        ];

        // Listeners
        peopleInput.addEventListener('input', updateCounts);
        taskInput.addEventListener('input', updateCounts);

        function updateCounts() {
            const p = peopleInput.value.split(/[\n,]/).filter(t => t.trim()).length;
            const t = taskInput.value.split(/[\n,]/).filter(t => t.trim()).length;
            peopleCount.textContent = p;
            taskCount.textContent = t;
        }

        function clearAll() {
            peopleInput.value = '';
            taskInput.value = '';
            updateCounts();
            resultsArea.classList.add('hidden');
            emptyState.style.display = 'flex';
            statusText.textContent = "Waiting for magic...";
        }

        function assignTasks() {
            // Get Data
            let people = peopleInput.value.split(/[\n,]/).map(s => s.trim()).filter(s => s);
            let tasks = taskInput.value.split(/[\n,]/).map(s => s.trim()).filter(s => s);

            if (people.length === 0 || tasks.length === 0) {
                // If inputs are missing, we just don't run. No popups.
                return;
            }

            // Shuffle
            people = shuffle(people);
            tasks = shuffle(tasks);

            // Clear Display
            cardsGrid.innerHTML = '';
            resultsArea.classList.remove('hidden');
            emptyState.style.display = 'none';

            // Generate Cards
            people.forEach((person, index) => {
                // If more people than tasks, cycle tasks.
                const task = tasks[index % tasks.length];
                createBigCard(person, task, index);
            });

            statusText.textContent = `Assigned ${people.length} amazing students!`;
        }

        function createBigCard(person, task, index) {
            const style = cardStyles[index % cardStyles.length];
            
            const card = document.createElement('div');
            // Flex row for landscape layout on larger screens
            card.className = `${style.bg} border-b-8 ${style.border} rounded-3xl p-4 sm:p-6 flex flex-col sm:flex-row items-center justify-between gap-4 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-bounce-in relative overflow-hidden group`;
            card.style.animationDelay = `${index * 150}ms`; // Staggered entrance

            card.innerHTML = `
                <!-- Decoration Circle -->
                <div class="absolute top-0 right-0 w-32 h-32 ${style.icon} rounded-full -mr-10 -mt-10 opacity-50 z-0"></div>

                <!-- Student Side -->
                <div class="flex items-center gap-4 z-10 w-full sm:w-5/12">
                    <div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white border-4 ${style.border} flex flex-shrink-0 items-center justify-center text-3xl sm:text-4xl shadow-md">
                        <i class="fas fa-smile ${style.text}"></i>
                    </div>
                    <div class="flex flex-col min-w-0">
                        <span class="text-xs font-black text-slate-400 uppercase tracking-widest">Student</span>
                        <span class="text-2xl sm:text-4xl font-black ${style.text} truncate leading-tight">${person}</span>
                    </div>
                </div>

                <!-- Connector Arrow -->
                <div class="z-10 flex-shrink-0 text-slate-300 transform rotate-90 sm:rotate-0">
                    <i class="fas fa-chevron-right text-4xl hidden sm:block"></i>
                    <i class="fas fa-chevron-down text-4xl block sm:hidden"></i>
                </div>

                <!-- Task Side -->
                <div class="flex items-center gap-4 z-10 w-full sm:w-5/12 justify-end sm:flex-row-reverse text-right sm:text-left">
                    <div class="flex flex-col min-w-0 items-end sm:items-start">
                        <span class="text-xs font-black text-slate-400 uppercase tracking-widest">Mission</span>
                        <span class="text-2xl sm:text-4xl font-black ${style.text} truncate leading-tight">${task}</span>
                    </div>
                </div>
            `;

            cardsGrid.appendChild(card);
        }

        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }
    </script>
</body>
</html>